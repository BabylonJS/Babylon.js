{"version":3,"sources":["webpack://BABYLON.GUI/webpack/universalModuleDefinition","webpack://BABYLON.GUI/webpack/bootstrap","webpack://BABYLON.GUI/external {\"root\":\"BABYLON\",\"commonjs\":\"babylonjs\",\"commonjs2\":\"babylonjs\",\"amd\":\"babylonjs\"}","webpack://BABYLON.GUI/./src/2D/controls/control.ts","webpack://BABYLON.GUI/./src/2D/valueAndUnit.ts","webpack://BABYLON.GUI/./src/3D/controls/container3D.ts","webpack://BABYLON.GUI/./src/2D/controls/container.ts","webpack://BABYLON.GUI/./src/2D/measure.ts","webpack://BABYLON.GUI/./src/2D/controls/textBlock.ts","webpack://BABYLON.GUI/./src/2D/controls/stackPanel.ts","webpack://BABYLON.GUI/./src/3D/controls/volumeBasedPanel.ts","webpack://BABYLON.GUI/./src/2D/index.ts","webpack://BABYLON.GUI/./src/2D/controls/index.ts","webpack://BABYLON.GUI/./src/2D/controls/image.ts","webpack://BABYLON.GUI/./src/3D/controls/control3D.ts","webpack://BABYLON.GUI/./src/3D/controls/button3D.ts","webpack://BABYLON.GUI/./src/3D/materials/index.ts","webpack://BABYLON.GUI/./src/3D/charting/index.ts","webpack://BABYLON.GUI/./src/index.ts","webpack://BABYLON.GUI/./src/2D/controls/button.ts","webpack://BABYLON.GUI/./src/2D/controls/rectangle.ts","webpack://BABYLON.GUI/./src/2D/math2D.ts","webpack://BABYLON.GUI/./src/2D/controls/inputText.ts","webpack://BABYLON.GUI/./src/2D/multiLinePoint.ts","webpack://BABYLON.GUI/./src/2D/advancedDynamicTexture.ts","webpack://BABYLON.GUI/./src/2D/style.ts","webpack://BABYLON.GUI/./src/3D/controls/abstractButton3D.ts","webpack://BABYLON.GUI/./src/3D/vector3WithInfo.ts","webpack://BABYLON.GUI/./src/3D/materials/fluentMaterial.ts","webpack://BABYLON.GUI/./src/legacy.ts","webpack://BABYLON.GUI/../Tools/Gulp/node_modules/webpack/buildin/global.js","webpack://BABYLON.GUI/./src/2D/controls/checkbox.ts","webpack://BABYLON.GUI/./src/2D/controls/colorpicker.ts","webpack://BABYLON.GUI/./src/2D/controls/ellipse.ts","webpack://BABYLON.GUI/./src/2D/controls/grid.ts","webpack://BABYLON.GUI/./src/2D/controls/inputPassword.ts","webpack://BABYLON.GUI/./src/2D/controls/line.ts","webpack://BABYLON.GUI/./src/2D/controls/multiLine.ts","webpack://BABYLON.GUI/./src/2D/controls/radioButton.ts","webpack://BABYLON.GUI/./src/2D/controls/virtualKeyboard.ts","webpack://BABYLON.GUI/./src/2D/controls/slider.ts","webpack://BABYLON.GUI/./src/2D/controls/displayGrid.ts","webpack://BABYLON.GUI/./src/2D/controls/statics.ts","webpack://BABYLON.GUI/./src/3D/index.ts","webpack://BABYLON.GUI/./src/3D/controls/index.ts","webpack://BABYLON.GUI/./src/3D/controls/cylinderPanel.ts","webpack://BABYLON.GUI/./src/3D/controls/holographicButton.ts","webpack://BABYLON.GUI/./src/3D/materials/shaders/fluent.ts","webpack://BABYLON.GUI/./src/3D/materials/shaders/fluent.fragment.fx","webpack://BABYLON.GUI/./src/3D/materials/shaders/fluent.vertex.fx","webpack://BABYLON.GUI/./src/3D/controls/meshButton3D.ts","webpack://BABYLON.GUI/./src/3D/controls/planePanel.ts","webpack://BABYLON.GUI/./src/3D/controls/scatterPanel.ts","webpack://BABYLON.GUI/./src/3D/controls/spherePanel.ts","webpack://BABYLON.GUI/./src/3D/controls/stackPanel3D.ts","webpack://BABYLON.GUI/./src/3D/charting/dataSeries.ts","webpack://BABYLON.GUI/./src/3D/charting/chart.ts","webpack://BABYLON.GUI/./src/3D/charting/barGraph.ts","webpack://BABYLON.GUI/./src/3D/charting/mapGraph.ts","webpack://BABYLON.GUI/./src/3D/gui3DManager.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","valueAndUnit_1","babylonjs_1","measure_1","math2D_1","Control","this","_alpha","_alphaSet","_zIndex","_currentMeasure","Measure","Empty","_fontFamily","_fontStyle","_fontWeight","_fontSize","ValueAndUnit","UNITMODE_PIXEL","_width","UNITMODE_PERCENTAGE","_height","_color","_style","_horizontalAlignment","HORIZONTAL_ALIGNMENT_CENTER","_verticalAlignment","VERTICAL_ALIGNMENT_CENTER","_isDirty","_tempParentMeasure","_cachedParentMeasure","_paddingLeft","_paddingRight","_paddingTop","_paddingBottom","_left","_top","_scaleX","_scaleY","_rotation","_transformCenterX","_transformCenterY","_transformMatrix","Matrix2D","Identity","_invertTransformMatrix","_transformedPosition","Vector2","Zero","_onlyMeasureMode","_isMatrixDirty","_isVisible","_fontSet","_dummyVector2","_downCount","_enterCount","_doNotRender","_downPointerIds","isHitTestVisible","isPointerBlocker","isFocusInvisible","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","hoverCursor","_linkOffsetX","_linkOffsetY","onPointerMoveObservable","Observable","onPointerOutObservable","onPointerDownObservable","onPointerUpObservable","onPointerClickObservable","onPointerEnterObservable","onDirtyObservable","onAfterDrawObservable","_getTypeName","_fontOffset","offset","_markAsDirty","_markMatrixAsDirty","toString","_host","fromString","getValueInPixel","width","height","_resetFontCache","_this","onChangedObservable","remove","_styleObserver","add","isPercentage","fontSizeToUse","isPixel","getValue","zIndex","_root","_reOrderControl","left","top","getLocalCoordinates","globalCoordinates","result","getLocalCoordinatesToRef","x","y","getParentLocalCoordinates","moveToVector3","position","scene","_rootContainer","horizontalAlignment","HORIZONTAL_ALIGNMENT_LEFT","verticalAlignment","VERTICAL_ALIGNMENT_TOP","globalViewport","_getGlobalViewport","projectedPosition","Vector3","Project","Matrix","getTransformMatrix","_moveToProjectedPosition","z","notRenderable","Tools","Error","linkWithMesh","mesh","index","_linkedControls","indexOf","_linkedMesh","splice","push","oldLeft","oldTop","newLeft","newTop","ignoreAdaptiveScaling","Math","abs","markAsDirty","_markAllAsDirty","_font","_prepareFont","_link","host","_transform","context","offsetX","offsetY","translate","rotate","scale","_cachedOffsetX","_cachedOffsetY","ComposeToRef","invertToRef","_applyStates","font","fillStyle","globalAlpha","parent","alpha","_processMeasures","parentMeasure","isEqualsTo","copyFrom","_preMeasure","_measure","_computeAlignment","_additionalProcessing","hasObservers","notifyObservers","_clip","clip","beginPath","leftShadowOffset","min","rightShadowOffset","max","topShadowOffset","bottomShadowOffset","rect","parentWidth","parentHeight","HORIZONTAL_ALIGNMENT_RIGHT","VERTICAL_ALIGNMENT_BOTTOM","_draw","contains","transformCoordinates","_shouldBlockPointer","_processPicking","type","pointerId","buttonIndex","isVisible","_processObservables","_onPointerMove","target","coordinates","_onPointerEnter","_onPointerOut","_onPointerDown","Vector2WithInfo","_onPointerUp","notifyClick","canNotifyClick","_forcePointerUp","copyFromFloats","PointerEventTypes","POINTERMOVE","previousControlOver","_lastControlOver","POINTERDOWN","_lastControlDown","_lastPickedControl","POINTERUP","fontStyle","fontWeight","fontSizeInPixels","fontFamily","_GetFontOffset","dispose","clear","removeControl","_HORIZONTAL_ALIGNMENT_LEFT","_HORIZONTAL_ALIGNMENT_RIGHT","_HORIZONTAL_ALIGNMENT_CENTER","_VERTICAL_ALIGNMENT_TOP","_VERTICAL_ALIGNMENT_BOTTOM","_VERTICAL_ALIGNMENT_CENTER","_FontHeightSizes","text","document","createElement","innerHTML","style","block","display","verticalAlign","div","appendChild","body","fontAscent","fontHeight","getBoundingClientRect","removeChild","ascent","descent","drawEllipse","arc","PI","closePath","AddHeader","unit","negativeValueAllowed","_value","refValue","idealWidth","getSize","idealHeight","useSmallestIdeal","innerWidth","innerHeight","source","match","_Regex","exec","length","sourceValue","parseFloat","sourceUnit","_UNITMODE_PERCENTAGE","_UNITMODE_PIXEL","control3D_1","Container3D","_super","_blockLayout","_children","Array","__extends","_arrangeChildren","updateLayout","containsControl","control","addControl","utilityLayer","_prepareNode","utilityLayerScene","node","blockLayout","_createNode","TransformNode","_disposeNode","_i","_a","UNSET_ORIENTATION","FACEORIGIN_ORIENTATION","FACEORIGINREVERSED_ORIENTATION","FACEFORWARD_ORIENTATION","FACEFORWARDREVERSED_ORIENTATION","Control3D","control_1","Container","_measureForChildren","_adaptWidthToChildren","_adaptHeightToChildren","_background","getChildByName","children","child","getChildByType","typeName","clearControls","children_1","slice","_cleanControlAfterRemoval","_localDraw","fillRect","save","_clipForChildren","computedWidth","computedHeight","adaptWidthToChildren","adaptHeightToChildren","restore","_changeCursor","other","TextWrapping","TextBlock","_text","_textWrapping","Clip","_textHorizontalAlignment","_textVerticalAlignment","_resizeToFit","_lineSpacing","_outlineWidth","_outlineColor","onTextChangedObservable","onLinesReadyObservable","_lines","_drawText","textWidth","outlineWidth","strokeText","fillText","_renderLines","lineWidth","strokeStyle","outlineColor","_breakLines","refWidth","lines","split","Ellipsis","WordWrap","_b","_lines_3","_line","_parseLine","_lines_2","apply","_parseLineWordWrap","_lines_1","_parseLineEllipsis","line","measureText","words","testLine","testWidth","rootY","maxLineWidth","internalValue","paddingLeftInPixels","paddingRightInPixels","paddingTopInPixels","paddingBottomInPixels","computeExpectedHeight","widthInPixels","getContext","container_1","StackPanel","_isVertical","_manualWidth","_manualHeight","_doNotTrackManualChanges","_tempMeasureStore","stackWidth","stackHeight","panelWidthChanged","panelHeightChanged","previousHeight","previousWidth","container3D_1","VolumeBasedPanel","_columns","_rows","_rowThenColum","_orientation","margin","SetImmediate","_cellWidth","_cellHeight","rows","columns","controlCount","currentInverseWorld","Invert","computeWorldMatrix","boundingBox","getHierarchyBoundingVectors","extendSize","Tmp","diff","subtractToRef","scaleInPlace","TransformNormalToRef","ceil","startOffsetX","startOffsetY","nodeGrid","cellCounter","_c","_mapGridNode","_finalProcessing","__export","GUIImage","url","_loaded","_stretch","STRETCH_FILL","_autoScale","_sourceLeft","_sourceTop","_sourceWidth","_sourceHeight","_cellId","synchronizeSizeWithContent","_domImage","_onImageLoaded","onload","_imageWidth","_imageHeight","_source","Image","SetCorsBehavior","src","cellId","rowCount","naturalWidth","cellWidth","column","row","cellHeight","STRETCH_NONE","drawImage","STRETCH_UNIFORM","hRatio","vRatio","ratio","centerX","centerY","STRETCH_EXTEND","_STRETCH_NONE","_STRETCH_FILL","_STRETCH_UNIFORM","_STRETCH_EXTEND","vector3WithInfo_1","_behaviors","_node","scaling","addBehavior","behavior","init","isLoading","onDataLoadedObservable","addOnce","attach","removeBehavior","detach","getBehaviorByName","setEnabled","AbstractMesh","linkToTransformNode","metadata","isPickable","_affectMaterial","material","pointerEnterAnimation","pointerOutAnimation","Vector3WithInfo","pointerDownAnimation","pointerUpAnimation","forcePointerUp","pickedPoint","abstractButton3D_1","advancedDynamicTexture_1","Button3D","_contentResolution","_contentScaleRatio","_currentMaterial","emissiveColor","Color3","Red","Black","_resetContent","_disposeFacadeTexture","_facadeTexture","content","_content","AdvancedDynamicTexture","Texture","TRILINEAR_SAMPLINGMODE","rootContainer","scaleX","scaleY","premulAlpha","_applyFacade","facadeTexture","emissiveTexture","faceUV","Vector4","MeshBuilder","CreateBox","depth","StandardMaterial","getScene","specularColor","AbstractButton3D","rectangle_1","textBlock_1","image_1","Button","thickness","CreateImageButton","imageUrl","textBlock","textWrapping","textHorizontalAlignment","paddingLeft","iconImage","stretch","CreateImageOnlyButton","CreateSimpleButton","CreateImageWithCenterTextButton","Rectangle","_thickness","_cornerRadius","_drawRoundedRect","fill","color","stroke","strokeRect","radius","moveTo","lineTo","quadraticCurveTo","m00","m01","m10","m11","m20","m21","Float32Array","fromValues","determinant","l0","l1","l2","l3","l4","l5","det","Epsilon","detDiv","det4","det5","multiplyToRef","r0","r1","r2","r3","r4","r5","TranslationToRef","ScalingToRef","RotationToRef","angle","sin","cos","tx","ty","parentMatrix","_TempPreTranslationMatrix","_TempScalingMatrix","_TempRotationMatrix","_TempPostTranslationMatrix","_TempCompose0","_TempCompose1","_TempCompose2","InputText","_placeholderText","_focusedBackground","_placeholderColor","_margin","_autoStretchWidth","_maxWidth","_isFocused","_blinkIsEven","_cursorOffset","_deadKey","_addKey","_currentKey","promptMessage","onBeforeKeyAddObservable","onFocusObservable","onBlurObservable","flag","autoStretchWidth","onBlur","_scrollLeft","clearTimeout","_blinkTimeout","onFocus","navigator","userAgent","prompt","focusedControl","processKey","keyCode","substr","deletePosition","deadKey","insertPosition","processKeyboard","evt","clipTextLeft","_beforeRenderText","_textWidth","marginWidth","availableWidth","textLeft","_clickedCoordinate","absoluteCursorPosition","currentSize","previousDist","cursorOffsetText","cursorOffsetWidth","cursorLeft","setTimeout","MultiLinePoint","multiLine","_multiLine","_x","_y","_point","_control","_controlObserver","onPointUpdate","_mesh","_meshObserver","onAfterCameraRenderObservable","_translatePoint","getProjectedPosition","getBoundingInfo","boundingSphere","center","getWorldMatrix","xValue","Number","_canvas","yValue","style_1","generateMipMaps","samplingMode","NEAREST_SAMPLINGMODE","Engine","TEXTUREFORMAT_RGBA","_capturingControl","_isFullscreen","_fullscreenViewport","Viewport","_idealWidth","_idealHeight","_useSmallestIdeal","_renderAtIdealSize","_blockNextFocusCheck","_renderScale","_texture","_rootCanvas","getEngine","getRenderingCanvas","_renderObserver","onBeforeCameraRenderObservable","camera","_checkUpdate","_preKeyboardObserver","onPreKeyboardObservable","info","_focusedControl","KeyboardEventTypes","KEYDOWN","event","skipOnPointerObservable","hasAlpha","_resizeObserver","onResizeObservable","_onResize","isReady","_layerToDispose","layer","isBackground","executeOnAllControls","func","container","_isFontSizeInPercentage","createStyle","Style","_pointerMoveObserver","onPrePointerObservable","_pointerObserver","onPointerObservable","_canvasPointerOutObserver","onCanvasPointerOutObservable","texture","engine","textureSize","renderWidth","getRenderWidth","renderHeight","getRenderHeight","scaleTo","toGlobal","worldMatrix","renderScale","layerMask","isDisposed","isDirty","_render","update","clearRect","measure","cursor","_doPicking","_manageFocus","_cleanControlAfterRemovalFromList","list","pi","state","isPointerCaptured","cameraToUseForPointers","activeCamera","viewport","pointerX","getHardwareScalingLevel","pointerY","button","_attachToOnPointerOut","attachToMesh","supportPointerMove","pickInfo","hit","pickedMesh","uv","getTextureCoordinates","size","enablePointerMoveEvents","moveFocusToControl","pointerEvent","CreateForMesh","onlyAlphaTesting","backFaceCulling","diffuseColor","diffuseTexture","opacityTexture","CreateFullscreenUI","foreground","sampling","BILINEAR_SAMPLINGMODE","Layer","DynamicTexture","registerShader","FluentMaterialDefines","INNERGLOW","BORDER","HOVERLIGHT","TEXTURE","rebuild","MaterialDefines","FluentMaterial","innerGlowColorIntensity","innerGlowColor","albedoColor","renderBorders","borderWidth","edgeSmoothingValue","borderMinValue","renderHoverLight","hoverRadius","hoverColor","Color4","hoverPosition","needAlphaBlending","needAlphaTesting","getAlphaTestTexture","isReadyForSubMesh","subMesh","useInstances","isFrozen","_wasPreviouslyReady","effect","_materialDefines","defines","checkReadyOnEveryCall","_renderId","getRenderId","_areTexturesDirty","_albedoTexture","isReadyOrNotBlocking","markAsProcessed","resetCachedMaterial","attribs","VertexBuffer","PositionKind","NormalKind","UVKind","uniforms","samplers","uniformBuffers","MaterialHelper","PrepareUniformsAndSamplersList","uniformsNames","uniformBuffersNames","maxSimultaneousLights","join","setEffect","createEffect","attributes","fallbacks","onCompiled","onError","indexParameters","bindForSubMesh","world","_activeEffect","bindOnlyWorldMatrix","setMatrix","_mustRebind","setColor4","setFloat","setVector3","setDirectColor4","setTexture","_afterBind","getActiveTextures","hasTexture","forceDisposeEffect","clone","SerializationHelper","Clone","serialize","serializationObject","Serialize","customType","getClassName","Parse","rootUrl","__decorate","expandToProperty","serializeAsColor3","serializeAsColor4","serializeAsVector3","serializeAsTexture","PushMaterial","GUI","globalObject","global","undefined","BABYLON","g","Function","eval","e","stackPanel_1","Checkbox","_isChecked","_checkSizeRatio","onIsCheckedChangedObservable","actualWidth","actualHeight","offsetWidth","offseHeight","isChecked","AddCheckBoxWithHeader","title","onValueChanged","panel","isVertical","checkbox","header","ColorPicker","_tmpColor","_pointerStartedOnSquare","_pointerStartedOnWheel","_squareLeft","_squareTop","_squareSize","_h","_s","_v","onValueChangedObservable","_pointerIsDown","equals","_RGBtoHSV","b","_updateSquareProps","squareSize","sqrt","_drawGradientSquare","hueValue","lgh","createLinearGradient","addColorStop","lgv","_drawCircle","_createColorWheelCanvas","canvas","image","getImageData","data","maxDistSq","innerRadius","minDistSq","distSq","dist","ang","atan2","_HSVtoRGB","alphaAmount","alphaRatio","putImageData","h","v","dm","hue","saturation","chroma","set","wheelThickness","_colorWheelCanvas","cx","cy","_updateValueFromPointer","_isPointOnSquare","_isPointOnWheel","radiusSq","innerRadiusSq","dx","dy","Ellipse","Grid","_rowDefinitions","_columnDefinitions","_cells","_childControls","addRowDefinition","addColumnDefinition","setRowDefinition","setColumnDefinition","_removeCell","cell","childIndex","_offsetCell","previousKey","_tag","removeColumnDefinition","removeRowDefinition","goodContainer","widths","heights","lefts","tops","globalWidthPercentage","availableHeight","globalHeightPercentage","_d","_e","_f","_g","parseInt","InputPassword","txt","Line","_lineWidth","_x1","_y1","_x2","_y2","_dash","_connectedControl","_connectedControlDirtyObserver","setLineDash","_effectiveX2","_effectiveY2","end","x2","y2","x1","y1","multiLinePoint_1","MultiLine","_points","getAt","items","arguments","map","item","point","first","forEach","_minX","_minY","_maxX","_maxY","_1","RadioButton","group","childRadio","AddRadioButtonWithHeader","radio","button_1","KeyPropertySet","VirtualKeyboard","onKeyPressObservable","defaultButtonWidth","defaultButtonHeight","defaultButtonPaddingLeft","defaultButtonPaddingRight","defaultButtonPaddingTop","defaultButtonPaddingBottom","defaultButtonColor","defaultButtonBackground","shiftButtonColor","selectedShiftThickness","shiftState","_createKey","propertySet","background","paddingRight","paddingTop","paddingBottom","addKeysRow","keys","propertySets","properties","applyShiftState","rowContainer","j","button_tblock","toUpperCase","toLowerCase","_connectedInputText","connect","input","_onFocusObserver","_onBlurObserver","_onKeyPressObserver","disconnect","CreateDefaultLayout","returnValue","Slider","_thumbWidth","_minimum","_maximum","_borderColor","_barOffset","_isThumbCircle","_isThumbClamped","_getThumbThickness","backgroundLength","thumbThickness","effectiveBarOffset","isThumbCircle","backgroundBoxLength","backgroundBoxThickness","effectiveThumbThickness","console","error","isThumbClamped","thumbPosition","rotation","DisplayGrid","_minorLineTickness","_minorLineColor","_majorLineTickness","_majorLineColor","_majorLineFrequency","_displayMajorLines","_displayMinorLines","cellCountX","cellCountY","top_1","cellX","cellY","options","isHorizontal","controlFirst","volumeBasedPanel_1","CylinderPanel","_radius","nodePosition","newPos","_cylindricalMapping","orientation","lookAt","Axis","Y","Space","LOCAL","yAngle","RotationYawPitchRollToRef","TransformNormal","button3D_1","fluentMaterial_1","HolographicButton","shareMaterials","_shareMaterials","_frontPlate","_rebuildContent","_imageUrl","_backMaterial","_frontMaterial","_plateMaterial","fontSize","_backPlate","_textPlate","_createBackMaterial","_pickedPointObserver","onPickedPointChangedObservable","a","_createFrontMaterial","_createPlateMaterial","_sharedMaterials","fShader","vShader","Effect","ShadersStore","MeshButton3D","_currentMesh","getChildMeshes","PlanePanel","addInPlace","ScatterPanel","_iteration","_scatterMapping","random","meshes","count","sort","distance1","lengthSquared","distance2","radiusPaddingSquared","pow","cellSize","difference2D","difference","combinedRadius","distance","normalize","subtractInPlace","SpherePanel","_sphericalMapping","xAngle","StackPanel3D","extendSizes","DataSeries","getFilteredData","filters","filteredData","element","isValid","filter","filterValue","getDimensionValues","entry","CreateFakeData","series","label","dimensions","Year","Country","CreateFakeSpatialData","latitude","longitude","_2D_1","materials_1","Chart","LastCreatedScene","_labelMeshes","_blockRefresh","_elementWidth","_displayLabels","onRefreshObservable","onElementCreatedObservable","onElementEnterObservable","onElementOutObservable","_rootNode","_scene","_lastElementOver","_onElementEnterObserver","_activeBar","_hoverLabel","_addLabel","updateHoverLabel","_onElementOutObserver","_removeLabel","glowHover","refresh","_dataSource","_dataFilters","_defaultMaterial","_labelDimension","_glowLayer","GlowLayer","customEmissiveColorSelector","chartColor","_createDefaultMaterial","includeBackground","labelCreationFunction","labelMesh","plane","Mesh","CreatePlane","billboardMode","BILLBOARDMODE_ALL","adt","rectangle","_removeLabels","_clean","getDescendants","BarGraph","_maxBarHeight","_displayBackground","_backgroundResolution","_backgroundTickCount","_createBarMesh","box","setPivotMatrix","Translation","MIN_VALUE","createMesh","_barMeshes","_backgroundMesh","_backgroundADT","displayGrid","displayMajorLines","minorLineColor","minorLineTickness","tickIndex","ticklabel","maxBarHeight","barMesh","currentScalingYState","easing","CircleEase","Animation","CreateAndStartAnimation","labelDimension","displayLabels","MapGraph","mapUrl","_maxCylinderHeight","_worldMapSize","_cylinderTesselation","_xOffset","_yOffset","meshLabel","worldMapUrl","_mercatorMaterial","_worldMapPickedPointObserver","albedoTexture","LINEAR_LINEAR_MIPLINEAR","_createCylinderMesh","cylinder","CreateCylinder","_cylinderMeshes","worldMaptextureSize","worldMapWidth","worldMapHeight","_worldMap","CreateGround","cylinderMesh","latRad","mercN","log","tan","GUI3DManager","_sceneDisposeObserver","onDisposeObservable","_utilityLayer","UtilityLayerRenderer","onlyCheckPointerDownEvents","mainSceneTrackerPredicate","_pointerOutObserver","_handlePointerOut","autoClear","autoClearDepthAndStencil","HemisphericLight","Up","isPointerUp","pickingInfo","pointerType","materialName"],"mappings":"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","file":"babylon.gui.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"babylonjs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"babylonjs-gui\", [\"babylonjs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"babylonjs-gui\"] = factory(require(\"babylonjs\"));\n\telse\n\t\troot[\"BABYLON\"] = root[\"BABYLON\"] || {}, root[\"BABYLON\"][\"GUI\"] = factory(root[\"BABYLON\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import { Container } from \"./container\";\r\nimport { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Nullable, Observer, Vector2, AbstractMesh, Observable, Vector3, Scene, Tools, Matrix, PointerEventTypes } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\nimport { Style } from \"../style\";\r\nimport { Matrix2D, Vector2WithInfo } from \"../math2D\";\r\n\r\n/**\r\n * Root class used for all 2D controls\r\n * @see http://doc.babylonjs.com/how_to/gui#controls\r\n */\r\nexport class Control {\r\n    private _alpha = 1;\r\n    private _alphaSet = false;\r\n    private _zIndex = 0;\r\n    /** @hidden */\r\n    public _root: Nullable<Container>;\r\n    /** @hidden */\r\n    public _host: AdvancedDynamicTexture;\r\n    /** Gets or sets the control parent */\r\n    public parent: Nullable<Container>;\r\n    /** @hidden */\r\n    public _currentMeasure = Measure.Empty();\r\n    private _fontFamily = \"Arial\";\r\n    private _fontStyle = \"\";\r\n    private _fontWeight = \"\";\r\n    private _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _font: string;\r\n    /** @hidden */\r\n    public _width = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    /** @hidden */\r\n    public _height = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    /** @hidden */\r\n    protected _fontOffset: { ascent: number, height: number, descent: number };\r\n    private _color = \"\";\r\n    private _style: Nullable<Style> = null;\r\n    private _styleObserver: Nullable<Observer<Style>>;\r\n    /** @hidden */\r\n    protected _horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    /** @hidden */\r\n    protected _verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n    private _isDirty = true;\r\n    /** @hidden */\r\n    public _tempParentMeasure = Measure.Empty();\r\n    /** @hidden */\r\n    protected _cachedParentMeasure = Measure.Empty();\r\n    private _paddingLeft = new ValueAndUnit(0);\r\n    private _paddingRight = new ValueAndUnit(0);\r\n    private _paddingTop = new ValueAndUnit(0);\r\n    private _paddingBottom = new ValueAndUnit(0);\r\n    /** @hidden */\r\n    public _left = new ValueAndUnit(0);\r\n    /** @hidden */\r\n    public _top = new ValueAndUnit(0);\r\n    private _scaleX = 1.0;\r\n    private _scaleY = 1.0;\r\n    private _rotation = 0;\r\n    private _transformCenterX = 0.5;\r\n    private _transformCenterY = 0.5;\r\n    private _transformMatrix = Matrix2D.Identity();\r\n    /** @hidden */\r\n    protected _invertTransformMatrix = Matrix2D.Identity();\r\n    /** @hidden */\r\n    protected _transformedPosition = Vector2.Zero();\r\n    private _onlyMeasureMode = false;\r\n    private _isMatrixDirty = true;\r\n    private _cachedOffsetX: number;\r\n    private _cachedOffsetY: number;\r\n    private _isVisible = true;\r\n    /** @hidden */\r\n    public _linkedMesh: Nullable<AbstractMesh>;\r\n    private _fontSet = false;\r\n    private _dummyVector2 = Vector2.Zero();\r\n    private _downCount = 0;\r\n    private _enterCount = -1;\r\n    private _doNotRender = false;\r\n    private _downPointerIds: { [id: number]: boolean } = {};\r\n\r\n    /** @hidden */\r\n    public _tag: any;\r\n\r\n    /** Gets or sets a boolean indicating if the control can be hit with pointer events */\r\n    public isHitTestVisible = true;\r\n    /** Gets or sets a boolean indicating if the control can block pointer events */\r\n    public isPointerBlocker = false;\r\n    /** Gets or sets a boolean indicating if the control can be focusable */\r\n    public isFocusInvisible = false;\r\n\r\n    /** Gets or sets a value indicating the offset to apply on X axis to render the shadow */\r\n    public shadowOffsetX = 0;\r\n    /** Gets or sets a value indicating the offset to apply on Y axis to render the shadow */\r\n    public shadowOffsetY = 0;\r\n    /** Gets or sets a value indicating the amount of blur to use to render the shadow */\r\n    public shadowBlur = 0;\r\n    /** Gets or sets a value indicating the color of the shadow (black by default ie. \"#000\") */\r\n    public shadowColor = '#000';\r\n\r\n    /** Gets or sets the cursor to use when the control is hovered */\r\n    public hoverCursor = \"\";\r\n\r\n    /** @hidden */\r\n    protected _linkOffsetX = new ValueAndUnit(0);\r\n    /** @hidden */\r\n    protected _linkOffsetY = new ValueAndUnit(0);\r\n\r\n    // Properties\r\n\r\n    /** Gets the control type name */\r\n    public get typeName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    /**\r\n    * An event triggered when the pointer move over the control.\r\n    */\r\n    public onPointerMoveObservable = new Observable<Vector2>();\r\n\r\n    /**\r\n    * An event triggered when the pointer move out of the control.\r\n    */\r\n    public onPointerOutObservable = new Observable<Control>();\r\n\r\n    /**\r\n    * An event triggered when the pointer taps the control\r\n    */\r\n    public onPointerDownObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n    * An event triggered when pointer up\r\n    */\r\n    public onPointerUpObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n    * An event triggered when a control is clicked on\r\n    */\r\n    public onPointerClickObservable = new Observable<Vector2WithInfo>();\r\n\r\n    /**\r\n    * An event triggered when pointer enters the control\r\n    */\r\n    public onPointerEnterObservable = new Observable<Control>();\r\n\r\n    /**\r\n    * An event triggered when the control is marked as dirty\r\n    */\r\n    public onDirtyObservable = new Observable<Control>();\r\n\r\n    /**\r\n   * An event triggered after the control is drawn\r\n   */\r\n    public onAfterDrawObservable = new Observable<Control>();\r\n\r\n    /** Gets or set information about font offsets (used to render and align text) */\r\n    public get fontOffset(): { ascent: number, height: number, descent: number } {\r\n        return this._fontOffset;\r\n    }\r\n\r\n    public set fontOffset(offset: { ascent: number, height: number, descent: number }) {\r\n        this._fontOffset = offset;\r\n    }\r\n\r\n    /** Gets or sets alpha value for the control (1 means opaque and 0 means entirely transparent) */\r\n    public get alpha(): number {\r\n        return this._alpha;\r\n    }\r\n\r\n    public set alpha(value: number) {\r\n        if (this._alpha === value) {\r\n            return;\r\n        }\r\n        this._alphaSet = true;\r\n        this._alpha = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating the scale factor on X axis (1 by default) \r\n     * @see http://doc.babylonjs.com/how_to/gui#rotation-and-scaling\r\n    */\r\n    public get scaleX(): number {\r\n        return this._scaleX;\r\n    }\r\n\r\n    public set scaleX(value: number) {\r\n        if (this._scaleX === value) {\r\n            return;\r\n        }\r\n\r\n        this._scaleX = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating the scale factor on Y axis (1 by default) \r\n     * @see http://doc.babylonjs.com/how_to/gui#rotation-and-scaling\r\n    */\r\n    public get scaleY(): number {\r\n        return this._scaleY;\r\n    }\r\n\r\n    public set scaleY(value: number) {\r\n        if (this._scaleY === value) {\r\n            return;\r\n        }\r\n\r\n        this._scaleY = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the rotation angle (0 by default) \r\n     * @see http://doc.babylonjs.com/how_to/gui#rotation-and-scaling\r\n    */\r\n    public get rotation(): number {\r\n        return this._rotation;\r\n    }\r\n\r\n    public set rotation(value: number) {\r\n        if (this._rotation === value) {\r\n            return;\r\n        }\r\n\r\n        this._rotation = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the transformation center on Y axis (0 by default)\r\n     * @see http://doc.babylonjs.com/how_to/gui#rotation-and-scaling\r\n    */\r\n    public get transformCenterY(): number {\r\n        return this._transformCenterY;\r\n    }\r\n\r\n    public set transformCenterY(value: number) {\r\n        if (this._transformCenterY === value) {\r\n            return;\r\n        }\r\n\r\n        this._transformCenterY = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the transformation center on X axis (0 by default)\r\n     * @see http://doc.babylonjs.com/how_to/gui#rotation-and-scaling\r\n    */\r\n    public get transformCenterX(): number {\r\n        return this._transformCenterX;\r\n    }\r\n\r\n    public set transformCenterX(value: number) {\r\n        if (this._transformCenterX === value) {\r\n            return;\r\n        }\r\n\r\n        this._transformCenterX = value;\r\n        this._markAsDirty();\r\n        this._markMatrixAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets the horizontal alignment \r\n     * @see http://doc.babylonjs.com/how_to/gui#alignments\r\n     */\r\n    public get horizontalAlignment(): number {\r\n        return this._horizontalAlignment;\r\n    }\r\n\r\n    public set horizontalAlignment(value: number) {\r\n        if (this._horizontalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._horizontalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets the vertical alignment \r\n     * @see http://doc.babylonjs.com/how_to/gui#alignments\r\n     */\r\n    public get verticalAlignment(): number {\r\n        return this._verticalAlignment;\r\n    }\r\n\r\n    public set verticalAlignment(value: number) {\r\n        if (this._verticalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._verticalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets control width \r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    /** \r\n     * Gets control width in pixel\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get widthInPixels(): number {\r\n        return this._width.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set width(value: string | number) {\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Gets or sets control height \r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    /** \r\n     * Gets control height in pixel\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get heightInPixels(): number {\r\n        return this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set height(value: string | number) {\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or set font family */\r\n    public get fontFamily(): string {\r\n        return this._fontFamily;\r\n    }\r\n\r\n    public set fontFamily(value: string) {\r\n        if (this._fontFamily === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontFamily = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** Gets or sets font style */\r\n    public get fontStyle(): string {\r\n        return this._fontStyle;\r\n    }\r\n\r\n    public set fontStyle(value: string) {\r\n        if (this._fontStyle === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontStyle = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** Gets or sets font weight */\r\n    public get fontWeight(): string {\r\n        return this._fontWeight;\r\n    }\r\n\r\n    public set fontWeight(value: string) {\r\n        if (this._fontWeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontWeight = value;\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets style\r\n     * @see http://doc.babylonjs.com/how_to/gui#styles\r\n     */\r\n    public get style(): Nullable<Style> {\r\n        return this._style;\r\n    }\r\n\r\n    public set style(value: Nullable<Style>) {\r\n        if (this._style) {\r\n            this._style.onChangedObservable.remove(this._styleObserver);\r\n            this._styleObserver = null;\r\n        }\r\n\r\n        this._style = value;\r\n\r\n        if (this._style) {\r\n            this._styleObserver = this._style.onChangedObservable.add(() => {\r\n                this._markAsDirty();\r\n                this._resetFontCache();\r\n            });\r\n        }\r\n\r\n        this._markAsDirty();\r\n        this._resetFontCache();\r\n    }\r\n\r\n    /** @hidden */\r\n    public get _isFontSizeInPercentage(): boolean {\r\n        return this._fontSize.isPercentage;\r\n    }\r\n\r\n    /** Gets font size in pixels */\r\n    public get fontSizeInPixels(): number {\r\n        let fontSizeToUse = this._style ? this._style._fontSize : this._fontSize;\r\n\r\n        if (fontSizeToUse.isPixel) {\r\n            return fontSizeToUse.getValue(this._host);\r\n        }\r\n\r\n        return fontSizeToUse.getValueInPixel(this._host, this._tempParentMeasure.height || this._cachedParentMeasure.height);\r\n    }\r\n\r\n    /** Gets or sets font size */\r\n    public get fontSize(): string | number {\r\n        return this._fontSize.toString(this._host);\r\n    }\r\n\r\n    public set fontSize(value: string | number) {\r\n        if (this._fontSize.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._fontSize.fromString(value)) {\r\n            this._markAsDirty();\r\n            this._resetFontCache();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets foreground color */\r\n    public get color(): string {\r\n        return this._color;\r\n    }\r\n\r\n    public set color(value: string) {\r\n        if (this._color === value) {\r\n            return;\r\n        }\r\n\r\n        this._color = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets z index which is used to reorder controls on the z axis */\r\n    public get zIndex(): number {\r\n        return this._zIndex;\r\n    }\r\n\r\n    public set zIndex(value: number) {\r\n        if (this.zIndex === value) {\r\n            return;\r\n        }\r\n\r\n        this._zIndex = value;\r\n\r\n        if (this._root) {\r\n            this._root._reOrderControl(this);\r\n        }\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control can be rendered */\r\n    public get notRenderable(): boolean {\r\n        return this._doNotRender;\r\n    }\r\n\r\n    public set notRenderable(value: boolean) {\r\n        if (this._doNotRender === value) {\r\n            return;\r\n        }\r\n\r\n        this._doNotRender = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control is visible */\r\n    public get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets a boolean indicating that the control needs to update its rendering */\r\n    public get isDirty(): boolean {\r\n        return this._isDirty;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the left of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingLeft(): string | number {\r\n        return this._paddingLeft.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the padding in pixels to use on the left of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingLeftInPixels(): number {\r\n        return this._paddingLeft.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set paddingLeft(value: string | number) {\r\n        if (this._paddingLeft.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the right of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingRight(): string | number {\r\n        return this._paddingRight.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the padding in pixels to use on the right of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingRightInPixels(): number {\r\n        return this._paddingRight.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set paddingRight(value: string | number) {\r\n        if (this._paddingRight.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the top of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingTop(): string | number {\r\n        return this._paddingTop.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the padding in pixels to use on the top of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingTopInPixels(): number {\r\n        return this._paddingTop.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set paddingTop(value: string | number) {\r\n        if (this._paddingTop.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the padding to use on the bottom of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingBottom(): string | number {\r\n        return this._paddingBottom.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the padding in pixels to use on the bottom of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get paddingBottomInPixels(): number {\r\n        return this._paddingBottom.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set paddingBottom(value: string | number) {\r\n        if (this._paddingBottom.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the left coordinate of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get left(): string | number {\r\n        return this._left.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the left coordinate in pixels of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get leftInPixels(): number {\r\n        return this._left.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set left(value: string | number) {\r\n        if (this._left.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the top coordinate of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get top(): string | number {\r\n        return this._top.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the top coordinate in pixels of the control\r\n     * @see http://doc.babylonjs.com/how_to/gui#position-and-size\r\n     */\r\n    public get topInPixels(): number {\r\n        return this._top.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set top(value: string | number) {\r\n        if (this._top.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset on X axis to the linked mesh\r\n     * @see http://doc.babylonjs.com/how_to/gui#tracking-positions\r\n     */\r\n    public get linkOffsetX(): string | number {\r\n        return this._linkOffsetX.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the offset in pixels on X axis to the linked mesh\r\n     * @see http://doc.babylonjs.com/how_to/gui#tracking-positions\r\n     */\r\n    public get linkOffsetXInPixels(): number {\r\n        return this._linkOffsetX.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set linkOffsetX(value: string | number) {\r\n        if (this._linkOffsetX.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a value indicating the offset on Y axis to the linked mesh\r\n     * @see http://doc.babylonjs.com/how_to/gui#tracking-positions\r\n     */\r\n    public get linkOffsetY(): string | number {\r\n        return this._linkOffsetY.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating the offset in pixels on Y axis to the linked mesh\r\n     * @see http://doc.babylonjs.com/how_to/gui#tracking-positions\r\n     */\r\n    public get linkOffsetYInPixels(): number {\r\n        return this._linkOffsetY.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n    }\r\n\r\n    public set linkOffsetY(value: string | number) {\r\n        if (this._linkOffsetY.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets the center coordinate on X axis */\r\n    public get centerX(): number {\r\n        return this._currentMeasure.left + this._currentMeasure.width / 2;\r\n    }\r\n\r\n    /** Gets the center coordinate on Y axis */\r\n    public get centerY(): number {\r\n        return this._currentMeasure.top + this._currentMeasure.height / 2;\r\n    }\r\n\r\n    // Functions\r\n\r\n    /**\r\n     * Creates a new control\r\n     * @param name defines the name of the control\r\n     */\r\n    constructor(\r\n        /** defines the name of the control */\r\n        public name?: string) {\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _getTypeName(): string {\r\n        return \"Control\";\r\n    }\r\n\r\n    /** @hidden */\r\n    public _resetFontCache(): void {\r\n        this._fontSet = true;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets coordinates in local control space \r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @returns the new coordinates in local space\r\n     */\r\n    public getLocalCoordinates(globalCoordinates: Vector2): Vector2 {\r\n        var result = Vector2.Zero();\r\n\r\n        this.getLocalCoordinatesToRef(globalCoordinates, result);\r\n\r\n        return result;\r\n    }\r\n\r\n    /** \r\n     * Gets coordinates in local control space \r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @param result defines the target vector2 where to store the result\r\n     * @returns the current control\r\n     */\r\n    public getLocalCoordinatesToRef(globalCoordinates: Vector2, result: Vector2): Control {\r\n        result.x = globalCoordinates.x - this._currentMeasure.left;\r\n        result.y = globalCoordinates.y - this._currentMeasure.top;\r\n        return this;\r\n    }\r\n\r\n    /** \r\n     * Gets coordinates in parent local control space \r\n     * @param globalCoordinates defines the coordinates to transform\r\n     * @returns the new coordinates in parent local space\r\n     */\r\n    public getParentLocalCoordinates(globalCoordinates: Vector2): Vector2 {\r\n        var result = Vector2.Zero();\r\n\r\n        result.x = globalCoordinates.x - this._cachedParentMeasure.left;\r\n        result.y = globalCoordinates.y - this._cachedParentMeasure.top;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Move the current control to a vector3 position projected onto the screen.\r\n     * @param position defines the target position\r\n     * @param scene defines the hosting scene\r\n     */\r\n    public moveToVector3(position: Vector3, scene: Scene): void {\r\n        if (!this._host || this._root !== this._host._rootContainer) {\r\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\r\n            return;\r\n        }\r\n\r\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        var globalViewport = this._host._getGlobalViewport(scene);\r\n        var projectedPosition = Vector3.Project(position, Matrix.Identity(), scene.getTransformMatrix(), globalViewport);\r\n\r\n        this._moveToProjectedPosition(projectedPosition);\r\n\r\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n            this.notRenderable = true;\r\n            return;\r\n        }\r\n        this.notRenderable = false;\r\n    }\r\n\r\n    /**\r\n     * Link current control with a target mesh\r\n     * @param mesh defines the mesh to link with\r\n     * @see http://doc.babylonjs.com/how_to/gui#tracking-positions\r\n     */\r\n    public linkWithMesh(mesh: Nullable<AbstractMesh>): void {\r\n        if (!this._host || this._root && this._root !== this._host._rootContainer) {\r\n            if (mesh) {\r\n                Tools.Error(\"Cannot link a control to a mesh if the control is not at root level\");\r\n            }\r\n            return;\r\n        }\r\n\r\n        var index = this._host._linkedControls.indexOf(this);\r\n        if (index !== -1) {\r\n            this._linkedMesh = mesh;\r\n            if (!mesh) {\r\n                this._host._linkedControls.splice(index, 1);\r\n            }\r\n            return;\r\n        } else if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._linkedMesh = mesh;\r\n        this._onlyMeasureMode = this._currentMeasure.width === 0 || this._currentMeasure.height === 0;\r\n        this._host._linkedControls.push(this);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _moveToProjectedPosition(projectedPosition: Vector3): void {\r\n        let oldLeft = this._left.getValue(this._host);\r\n        let oldTop = this._top.getValue(this._host);\r\n\r\n        var newLeft = ((projectedPosition.x + this._linkOffsetX.getValue(this._host)) - this._currentMeasure.width / 2);\r\n        var newTop = ((projectedPosition.y + this._linkOffsetY.getValue(this._host)) - this._currentMeasure.height / 2);\r\n\r\n        if (this._left.ignoreAdaptiveScaling && this._top.ignoreAdaptiveScaling) {\r\n            if (Math.abs(newLeft - oldLeft) < 0.5) {\r\n                newLeft = oldLeft;\r\n            }\r\n\r\n            if (Math.abs(newTop - oldTop) < 0.5) {\r\n                newTop = oldTop;\r\n            }\r\n        }\r\n\r\n        this.left = newLeft + \"px\";\r\n        this.top = newTop + \"px\";\r\n\r\n        this._left.ignoreAdaptiveScaling = true;\r\n        this._top.ignoreAdaptiveScaling = true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markMatrixAsDirty(): void {\r\n        this._isMatrixDirty = true;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markAsDirty(): void {\r\n        this._isDirty = true;\r\n\r\n        if (!this._host) {\r\n            return; // Not yet connected\r\n        }\r\n        this._host.markAsDirty();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markAllAsDirty(): void {\r\n        this._markAsDirty();\r\n\r\n        if (this._font) {\r\n            this._prepareFont();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _link(root: Nullable<Container>, host: AdvancedDynamicTexture): void {\r\n        this._root = root;\r\n        this._host = host;\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _transform(context: CanvasRenderingContext2D): void {\r\n        if (!this._isMatrixDirty && this._scaleX === 1 && this._scaleY === 1 && this._rotation === 0) {\r\n            return;\r\n        }\r\n\r\n        // postTranslate\r\n        var offsetX = this._currentMeasure.width * this._transformCenterX + this._currentMeasure.left;\r\n        var offsetY = this._currentMeasure.height * this._transformCenterY + this._currentMeasure.top;\r\n        context.translate(offsetX, offsetY);\r\n\r\n        // rotate\r\n        context.rotate(this._rotation);\r\n\r\n        // scale\r\n        context.scale(this._scaleX, this._scaleY);\r\n\r\n        // preTranslate\r\n        context.translate(-offsetX, -offsetY);\r\n\r\n        // Need to update matrices?\r\n        if (this._isMatrixDirty || this._cachedOffsetX !== offsetX || this._cachedOffsetY !== offsetY) {\r\n            this._cachedOffsetX = offsetX;\r\n            this._cachedOffsetY = offsetY;\r\n            this._isMatrixDirty = false;\r\n\r\n            Matrix2D.ComposeToRef(-offsetX, -offsetY, this._rotation, this._scaleX, this._scaleY, this._root ? this._root._transformMatrix : null, this._transformMatrix);\r\n\r\n            this._transformMatrix.invertToRef(this._invertTransformMatrix);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _applyStates(context: CanvasRenderingContext2D): void {\r\n        if (this._fontSet) {\r\n            this._prepareFont();\r\n            this._fontSet = false;\r\n        }\r\n\r\n        if (this._font) {\r\n            context.font = this._font;\r\n        }\r\n\r\n        if (this._color) {\r\n            context.fillStyle = this._color;\r\n        }\r\n\r\n        if (this._alphaSet) {\r\n            context.globalAlpha = this.parent ? this.parent.alpha * this._alpha : this._alpha;\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _processMeasures(parentMeasure: Measure, context: CanvasRenderingContext2D): boolean {\r\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\r\n            this._isDirty = false;\r\n            this._currentMeasure.copyFrom(parentMeasure);\r\n\r\n            // Let children take some pre-measurement actions\r\n            this._preMeasure(parentMeasure, context);\r\n\r\n            this._measure();\r\n            this._computeAlignment(parentMeasure, context);\r\n\r\n            // Convert to int values\r\n            this._currentMeasure.left = this._currentMeasure.left | 0;\r\n            this._currentMeasure.top = this._currentMeasure.top | 0;\r\n            this._currentMeasure.width = this._currentMeasure.width | 0;\r\n            this._currentMeasure.height = this._currentMeasure.height | 0;\r\n\r\n            // Let children add more features\r\n            this._additionalProcessing(parentMeasure, context);\r\n\r\n            this._cachedParentMeasure.copyFrom(parentMeasure);\r\n\r\n            if (this.onDirtyObservable.hasObservers()) {\r\n                this.onDirtyObservable.notifyObservers(this);\r\n            }\r\n        }\r\n\r\n        if (this._currentMeasure.left > parentMeasure.left + parentMeasure.width) {\r\n            return false;\r\n        }\r\n\r\n        if (this._currentMeasure.left + this._currentMeasure.width < parentMeasure.left) {\r\n            return false;\r\n        }\r\n\r\n        if (this._currentMeasure.top > parentMeasure.top + parentMeasure.height) {\r\n            return false;\r\n        }\r\n\r\n        if (this._currentMeasure.top + this._currentMeasure.height < parentMeasure.top) {\r\n            return false;\r\n        }\r\n\r\n        // Transform\r\n        this._transform(context);\r\n\r\n        if (this._onlyMeasureMode) {\r\n            this._onlyMeasureMode = false;\r\n            return false; // We do not want rendering for this frame as they are measure dependant information that need to be gathered\r\n        }\r\n\r\n        // Clip\r\n        this._clip(context);\r\n        context.clip();\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _clip(context: CanvasRenderingContext2D) {\r\n        context.beginPath();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            var shadowOffsetX = this.shadowOffsetX;\r\n            var shadowOffsetY = this.shadowOffsetY;\r\n            var shadowBlur = this.shadowBlur;\r\n\r\n            var leftShadowOffset = Math.min(Math.min(shadowOffsetX, 0) - shadowBlur * 2, 0);\r\n            var rightShadowOffset = Math.max(Math.max(shadowOffsetX, 0) + shadowBlur * 2, 0);\r\n            var topShadowOffset = Math.min(Math.min(shadowOffsetY, 0) - shadowBlur * 2, 0);\r\n            var bottomShadowOffset = Math.max(Math.max(shadowOffsetY, 0) + shadowBlur * 2, 0);\r\n\r\n            context.rect(this._currentMeasure.left + leftShadowOffset,\r\n                this._currentMeasure.top + topShadowOffset,\r\n                this._currentMeasure.width + rightShadowOffset - leftShadowOffset,\r\n                this._currentMeasure.height + bottomShadowOffset - topShadowOffset);\r\n        } else {\r\n            context.rect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _measure(): void {\r\n        // Width / Height\r\n        if (this._width.isPixel) {\r\n            this._currentMeasure.width = this._width.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.width *= this._width.getValue(this._host);\r\n        }\r\n\r\n        if (this._height.isPixel) {\r\n            this._currentMeasure.height = this._height.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.height *= this._height.getValue(this._host);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        var width = this._currentMeasure.width;\r\n        var height = this._currentMeasure.height;\r\n\r\n        var parentWidth = parentMeasure.width;\r\n        var parentHeight = parentMeasure.height;\r\n\r\n        // Left / top\r\n        var x = 0;\r\n        var y = 0;\r\n\r\n        switch (this.horizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x = 0\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x = parentWidth - width;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x = (parentWidth - width) / 2;\r\n                break;\r\n        }\r\n\r\n        switch (this.verticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                y = 0;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                y = parentHeight - height;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                y = (parentHeight - height) / 2;\r\n                break;\r\n        }\r\n\r\n        if (this._paddingLeft.isPixel) {\r\n            this._currentMeasure.left += this._paddingLeft.getValue(this._host);\r\n            this._currentMeasure.width -= this._paddingLeft.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.left += parentWidth * this._paddingLeft.getValue(this._host);\r\n            this._currentMeasure.width -= parentWidth * this._paddingLeft.getValue(this._host);\r\n        }\r\n\r\n        if (this._paddingRight.isPixel) {\r\n            this._currentMeasure.width -= this._paddingRight.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.width -= parentWidth * this._paddingRight.getValue(this._host);\r\n        }\r\n\r\n        if (this._paddingTop.isPixel) {\r\n            this._currentMeasure.top += this._paddingTop.getValue(this._host);\r\n            this._currentMeasure.height -= this._paddingTop.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.top += parentHeight * this._paddingTop.getValue(this._host);\r\n            this._currentMeasure.height -= parentHeight * this._paddingTop.getValue(this._host);\r\n        }\r\n\r\n        if (this._paddingBottom.isPixel) {\r\n            this._currentMeasure.height -= this._paddingBottom.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.height -= parentHeight * this._paddingBottom.getValue(this._host);\r\n        }\r\n\r\n        if (this._left.isPixel) {\r\n            this._currentMeasure.left += this._left.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.left += parentWidth * this._left.getValue(this._host);\r\n        }\r\n\r\n        if (this._top.isPixel) {\r\n            this._currentMeasure.top += this._top.getValue(this._host);\r\n        } else {\r\n            this._currentMeasure.top += parentHeight * this._top.getValue(this._host);\r\n        }\r\n\r\n        this._currentMeasure.left += x;\r\n        this._currentMeasure.top += y;\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _preMeasure(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        // Do nothing\r\n    }\r\n\r\n    /**\r\n     * Tests if a given coordinates belong to the current control\r\n     * @param x defines x coordinate to test\r\n     * @param y defines y coordinate to test\r\n     * @returns true if the coordinates are inside the control\r\n     */\r\n    public contains(x: number, y: number): boolean {\r\n        // Invert transform\r\n        this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n\r\n        x = this._transformedPosition.x;\r\n        y = this._transformedPosition.y;\r\n\r\n        // Check\r\n        if (x < this._currentMeasure.left) {\r\n            return false;\r\n        }\r\n\r\n        if (x > this._currentMeasure.left + this._currentMeasure.width) {\r\n            return false;\r\n        }\r\n\r\n        if (y < this._currentMeasure.top) {\r\n            return false;\r\n        }\r\n\r\n        if (y > this._currentMeasure.top + this._currentMeasure.height) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isPointerBlocker) {\r\n            this._host._shouldBlockPointer = true;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processPicking(x: number, y: number, type: number, pointerId: number, buttonIndex: number): boolean {\r\n        if (!this.isHitTestVisible || !this.isVisible || this._doNotRender) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        this._processObservables(type, x, y, pointerId, buttonIndex);\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerMove(target: Control, coordinates: Vector2): void {\r\n        var canNotify: boolean = this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this);\r\n\r\n        if (canNotify && this.parent != null) this.parent._onPointerMove(target, coordinates);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerEnter(target: Control): boolean {\r\n        if (this._enterCount > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (this._enterCount === -1) { // -1 is for touch input, we are now sure we are with a mouse or pencil\r\n            this._enterCount = 0;\r\n        }\r\n        this._enterCount++;\r\n\r\n        var canNotify: boolean = this.onPointerEnterObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (canNotify && this.parent != null) this.parent._onPointerEnter(target);\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerOut(target: Control): void {\r\n        this._enterCount = 0;\r\n\r\n        var canNotify: boolean = this.onPointerOutObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (canNotify && this.parent != null) this.parent._onPointerOut(target);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (this._downCount !== 0) {\r\n            return false;\r\n        }\r\n\r\n        this._downCount++;\r\n\r\n        this._downPointerIds[pointerId] = true;\r\n\r\n        var canNotify: boolean = this.onPointerDownObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (canNotify && this.parent != null) this.parent._onPointerDown(target, coordinates, pointerId, buttonIndex);\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._downCount = 0;\r\n\r\n        delete this._downPointerIds[pointerId];\r\n\r\n        var canNotifyClick: boolean = notifyClick;\r\n        if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\r\n            canNotifyClick = this.onPointerClickObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this);\r\n        }\r\n        var canNotify: boolean = this.onPointerUpObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (canNotify && this.parent != null) this.parent._onPointerUp(target, coordinates, pointerId, buttonIndex, canNotifyClick);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _forcePointerUp(pointerId: Nullable<number> = null) {\r\n        if (pointerId !== null) {\r\n            this._onPointerUp(this, Vector2.Zero(), pointerId, 0, true);\r\n        } else {\r\n            for (var key in this._downPointerIds) {\r\n                this._onPointerUp(this, Vector2.Zero(), +key as number, 0, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processObservables(type: number, x: number, y: number, pointerId: number, buttonIndex: number): boolean {\r\n        this._dummyVector2.copyFromFloats(x, y);\r\n        if (type === PointerEventTypes.POINTERMOVE) {\r\n            this._onPointerMove(this, this._dummyVector2);\r\n\r\n            var previousControlOver = this._host._lastControlOver[pointerId];\r\n            if (previousControlOver && previousControlOver !== this) {\r\n                previousControlOver._onPointerOut(this);\r\n            }\r\n\r\n            if (previousControlOver !== this) {\r\n                this._onPointerEnter(this);\r\n            }\r\n\r\n            this._host._lastControlOver[pointerId] = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERDOWN) {\r\n            this._onPointerDown(this, this._dummyVector2, pointerId, buttonIndex);\r\n            this._host._lastControlDown[pointerId] = this;\r\n            this._host._lastPickedControl = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERUP) {\r\n            if (this._host._lastControlDown[pointerId]) {\r\n                this._host._lastControlDown[pointerId]._onPointerUp(this, this._dummyVector2, pointerId, buttonIndex, true);\r\n            }\r\n            delete this._host._lastControlDown[pointerId];\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _prepareFont() {\r\n        if (!this._font && !this._fontSet) {\r\n            return;\r\n        }\r\n\r\n        if (this._style) {\r\n            this._font = this._style.fontStyle + \" \" + this._style.fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._style.fontFamily;\r\n        } else {\r\n            this._font = this._fontStyle + \" \" + this._fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._fontFamily;\r\n        }\r\n\r\n        this._fontOffset = Control._GetFontOffset(this._font);\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        this.onDirtyObservable.clear();\r\n        this.onAfterDrawObservable.clear();\r\n        this.onPointerDownObservable.clear();\r\n        this.onPointerEnterObservable.clear();\r\n        this.onPointerMoveObservable.clear();\r\n        this.onPointerOutObservable.clear();\r\n        this.onPointerUpObservable.clear();\r\n        this.onPointerClickObservable.clear();\r\n\r\n        if (this._styleObserver && this._style) {\r\n            this._style.onChangedObservable.remove(this._styleObserver);\r\n            this._styleObserver = null;\r\n        }\r\n\r\n        if (this._root) {\r\n            this._root.removeControl(this);\r\n            this._root = null;\r\n        }\r\n\r\n        var index = this._host._linkedControls.indexOf(this);\r\n        if (index > -1) {\r\n            this.linkWithMesh(null);\r\n        }\r\n    }\r\n\r\n    // Statics\r\n    private static _HORIZONTAL_ALIGNMENT_LEFT = 0;\r\n    private static _HORIZONTAL_ALIGNMENT_RIGHT = 1;\r\n    private static _HORIZONTAL_ALIGNMENT_CENTER = 2;\r\n\r\n    private static _VERTICAL_ALIGNMENT_TOP = 0;\r\n    private static _VERTICAL_ALIGNMENT_BOTTOM = 1;\r\n    private static _VERTICAL_ALIGNMENT_CENTER = 2;\r\n\r\n    /** HORIZONTAL_ALIGNMENT_LEFT */\r\n    public static get HORIZONTAL_ALIGNMENT_LEFT(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_LEFT;\r\n    }\r\n\r\n    /** HORIZONTAL_ALIGNMENT_RIGHT */\r\n    public static get HORIZONTAL_ALIGNMENT_RIGHT(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_RIGHT;\r\n    }\r\n\r\n    /** HORIZONTAL_ALIGNMENT_CENTER */\r\n    public static get HORIZONTAL_ALIGNMENT_CENTER(): number {\r\n        return Control._HORIZONTAL_ALIGNMENT_CENTER;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_TOP */\r\n    public static get VERTICAL_ALIGNMENT_TOP(): number {\r\n        return Control._VERTICAL_ALIGNMENT_TOP;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_BOTTOM */\r\n    public static get VERTICAL_ALIGNMENT_BOTTOM(): number {\r\n        return Control._VERTICAL_ALIGNMENT_BOTTOM;\r\n    }\r\n\r\n    /** VERTICAL_ALIGNMENT_CENTER */\r\n    public static get VERTICAL_ALIGNMENT_CENTER(): number {\r\n        return Control._VERTICAL_ALIGNMENT_CENTER;\r\n    }\r\n\r\n    private static _FontHeightSizes: { [key: string]: { ascent: number, height: number, descent: number } } = {};\r\n\r\n    /** @hidden */\r\n    public static _GetFontOffset(font: string): { ascent: number, height: number, descent: number } {\r\n\r\n        if (Control._FontHeightSizes[font]) {\r\n            return Control._FontHeightSizes[font];\r\n        }\r\n\r\n        var text = document.createElement(\"span\");\r\n        text.innerHTML = \"Hg\";\r\n        text.style.font = font;\r\n\r\n        var block = document.createElement(\"div\");\r\n        block.style.display = \"inline-block\";\r\n        block.style.width = \"1px\";\r\n        block.style.height = \"0px\";\r\n        block.style.verticalAlign = \"bottom\";\r\n\r\n        var div = document.createElement(\"div\");\r\n        div.appendChild(text);\r\n        div.appendChild(block);\r\n\r\n        document.body.appendChild(div);\r\n\r\n        var fontAscent = 0;\r\n        var fontHeight = 0;\r\n        try {\r\n            fontHeight = block.getBoundingClientRect().top - text.getBoundingClientRect().top;\r\n            block.style.verticalAlign = \"baseline\";\r\n            fontAscent = block.getBoundingClientRect().top - text.getBoundingClientRect().top;\r\n        } finally {\r\n            document.body.removeChild(div);\r\n        }\r\n        var result = { ascent: fontAscent, height: fontHeight, descent: fontHeight - fontAscent };\r\n        Control._FontHeightSizes[font] = result;\r\n\r\n        return result;\r\n    };\r\n\r\n\r\n\r\n    /**\r\n     * Creates a stack panel that can be used to render headers\r\n     * @param control defines the control to associate with the header\r\n     * @param text defines the text of the header\r\n     * @param size defines the size of the header\r\n     * @param options defines options used to configure the header\r\n     * @returns a new StackPanel\r\n     * @ignore\r\n     * @hidden\r\n     */\r\n    public static AddHeader: (control: Control, text: string, size: string | number, options: { isHorizontal: boolean, controlFirst: boolean }) => any = () => { };\r\n\r\n    /** @hidden */\r\n    protected static drawEllipse(x: number, y: number, width: number, height: number, context: CanvasRenderingContext2D): void {\r\n        context.translate(x, y);\r\n        context.scale(width, height);\r\n\r\n        context.beginPath();\r\n        context.arc(0, 0, 1, 0, 2 * Math.PI);\r\n        context.closePath();\r\n\r\n        context.scale(1 / width, 1 / height);\r\n        context.translate(-x, -y);\r\n    }\r\n}\r\n","import { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * Class used to specific a value and its associated unit\r\n */\r\nexport class ValueAndUnit {\r\n    private _value = 1;\r\n    /**\r\n     * Gets or sets a value indicating that this value will not scale accordingly with adaptive scaling property\r\n     * @see http://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public ignoreAdaptiveScaling = false;\r\n\r\n    /**\r\n     * Creates a new ValueAndUnit\r\n     * @param value defines the value to store\r\n     * @param unit defines the unit to store\r\n     * @param negativeValueAllowed defines a boolean indicating if the value can be negative\r\n     */\r\n    public constructor(value: number,\r\n        /** defines the unit to store */\r\n        public unit = ValueAndUnit.UNITMODE_PIXEL,\r\n        /** defines a boolean indicating if the value can be negative */\r\n        public negativeValueAllowed = true) {\r\n        this._value = value;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is a percentage */\r\n    public get isPercentage(): boolean {\r\n        return this.unit === ValueAndUnit.UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is store as pixel */\r\n    public get isPixel(): boolean {\r\n        return this.unit === ValueAndUnit.UNITMODE_PIXEL;\r\n    }\r\n\r\n    /** Gets direct internal value */\r\n    public get internalValue(): number {\r\n        return this._value;\r\n    }\r\n\r\n    /**\r\n     * Gets value as pixel\r\n     * @param host defines the root host\r\n     * @param refValue defines the reference value for percentages\r\n     * @returns the value as pixel\r\n     */\r\n    public getValueInPixel(host: AdvancedDynamicTexture, refValue: number): number {\r\n        if (this.isPixel) {\r\n            return this.getValue(host);\r\n        }\r\n\r\n        return this.getValue(host) * refValue;\r\n    }\r\n\r\n    /**\r\n     * Gets the value accordingly to its unit\r\n     * @param host  defines the root host\r\n     * @returns the value\r\n     */\r\n    public getValue(host: AdvancedDynamicTexture): number {\r\n        if (host && !this.ignoreAdaptiveScaling && this.unit !== ValueAndUnit.UNITMODE_PERCENTAGE) {\r\n            var width: number = 0;\r\n            var height: number = 0;\r\n\r\n            if (host.idealWidth) {\r\n                width = (this._value * host.getSize().width) / host.idealWidth;\r\n            }\r\n\r\n            if (host.idealHeight) {\r\n                height = (this._value * host.getSize().height) / host.idealHeight;\r\n            }\r\n\r\n            if (host.useSmallestIdeal && host.idealWidth && host.idealHeight) {\r\n                return window.innerWidth < window.innerHeight ? width : height;\r\n            }\r\n\r\n            if (host.idealWidth) { // horizontal\r\n                return width;\r\n            }\r\n\r\n            if (host.idealHeight) { // vertical\r\n                return height;\r\n            }\r\n        }\r\n        return this._value;\r\n    }\r\n\r\n    /**\r\n     * Gets a string representation of the value\r\n     * @param host defines the root host\r\n     * @returns a string\r\n     */\r\n    public toString(host: AdvancedDynamicTexture): string {\r\n        switch (this.unit) {\r\n            case ValueAndUnit.UNITMODE_PERCENTAGE:\r\n                return (this.getValue(host) * 100) + \"%\";\r\n            case ValueAndUnit.UNITMODE_PIXEL:\r\n                return this.getValue(host) + \"px\";\r\n        }\r\n\r\n        return this.unit.toString();\r\n    }\r\n\r\n    /**\r\n     * Store a value parsed from a string\r\n     * @param source defines the source string\r\n     * @returns true if the value was successfully parsed\r\n     */\r\n    public fromString(source: string | number): boolean {\r\n        var match = ValueAndUnit._Regex.exec(source.toString());\r\n\r\n        if (!match || match.length === 0) {\r\n            return false;\r\n        }\r\n\r\n        var sourceValue = parseFloat(match[1]);\r\n        var sourceUnit = this.unit;\r\n\r\n        if (!this.negativeValueAllowed) {\r\n            if (sourceValue < 0) {\r\n                sourceValue = 0;\r\n            }\r\n        }\r\n\r\n        if (match.length === 4) {\r\n            switch (match[3]) {\r\n                case \"px\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PIXEL;\r\n                    break;\r\n                case \"%\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PERCENTAGE;\r\n                    sourceValue /= 100.0;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (sourceValue === this._value && sourceUnit === this.unit) {\r\n            return false;\r\n        }\r\n\r\n        this._value = sourceValue;\r\n        this.unit = sourceUnit;\r\n\r\n        return true;\r\n    }\r\n\r\n    // Static\r\n    private static _Regex = /(^-?\\d*(\\.\\d+)?)(%|px)?/;\r\n    private static _UNITMODE_PERCENTAGE = 0;\r\n    private static _UNITMODE_PIXEL = 1;\r\n\r\n    /** UNITMODE_PERCENTAGE */\r\n    public static get UNITMODE_PERCENTAGE(): number {\r\n        return ValueAndUnit._UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** UNITMODE_PIXEL */\r\n    public static get UNITMODE_PIXEL(): number {\r\n        return ValueAndUnit._UNITMODE_PIXEL;\r\n    }\r\n}  ","import { Control3D } from \"./control3D\";\r\nimport { Scene, Nullable, TransformNode } from \"babylonjs\";\r\n\r\n/**\r\n * Class used to create containers for controls\r\n */\r\nexport class Container3D extends Control3D {\r\n    private _blockLayout = false;\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    protected _children = new Array<Control3D>();\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    public get children(): Array<Control3D> {\r\n        return this._children;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the layout must be blocked (default is false).\r\n     * This is helpful to optimize layout operation when adding multiple children in a row\r\n     */\r\n    public get blockLayout(): boolean {\r\n        return this._blockLayout;\r\n    }\r\n\r\n    public set blockLayout(value: boolean) {\r\n        if (this._blockLayout === value) {\r\n            return;\r\n        }\r\n\r\n        this._blockLayout = value;\r\n\r\n        if (!this._blockLayout) {\r\n            this._arrangeChildren();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new container\r\n     * @param name defines the container name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    /**\r\n     * Force the container to update the layout. Please note that it will not take blockLayout property in account\r\n     * @returns the current container\r\n     */\r\n    public updateLayout(): Container3D {\r\n        this._arrangeChildren();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the children of this control\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the children of this control\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Control3D): Container3D {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control.parent = this;\r\n        control._host = this._host;\r\n\r\n        this._children.push(control);\r\n\r\n        if (this._host.utilityLayer) {\r\n            control._prepareNode(this._host.utilityLayer.utilityLayerScene);\r\n\r\n            if (control.node) {\r\n                control.node.parent = this.node;\r\n            }\r\n\r\n            if (!this.blockLayout) {\r\n                this._arrangeChildren();\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    /**\r\n     * This function will be called everytime a new control is added \r\n     */\r\n    protected _arrangeChildren() {\r\n    }\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        return new TransformNode(\"ContainerNode\", scene);\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the children of this control\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): Container3D {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n            control._disposeNode();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container3D\";\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        for (var control of this._children) {\r\n            control.dispose();\r\n        }\r\n\r\n        this._children = [];\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    /** Control rotation will remain unchanged  */\r\n    public static readonly UNSET_ORIENTATION = 0;\r\n\r\n    /** Control will rotate to make it look at sphere central axis */\r\n    public static readonly FACEORIGIN_ORIENTATION = 1;\r\n\r\n    /** Control will rotate to make it look back at sphere central axis */\r\n    public static readonly FACEORIGINREVERSED_ORIENTATION = 2;\r\n\r\n    /** Control will rotate to look at z axis (0, 0, 1) */\r\n    public static readonly FACEFORWARD_ORIENTATION = 3;\r\n\r\n    /** Control will rotate to look at negative z axis (0, 0, -1) */\r\n    public static readonly FACEFORWARDREVERSED_ORIENTATION = 4;\r\n\r\n}\r\n","import { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { Nullable } from \"babylonjs\";\r\nimport { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\n\r\n/**\r\n * Root class for 2D containers\r\n * @see http://doc.babylonjs.com/how_to/gui#containers\r\n */\r\nexport class Container extends Control {\r\n    /** @hidden */\r\n    protected _children = new Array<Control>();\r\n    /** @hidden */\r\n    protected _measureForChildren = Measure.Empty();\r\n    /** @hidden */\r\n    protected _background: string;\r\n    /** @hidden */\r\n    protected _adaptWidthToChildren = false;\r\n    /** @hidden */\r\n    protected _adaptHeightToChildren = false;\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children height */\r\n    public get adaptHeightToChildren(): boolean {\r\n        return this._adaptHeightToChildren;\r\n    }\r\n\r\n    public set adaptHeightToChildren(value: boolean) {\r\n        if (this._adaptHeightToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptHeightToChildren = value;\r\n\r\n        if (value) {\r\n            this.height = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children width */\r\n    public get adaptWidthToChildren(): boolean {\r\n        return this._adaptWidthToChildren;\r\n    }\r\n\r\n    public set adaptWidthToChildren(value: boolean) {\r\n        if (this._adaptWidthToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptWidthToChildren = value;\r\n\r\n        if (value) {\r\n            this.width = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._children;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Container\r\n     * @param name defines the name of the container\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its name\r\n     * @param name defines the child name to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByName(name: string): Nullable<Control> {\r\n        for (var child of this.children) {\r\n            if (child.name === name) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its type and its name\r\n     * @param name defines the child name to look for\r\n     * @param type defines the child type to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByType(name: string, type: string): Nullable<Control> {\r\n        for (var child of this.children) {\r\n            if (child.typeName === type) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Search for a specific control in children\r\n     * @param control defines the control to look for\r\n     * @returns true if the control is in child list\r\n     */\r\n    public containsControl(control: Control): boolean {\r\n        return this.children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control._link(this, this._host);\r\n\r\n        control._markAllAsDirty();\r\n\r\n        this._reOrderControl(control);\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes all controls from the current container\r\n     * @returns the current container\r\n     */\r\n    public clearControls(): Container {\r\n        let children = this._children.slice();\r\n\r\n        for (var child of children) {\r\n            this.removeControl(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n        }\r\n\r\n        control.linkWithMesh(null);\r\n\r\n        if (this._host) {\r\n            this._host._cleanControlAfterRemoval(control);\r\n        }\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _reOrderControl(control: Control): void {\r\n        this.removeControl(control);\r\n\r\n        for (var index = 0; index < this._children.length; index++) {\r\n            if (this._children[index].zIndex > control.zIndex) {\r\n                this._children.splice(index, 0, control);\r\n                return;\r\n            }\r\n        }\r\n\r\n        this._children.push(control);\r\n\r\n        control.parent = this;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markMatrixAsDirty(): void {\r\n        super._markMatrixAsDirty();\r\n\r\n        for (var index = 0; index < this._children.length; index++) {\r\n            this._children[index]._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markAllAsDirty(): void {\r\n        super._markAllAsDirty();\r\n\r\n        for (var index = 0; index < this._children.length; index++) {\r\n            this._children[index]._markAllAsDirty();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        if (this._background) {\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            context.fillStyle = this._background;\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _link(root: Nullable<Container>, host: AdvancedDynamicTexture): void {\r\n        super._link(root, host);\r\n\r\n        for (var child of this._children) {\r\n            child._link(root, host);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (!this.isVisible || this.notRenderable) {\r\n            return;\r\n        }\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            this._localDraw(context);\r\n\r\n            this._clipForChildren(context);\r\n\r\n            let computedWidth = -1;\r\n            let computedHeight = -1;\r\n\r\n            for (var child of this._children) {\r\n                if (child.isVisible && !child.notRenderable) {\r\n                    child._tempParentMeasure.copyFrom(this._measureForChildren);\r\n                    child._draw(this._measureForChildren, context);\r\n\r\n                    if (child.onAfterDrawObservable.hasObservers()) {\r\n                        child.onAfterDrawObservable.notifyObservers(child);\r\n                    }\r\n\r\n                    if (this.adaptWidthToChildren && child._width.isPixel) {\r\n                        computedWidth = Math.max(computedWidth, child._currentMeasure.width);\r\n                    }\r\n                    if (this.adaptHeightToChildren && child._height.isPixel) {\r\n                        computedHeight = Math.max(computedHeight, child._currentMeasure.height);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (this.adaptWidthToChildren && computedWidth >= 0) {\r\n                this.width = computedWidth + \"px\";\r\n            }\r\n            if (this.adaptHeightToChildren && computedHeight >= 0) {\r\n                this.height = computedHeight + \"px\";\r\n            }\r\n        }\r\n        context.restore();\r\n\r\n        if (this.onAfterDrawObservable.hasObservers()) {\r\n            this.onAfterDrawObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processPicking(x: number, y: number, type: number, pointerId: number, buttonIndex: number): boolean {\r\n        if (!this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        // Checking backwards to pick closest first\r\n        for (var index = this._children.length - 1; index >= 0; index--) {\r\n            var child = this._children[index];\r\n            if (child._processPicking(x, y, type, pointerId, buttonIndex)) {\r\n                if (child.hoverCursor) {\r\n                    this._host._changeCursor(child.hoverCursor);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!this.isHitTestVisible) {\r\n            return false;\r\n        }\r\n\r\n        return this._processObservables(type, x, y, pointerId, buttonIndex);\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _clipForChildren(context: CanvasRenderingContext2D): void {\r\n        // DO nothing\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(this._currentMeasure);\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (var control of this._children) {\r\n            control.dispose();\r\n        }\r\n    }\r\n}   ","\r\n/**\r\n * Class used to store 2D control sizes\r\n */\r\nexport class Measure {\r\n    /**\r\n     * Creates a new measure\r\n     * @param left defines left coordinate\r\n     * @param top defines top coordinate \r\n     * @param width defines width dimension\r\n     * @param height defines height dimension\r\n     */\r\n    public constructor(\r\n        /** defines left coordinate */\r\n        public left: number,\r\n        /** defines top coordinate  */\r\n        public top: number,\r\n        /** defines width dimension  */\r\n        public width: number,\r\n        /** defines height dimension */\r\n        public height: number) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Copy from another measure\r\n     * @param other defines the other measure to copy from\r\n     */\r\n    public copyFrom(other: Measure): void {\r\n        this.left = other.left;\r\n        this.top = other.top;\r\n        this.width = other.width;\r\n        this.height = other.height;\r\n    }\r\n\r\n    /**\r\n     * Check equality between this measure and another one\r\n     * @param other defines the other measures\r\n     * @returns true if both measures are equals\r\n     */\r\n    public isEqualsTo(other: Measure): boolean {\r\n\r\n        if (this.left !== other.left) {\r\n            return false;\r\n        }\r\n\r\n        if (this.top !== other.top) {\r\n            return false;\r\n        }\r\n\r\n        if (this.width !== other.width) {\r\n            return false;\r\n        }\r\n\r\n        if (this.height !== other.height) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Creates an empty measure\r\n     * @returns a new measure\r\n     */\r\n    public static Empty(): Measure {\r\n        return new Measure(0, 0, 0, 0);\r\n    }\r\n}   ","import { Observable } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\n\r\n/**\r\n * Enum that determines the text-wrapping mode to use.\r\n */\r\nexport enum TextWrapping {\r\n    /**\r\n     * Clip the text when it's larger than Control.width; this is the default mode.\r\n     */\r\n    Clip = 0,\r\n\r\n    /**\r\n     * Wrap the text word-wise, i.e. try to add line-breaks at word boundary to fit within Control.width.\r\n     */\r\n    WordWrap = 1,\r\n\r\n    /**\r\n     * Ellipsize the text, i.e. shrink with trailing  when text is larger than Control.width.\r\n     */\r\n    Ellipsis,\r\n}\r\n\r\n/**\r\n * Class used to create text block control\r\n */\r\nexport class TextBlock extends Control {\r\n    private _text = \"\";\r\n    private _textWrapping = TextWrapping.Clip;\r\n    private _textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    private _textVerticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n\r\n    private _lines: any[];\r\n    private _resizeToFit: boolean = false;\r\n    private _lineSpacing: ValueAndUnit = new ValueAndUnit(0);\r\n    private _outlineWidth: number = 0;\r\n    private _outlineColor: string = \"white\";\r\n    /**\r\n    * An event triggered after the text is changed\r\n    */\r\n    public onTextChangedObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n    * An event triggered after the text was broken up into lines\r\n    */\r\n    public onLinesReadyObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n     * Return the line list (you may need to use the onLinesReadyObservable to make sure the list is ready)\r\n     */\r\n    public get lines(): any[] {\r\n        return this._lines;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that the TextBlock will be resized to fit container\r\n     */\r\n    public get resizeToFit(): boolean {\r\n        return this._resizeToFit;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that the TextBlock will be resized to fit container\r\n     */\r\n    public set resizeToFit(value: boolean) {\r\n        this._resizeToFit = value;\r\n\r\n        if (this._resizeToFit) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    public get textWrapping(): TextWrapping | boolean {\r\n        return this._textWrapping;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    public set textWrapping(value: TextWrapping | boolean) {\r\n        if (this._textWrapping === value) {\r\n            return;\r\n        }\r\n        this._textWrapping = +value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n        this._text = value;\r\n        this._markAsDirty();\r\n\r\n        this.onTextChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public get textHorizontalAlignment(): number {\r\n        return this._textHorizontalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textHorizontalAlignment(value: number) {\r\n        if (this._textHorizontalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textHorizontalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public get textVerticalAlignment(): number {\r\n        return this._textVerticalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textVerticalAlignment(value: number) {\r\n        if (this._textVerticalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textVerticalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    public set lineSpacing(value: string | number) {\r\n        if (this._lineSpacing.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    public get lineSpacing(): string | number {\r\n        return this._lineSpacing.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public get outlineWidth(): number {\r\n        return this._outlineWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public set outlineWidth(value: number) {\r\n        if (this._outlineWidth === value) {\r\n            return;\r\n        }\r\n        this._outlineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public get outlineColor(): string {\r\n        return this._outlineColor;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public set outlineColor(value: string) {\r\n        if (this._outlineColor === value) {\r\n            return;\r\n        }\r\n        this._outlineColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new TextBlock object\r\n     * @param name defines the name of the control\r\n     * @param text defines the text to display (emptry string by default)\r\n     */\r\n    constructor(\r\n        /**\r\n         * Defines the name of the control\r\n         */\r\n        public name?: string,\r\n        text: string = \"\") {\r\n        super(name);\r\n\r\n        this.text = text;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TextBlock\";\r\n    }\r\n\r\n    private _drawText(text: string, textWidth: number, y: number, context: CanvasRenderingContext2D): void {\r\n        var width = this._currentMeasure.width;\r\n        var x = 0;\r\n        switch (this._textHorizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x = 0\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x = width - textWidth;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x = (width - textWidth) / 2;\r\n                break;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this.outlineWidth) {\r\n            context.strokeText(text, this._currentMeasure.left + x, y);\r\n        }\r\n        context.fillText(text, this._currentMeasure.left + x, y);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            // Render lines\r\n            this._renderLines(context);\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    protected _applyStates(context: CanvasRenderingContext2D): void {\r\n        super._applyStates(context);\r\n        if (this.outlineWidth) {\r\n            context.lineWidth = this.outlineWidth;\r\n            context.strokeStyle = this.outlineColor;\r\n        }\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._lines = this._breakLines(this._currentMeasure.width, context);\r\n        this.onLinesReadyObservable.notifyObservers(this);\r\n    }\r\n\r\n    protected _breakLines(refWidth: number, context: CanvasRenderingContext2D): object[] {\r\n        var lines = [];\r\n        var _lines = this.text.split(\"\\n\");\r\n\r\n        if (this._textWrapping === TextWrapping.Ellipsis && !this._resizeToFit) {\r\n            for (var _line of _lines) {\r\n                lines.push(this._parseLineEllipsis(_line, refWidth, context));\r\n            }\r\n        } else if (this._textWrapping === TextWrapping.WordWrap && !this._resizeToFit) {\r\n            for (var _line of _lines) {\r\n                lines.push(...this._parseLineWordWrap(_line, refWidth, context));\r\n            }\r\n        } else {\r\n            for (var _line of _lines) {\r\n                lines.push(this._parseLine(_line, context));\r\n            }\r\n        }\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _parseLine(line: string = '', context: CanvasRenderingContext2D): object {\r\n        return { text: line, width: context.measureText(line).width };\r\n    }\r\n\r\n    protected _parseLineEllipsis(line: string = '', width: number,\r\n        context: CanvasRenderingContext2D): object {\r\n        var lineWidth = context.measureText(line).width;\r\n\r\n        if (lineWidth > width) {\r\n            line += '';\r\n        }\r\n        while (line.length > 2 && lineWidth > width) {\r\n            line = line.slice(0, -2) + '';\r\n            lineWidth = context.measureText(line).width;\r\n        }\r\n\r\n        return { text: line, width: lineWidth };\r\n    }\r\n\r\n    protected _parseLineWordWrap(line: string = '', width: number,\r\n        context: CanvasRenderingContext2D): object[] {\r\n        var lines = [];\r\n        var words = line.split(' ');\r\n        var lineWidth = 0;\r\n\r\n        for (var n = 0; n < words.length; n++) {\r\n            var testLine = n > 0 ? line + \" \" + words[n] : words[0];\r\n            var metrics = context.measureText(testLine);\r\n            var testWidth = metrics.width;\r\n            if (testWidth > width && n > 0) {\r\n                lines.push({ text: line, width: lineWidth });\r\n                line = words[n];\r\n                lineWidth = context.measureText(line).width;\r\n            }\r\n            else {\r\n                lineWidth = testWidth;\r\n                line = testLine;\r\n            }\r\n        }\r\n        lines.push({ text: line, width: lineWidth });\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _renderLines(context: CanvasRenderingContext2D): void {\r\n        var height = this._currentMeasure.height;\r\n\r\n        if (!this._fontOffset) {\r\n            this._fontOffset = Control._GetFontOffset(context.font);\r\n        }\r\n        var rootY = 0;\r\n        switch (this._textVerticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                rootY = this._fontOffset.ascent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                rootY = height - this._fontOffset.height * (this._lines.length - 1) - this._fontOffset.descent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                rootY = this._fontOffset.ascent + (height - this._fontOffset.height * this._lines.length) / 2;\r\n                break;\r\n        }\r\n\r\n        rootY += this._currentMeasure.top;\r\n\r\n        var maxLineWidth: number = 0;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (i !== 0 && this._lineSpacing.internalValue !== 0) {\r\n\r\n                if (this._lineSpacing.isPixel) {\r\n                    rootY += this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    rootY = rootY + (this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height));\r\n                }\r\n            }\r\n\r\n            this._drawText(line.text, line.width, rootY, context);\r\n            rootY += this._fontOffset.height;\r\n\r\n            if (line.width > maxLineWidth) maxLineWidth = line.width;\r\n        }\r\n\r\n        if (this._resizeToFit) {\r\n            this.width = this.paddingLeftInPixels + this.paddingRightInPixels + maxLineWidth + 'px';\r\n            this.height = this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * this._lines.length + 'px';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a width constraint applied on the text block, find the expected height\r\n     * @returns expected height\r\n     */\r\n    public computeExpectedHeight(): number {\r\n        if (this.text && this.widthInPixels) {\r\n            const context = document.createElement('canvas').getContext('2d');\r\n            if (context) {\r\n                this._applyStates(context);\r\n                if (!this._fontOffset) {\r\n                    this._fontOffset = Control._GetFontOffset(context.font);\r\n                }\r\n                const lines = this._lines ? this._lines : this._breakLines(\r\n                    this.widthInPixels - this.paddingLeftInPixels - this.paddingRightInPixels, context);\r\n                return this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * lines.length;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    dispose(): void {\r\n        super.dispose();\r\n\r\n        this.onTextChangedObservable.clear();\r\n    }\r\n}\r\n","import { Container } from \"./container\";\r\nimport { Measure } from \"../measure\";\r\nimport { Control } from \"./control\";\r\n\r\n/**\r\n * Class used to create a 2D stack panel container\r\n */\r\nexport class StackPanel extends Container {\r\n    private _isVertical = true;\r\n    private _manualWidth = false;\r\n    private _manualHeight = false;\r\n    private _doNotTrackManualChanges = false;\r\n    private _tempMeasureStore = Measure.Empty();\r\n\r\n    /** Gets or sets a boolean indicating if the stack panel is vertical or horizontal*/\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets panel width */\r\n    public set width(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualWidth = true;\r\n        }\r\n\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    /** Gets or sets panel height */\r\n    public set height(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualHeight = true;\r\n        }\r\n\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new StackPanel\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"StackPanel\";\r\n    }\r\n\r\n    protected _preMeasure(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        var stackWidth = 0;\r\n        var stackHeight = 0;\r\n        for (var child of this._children) {\r\n            this._tempMeasureStore.copyFrom(child._currentMeasure);\r\n            child._currentMeasure.copyFrom(parentMeasure);\r\n            child._measure();\r\n\r\n            if (this._isVertical) {\r\n                child.top = stackHeight + \"px\";\r\n                if (!child._top.ignoreAdaptiveScaling) {\r\n                    child._markAsDirty();\r\n                }\r\n                child._top.ignoreAdaptiveScaling = true;\r\n                stackHeight += child._currentMeasure.height;\r\n                if (child._currentMeasure.width > stackWidth) {\r\n                    stackWidth = child._currentMeasure.width;\r\n                }\r\n                child.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            } else {\r\n                child.left = stackWidth + \"px\";\r\n                if (!child._left.ignoreAdaptiveScaling) {\r\n                    child._markAsDirty();\r\n                }\r\n                child._left.ignoreAdaptiveScaling = true;\r\n                stackWidth += child._currentMeasure.width;\r\n                if (child._currentMeasure.height > stackHeight) {\r\n                    stackHeight = child._currentMeasure.height;\r\n                }\r\n                child.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            }\r\n\r\n            child._currentMeasure.copyFrom(this._tempMeasureStore);\r\n        }\r\n\r\n        this._doNotTrackManualChanges = true;\r\n\r\n        // Let stack panel width and height default to stackHeight and stackWidth if dimensions are not specified.\r\n        // User can now define their own height and width for stack panel.\r\n\r\n        let panelWidthChanged = false;\r\n        let panelHeightChanged = false;\r\n\r\n        let previousHeight = this.height;\r\n        let previousWidth = this.width;\r\n\r\n        if (!this._manualHeight) {\r\n            // do not specify height if strictly defined by user\r\n            this.height = stackHeight + \"px\";\r\n        }\r\n        if (!this._manualWidth) {\r\n            // do not specify width if strictly defined by user\r\n            this.width = stackWidth + \"px\";\r\n        }\r\n\r\n        panelWidthChanged = previousWidth !== this.width || !this._width.ignoreAdaptiveScaling;\r\n        panelHeightChanged = previousHeight !== this.height || !this._height.ignoreAdaptiveScaling;\r\n\r\n        if (panelHeightChanged) {\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        if (panelWidthChanged) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        this._doNotTrackManualChanges = false;\r\n\r\n        if (panelWidthChanged || panelHeightChanged) {\r\n            this._markAllAsDirty();\r\n        }\r\n\r\n        super._preMeasure(parentMeasure, context);\r\n    }\r\n}  ","import { Container3D } from \"./container3D\";\r\nimport { Tools, int, Matrix, Tmp, Vector3 } from \"babylonjs\";\r\nimport { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Abstract class used to create a container panel deployed on the surface of a volume\r\n */\r\nexport abstract class VolumeBasedPanel extends Container3D {\r\n    private _columns = 10;\r\n    private _rows = 0;\r\n    private _rowThenColum = true;\r\n\r\n    private _orientation = Container3D.FACEORIGIN_ORIENTATION;\r\n\r\n    protected _cellWidth: number;\r\n    protected _cellHeight: number;\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0;\r\n\r\n    /**\r\n     * Gets or sets the orientation to apply to all controls (BABYLON.Container3D.FaceOriginReversedOrientation by default)\r\n    * | Value | Type                                | Description |\r\n    * | ----- | ----------------------------------- | ----------- |\r\n    * | 0     | UNSET_ORIENTATION                   |  Control rotation will remain unchanged |\r\n    * | 1     | FACEORIGIN_ORIENTATION              |  Control will rotate to make it look at sphere central axis |\r\n    * | 2     | FACEORIGINREVERSED_ORIENTATION      |  Control will rotate to make it look back at sphere central axis |\r\n    * | 3     | FACEFORWARD_ORIENTATION             |  Control will rotate to look at z axis (0, 0, 1) |\r\n    * | 4     | FACEFORWARDREVERSED_ORIENTATION     |  Control will rotate to look at negative z axis (0, 0, -1) |\r\n     */\r\n    public get orientation(): number {\r\n        return this._orientation;\r\n    }\r\n\r\n    public set orientation(value: number) {\r\n        if (this._orientation === value) {\r\n            return;\r\n        }\r\n\r\n        this._orientation = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the number of columns requested (10 by default). \r\n     * The panel will automatically compute the number of rows based on number of child controls. \r\n     */\r\n    public get columns(): int {\r\n        return this._columns;\r\n    }\r\n\r\n    public set columns(value: int) {\r\n        if (this._columns === value) {\r\n            return;\r\n        }\r\n\r\n        this._columns = value;\r\n        this._rowThenColum = true;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a the number of rows requested. \r\n     * The panel will automatically compute the number of columns based on number of child controls. \r\n     */\r\n    public get rows(): int {\r\n        return this._rows;\r\n    }\r\n\r\n    public set rows(value: int) {\r\n        if (this._rows === value) {\r\n            return;\r\n        }\r\n\r\n        this._rows = value;\r\n        this._rowThenColum = false;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates new VolumeBasedPanel\r\n     */\r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        this._cellWidth = 0;\r\n        this._cellHeight = 0;\r\n        let rows = 0;\r\n        let columns = 0;\r\n        let controlCount = 0;\r\n\r\n        let currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            //   child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, Tmp.Matrix[0]);\r\n\r\n            let boundingBox = child.mesh.getHierarchyBoundingVectors();\r\n            let extendSize = Tmp.Vector3[0];\r\n            let diff = Tmp.Vector3[1];\r\n\r\n            boundingBox.max.subtractToRef(boundingBox.min, diff);\r\n\r\n            diff.scaleInPlace(0.5);\r\n\r\n            Vector3.TransformNormalToRef(diff, currentInverseWorld, extendSize);\r\n\r\n            this._cellWidth = Math.max(this._cellWidth, extendSize.x * 2);\r\n            this._cellHeight = Math.max(this._cellHeight, extendSize.y * 2);\r\n        }\r\n\r\n        this._cellWidth += this.margin * 2;\r\n        this._cellHeight += this.margin * 2;\r\n\r\n        // Arrange\r\n        if (this._rowThenColum) {\r\n            columns = this._columns;\r\n            rows = Math.ceil(controlCount / this._columns);\r\n        } else {\r\n            rows = this._rows;\r\n            columns = Math.ceil(controlCount / this._rows);\r\n        }\r\n\r\n        let startOffsetX = (columns * 0.5) * this._cellWidth;\r\n        let startOffsetY = (rows * 0.5) * this._cellHeight;\r\n        let nodeGrid = [];\r\n        let cellCounter = 0;\r\n\r\n        if (this._rowThenColum) {\r\n            for (var r = 0; r < rows; r++) {\r\n                for (var c = 0; c < columns; c++) {\r\n                    nodeGrid.push(new Vector3((c * this._cellWidth) - startOffsetX + this._cellWidth / 2, (r * this._cellHeight) - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var c = 0; c < columns; c++) {\r\n                for (var r = 0; r < rows; r++) {\r\n                    nodeGrid.push(new Vector3((c * this._cellWidth) - startOffsetX + this._cellWidth / 2, (r * this._cellHeight) - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        cellCounter = 0;\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            this._mapGridNode(child, nodeGrid[cellCounter]);\r\n\r\n            cellCounter++;\r\n        }\r\n\r\n        this._finalProcessing();\r\n    }\r\n\r\n    /** Child classes must implement this function to provide correct control positioning */\r\n    protected abstract _mapGridNode(control: Control3D, nodePosition: Vector3): void;\r\n\r\n    /** Child classes can implement this function to provide additional processing */\r\n    protected _finalProcessing() {\r\n\r\n    }\r\n}\r\n","export * from \"./controls\";\r\n\r\nexport * from \"./advancedDynamicTexture\";\r\nexport * from \"./math2D\";\r\nexport * from \"./measure\";\r\nexport * from \"./multiLinePoint\";\r\nexport * from \"./style\";\r\nexport * from \"./valueAndUnit\";","export * from \"./button\";\r\nexport * from \"./checkbox\";\r\nexport * from \"./colorpicker\";\r\nexport * from \"./container\";\r\nexport * from \"./control\";\r\nexport * from \"./ellipse\";\r\nexport * from \"./grid\";\r\nexport * from \"./image\";\r\nexport * from \"./inputText\";\r\nexport * from \"./inputPassword\";\r\nexport * from \"./line\";\r\nexport * from \"./multiLine\";\r\nexport * from \"./radioButton\";\r\nexport * from \"./stackPanel\";\r\nexport * from \"./textBlock\";\r\nexport * from \"./virtualKeyboard\";\r\nexport * from \"./slider\";\r\nexport * from \"./rectangle\";\r\nexport * from \"./displayGrid\";\r\n\r\nexport * from \"./statics\";","import { Control } from \"./control\";\r\nimport { Nullable, Tools } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/**\r\n * Class used to create 2D images\r\n */\r\nclass GUIImage extends Control {\r\n    private _domImage: HTMLImageElement;\r\n    private _imageWidth: number;\r\n    private _imageHeight: number;\r\n    private _loaded = false;\r\n    private _stretch = GUIImage.STRETCH_FILL;\r\n    private _source: Nullable<string>;\r\n    private _autoScale = false;\r\n\r\n    private _sourceLeft = 0;\r\n    private _sourceTop = 0;\r\n    private _sourceWidth = 0;\r\n    private _sourceHeight = 0;\r\n\r\n    private _cellWidth: number = 0;\r\n    private _cellHeight: number = 0;\r\n    private _cellId: number = -1;\r\n\r\n    /**\r\n     * Gets or sets the left coordinate in the source image\r\n     */\r\n    public get sourceLeft(): number {\r\n        return this._sourceLeft;\r\n    }\r\n\r\n    public set sourceLeft(value: number) {\r\n        if (this._sourceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top coordinate in the source image\r\n     */\r\n    public get sourceTop(): number {\r\n        return this._sourceTop;\r\n    }\r\n\r\n    public set sourceTop(value: number) {\r\n        if (this._sourceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the width to capture in the source image\r\n     */\r\n    public get sourceWidth(): number {\r\n        return this._sourceWidth;\r\n    }\r\n\r\n    public set sourceWidth(value: number) {\r\n        if (this._sourceWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height to capture in the source image\r\n     */\r\n    public get sourceHeight(): number {\r\n        return this._sourceHeight;\r\n    }\r\n\r\n    public set sourceHeight(value: number) {\r\n        if (this._sourceHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets a boolean indicating if the image can force its container to adapt its size \r\n     * @see http://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    public get autoScale(): boolean {\r\n        return this._autoScale;\r\n    }\r\n\r\n    public set autoScale(value: boolean) {\r\n        if (this._autoScale === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoScale = value;\r\n\r\n        if (value && this._loaded) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the streching mode used by the image */\r\n    public get stretch(): number {\r\n        return this._stretch;\r\n    }\r\n\r\n    public set stretch(value: number) {\r\n        if (this._stretch === value) {\r\n            return;\r\n        }\r\n\r\n        this._stretch = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the internal DOM image used to render the control\r\n     */\r\n    public set domImage(value: HTMLImageElement) {\r\n        this._domImage = value;\r\n        this._loaded = false;\r\n\r\n        if (this._domImage.width) {\r\n            this._onImageLoaded();\r\n        } else {\r\n            this._domImage.onload = () => {\r\n                this._onImageLoaded();\r\n            }\r\n        }\r\n    }\r\n\r\n    public get domImage(): HTMLImageElement {\r\n        return this._domImage;\r\n    }\r\n\r\n    private _onImageLoaded(): void {\r\n        this._imageWidth = this._domImage.width;\r\n        this._imageHeight = this._domImage.height;\r\n        this._loaded = true;\r\n\r\n        if (this._autoScale) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets image source url\r\n     */\r\n    public set source(value: Nullable<string>) {\r\n        if (this._source === value) {\r\n            return;\r\n        }\r\n\r\n        this._loaded = false;\r\n        this._source = value;\r\n\r\n        this._domImage = new Image();\r\n\r\n        this._domImage.onload = () => {\r\n            this._onImageLoaded();\r\n        }\r\n        if (value) {\r\n            Tools.SetCorsBehavior(value, this._domImage);\r\n            this._domImage.src = value;\r\n        }\r\n    }\r\n\r\n    /** \r\n     * Gets or sets the cell width to use when animation sheet is enabled \r\n     * @see http://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n    set cellWidth(value: number) {\r\n        if (this._cellWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets the cell height to use when animation sheet is enabled \r\n     * @see http://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n    set cellHeight(value: number) {\r\n        if (this._cellHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets or sets the cell id to use (this will turn on the animation sheet mode)\r\n     * @see http://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellId(): number {\r\n        return this._cellId;\r\n    }\r\n    set cellId(value: number) {\r\n        if (this._cellId === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellId = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Image\r\n     * @param name defines the control name\r\n     * @param url defines the image url\r\n     */\r\n    constructor(public name?: string, url: Nullable<string> = null) {\r\n        super(name);\r\n\r\n        this.source = url;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    /** Force the control to synchronize with its content */\r\n    public synchronizeSizeWithContent() {\r\n        if (!this._loaded) {\r\n            return;\r\n        }\r\n\r\n        this.width = this._domImage.width + \"px\";\r\n        this.height = this._domImage.height + \"px\";\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        let x, y, width, height;\r\n        if (this.cellId == -1) {\r\n            x = this._sourceLeft;\r\n            y = this._sourceTop;\r\n\r\n            width = this._sourceWidth ? this._sourceWidth : this._imageWidth;\r\n            height = this._sourceHeight ? this._sourceHeight : this._imageHeight;\r\n        }\r\n        else {\r\n            let rowCount = this._domImage.naturalWidth / this.cellWidth;\r\n            let column = (this.cellId / rowCount) >> 0;\r\n            let row = this.cellId % rowCount;\r\n\r\n            x = this.cellWidth * row;\r\n            y = this.cellHeight * column;\r\n            width = this.cellWidth;\r\n            height = this.cellHeight;\r\n        }\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            if (this._loaded) {\r\n                switch (this._stretch) {\r\n                    case GUIImage.STRETCH_NONE:\r\n                        context.drawImage(this._domImage, x, y, width, height,\r\n                            this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                        break;\r\n                    case GUIImage.STRETCH_FILL:\r\n                        context.drawImage(this._domImage, x, y, width, height,\r\n                            this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                        break;\r\n                    case GUIImage.STRETCH_UNIFORM:\r\n                        var hRatio = this._currentMeasure.width / width;\r\n                        var vRatio = this._currentMeasure.height / height;\r\n                        var ratio = Math.min(hRatio, vRatio);\r\n                        var centerX = (this._currentMeasure.width - width * ratio) / 2;\r\n                        var centerY = (this._currentMeasure.height - height * ratio) / 2;\r\n\r\n                        context.drawImage(this._domImage, x, y, width, height,\r\n                            this._currentMeasure.left + centerX, this._currentMeasure.top + centerY, width * ratio, height * ratio);\r\n                        break;\r\n                    case GUIImage.STRETCH_EXTEND:\r\n                        context.drawImage(this._domImage, x, y, width, height,\r\n                            this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                        if (this._autoScale) {\r\n                            this.synchronizeSizeWithContent();\r\n                        }\r\n                        if (this._root && this._root.parent) { // Will update root size if root is not the top root\r\n                            this._root.width = this.width;\r\n                            this._root.height = this.height;\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Static\r\n    private static _STRETCH_NONE = 0;\r\n    private static _STRETCH_FILL = 1;\r\n    private static _STRETCH_UNIFORM = 2;\r\n    private static _STRETCH_EXTEND = 3;\r\n\r\n    /** STRETCH_NONE */\r\n    public static get STRETCH_NONE(): number {\r\n        return GUIImage._STRETCH_NONE;\r\n    }\r\n\r\n    /** STRETCH_FILL */\r\n    public static get STRETCH_FILL(): number {\r\n        return GUIImage._STRETCH_FILL;\r\n    }\r\n\r\n    /** STRETCH_UNIFORM */\r\n    public static get STRETCH_UNIFORM(): number {\r\n        return GUIImage._STRETCH_UNIFORM;\r\n    }\r\n\r\n    /** STRETCH_EXTEND */\r\n    public static get STRETCH_EXTEND(): number {\r\n        return GUIImage._STRETCH_EXTEND;\r\n    }\r\n}\r\n\r\nexport { GUIImage as Image };\r\n","import { IDisposable, IBehaviorAware, Nullable, TransformNode, Vector3, Observable, Behavior, AbstractMesh, Scene, PointerEventTypes } from \"babylonjs\";\r\nimport { GUI3DManager } from \"../gui3DManager\";\r\nimport { Vector3WithInfo } from \"../vector3WithInfo\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used as base class for controls\r\n */\r\nexport class Control3D implements IDisposable, IBehaviorAware<Control3D> {\r\n    /** @hidden */\r\n    public _host: GUI3DManager;\r\n    private _node: Nullable<TransformNode>;\r\n    private _downCount = 0;\r\n    private _enterCount = -1;\r\n    private _downPointerIds: { [id: number]: boolean } = {};\r\n    private _isVisible = true;\r\n\r\n    /** Gets or sets the control position  in world space */\r\n    public get position(): Vector3 {\r\n        if (!this._node) {\r\n            return Vector3.Zero();\r\n        }\r\n\r\n        return this._node.position;\r\n    }\r\n\r\n    public set position(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._node.position = value;;\r\n    }\r\n\r\n    /** Gets or sets the control scaling  in world space */\r\n    public get scaling(): Vector3 {\r\n        if (!this._node) {\r\n            return new Vector3(1, 1, 1);\r\n        }\r\n\r\n        return this._node.scaling;\r\n    }\r\n\r\n    public set scaling(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._node.scaling = value;;\r\n    }\r\n\r\n    /** Callback used to start pointer enter animation */\r\n    public pointerEnterAnimation: () => void;\r\n    /** Callback used to start pointer out animation */\r\n    public pointerOutAnimation: () => void;\r\n    /** Callback used to start pointer down animation */\r\n    public pointerDownAnimation: () => void;\r\n    /** Callback used to start pointer up animation */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    /**\r\n    * An event triggered when the pointer move over the control\r\n    */\r\n    public onPointerMoveObservable = new Observable<Vector3>();\r\n\r\n    /**\r\n     * An event triggered when the pointer move out of the control\r\n     */\r\n    public onPointerOutObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * An event triggered when the pointer taps the control\r\n     */\r\n    public onPointerDownObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer is up\r\n     */\r\n    public onPointerUpObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when a control is clicked on (with a mouse)\r\n     */\r\n    public onPointerClickObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer enters the control\r\n     */\r\n    public onPointerEnterObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * Gets or sets the parent container\r\n     */\r\n    public parent: Nullable<Container3D>;\r\n\r\n    // Behaviors\r\n    private _behaviors = new Array<Behavior<Control3D>>();\r\n\r\n    /**\r\n     * Gets the list of attached behaviors\r\n     * @see http://doc.babylonjs.com/features/behaviour\r\n     */\r\n    public get behaviors(): Behavior<Control3D>[] {\r\n        return this._behaviors;\r\n    }\r\n\r\n    /**\r\n     * Attach a behavior to the control\r\n     * @see http://doc.babylonjs.com/features/behaviour\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public addBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        var index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n\r\n        behavior.init();\r\n        let scene = this._host.scene;\r\n        if (scene.isLoading) {\r\n            // We defer the attach when the scene will be loaded\r\n            scene.onDataLoadedObservable.addOnce(() => {\r\n                behavior.attach(this);\r\n            });\r\n        } else {\r\n            behavior.attach(this);\r\n        }\r\n        this._behaviors.push(behavior);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove an attached behavior\r\n     * @see http://doc.babylonjs.com/features/behaviour\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public removeBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        var index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index === -1) {\r\n            return this;\r\n        }\r\n\r\n        this._behaviors[index].detach();\r\n        this._behaviors.splice(index, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets an attached behavior by name\r\n     * @param name defines the name of the behavior to look for\r\n     * @see http://doc.babylonjs.com/features/behaviour\r\n     * @returns null if behavior was not found else the requested behavior\r\n     */\r\n    public getBehaviorByName(name: string): Nullable<Behavior<Control3D>> {\r\n        for (var behavior of this._behaviors) {\r\n            if (behavior.name === name) {\r\n                return behavior;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control is visible */\r\n    public get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n\r\n        let mesh = this.mesh;\r\n        if (mesh) {\r\n            mesh.setEnabled(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new control\r\n     * @param name defines the control name\r\n     */\r\n    constructor(\r\n        /** Defines the control name */\r\n        public name?: string) {\r\n    }\r\n\r\n    /**\r\n     * Gets a string representing the class name\r\n     */\r\n    public get typeName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Control3D\";\r\n    }\r\n\r\n    /**\r\n     * Gets the transform node used by this control\r\n     */\r\n    public get node(): Nullable<TransformNode> {\r\n        return this._node;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        if (this._node instanceof AbstractMesh) {\r\n            return this._node as AbstractMesh;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Link the control as child of the given node\r\n     * @param node defines the node to link to. Use null to unlink the control\r\n     * @returns the current control\r\n     */\r\n    public linkToTransformNode(node: Nullable<TransformNode>): Control3D {\r\n        if (this._node) {\r\n            this._node.parent = node;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /** @hidden **/\r\n    public _prepareNode(scene: Scene): void {\r\n        if (!this._node) {\r\n            this._node = this._createNode(scene);\r\n\r\n            if (!this.node) {\r\n                return;\r\n            }\r\n            this._node!.metadata = this; // Store the control on the metadata field in order to get it when picking\r\n            this._node!.position = this.position;\r\n            this._node!.scaling = this.scaling;\r\n\r\n            let mesh = this.mesh;\r\n            if (mesh) {\r\n                mesh.isPickable = true;\r\n\r\n                this._affectMaterial(mesh);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Node creation.\r\n     * Can be overriden by children\r\n     * @param scene defines the scene where the node must be attached\r\n     * @returns the attached node or null if none. Must return a Mesh or AbstractMesh if there is an atttached visible object\r\n     */\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        // Do nothing by default\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Affect a material to the given mesh\r\n     * @param mesh defines the mesh which will represent the control\r\n     */\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        mesh.material = null;\r\n    }\r\n\r\n    // Pointers\r\n\r\n    /** @hidden */\r\n    public _onPointerMove(target: Control3D, coordinates: Vector3): void {\r\n        this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerEnter(target: Control3D): boolean {\r\n        if (this._enterCount > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (this._enterCount === -1) { // -1 is for touch input, we are now sure we are with a mouse or pencil\r\n            this._enterCount = 0;\r\n        }\r\n\r\n        this._enterCount++;\r\n\r\n        this.onPointerEnterObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerOut(target: Control3D): void {\r\n        this._enterCount = 0;\r\n\r\n        this.onPointerOutObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number): boolean {\r\n        if (this._downCount !== 0) {\r\n            return false;\r\n        }\r\n\r\n        this._downCount++;\r\n\r\n        this._downPointerIds[pointerId] = true;\r\n\r\n        this.onPointerDownObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerUp(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._downCount = 0;\r\n\r\n        delete this._downPointerIds[pointerId];\r\n\r\n        if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\r\n            this.onPointerClickObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n        }\r\n        this.onPointerUpObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (this.pointerUpAnimation) {\r\n            this.pointerUpAnimation();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public forcePointerUp(pointerId: Nullable<number> = null) {\r\n        if (pointerId !== null) {\r\n            this._onPointerUp(this, Vector3.Zero(), pointerId, 0, true);\r\n        } else {\r\n            for (var key in this._downPointerIds) {\r\n                this._onPointerUp(this, Vector3.Zero(), +key as number, 0, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processObservables(type: number, pickedPoint: Vector3, pointerId: number, buttonIndex: number): boolean {\r\n        if (type === PointerEventTypes.POINTERMOVE) {\r\n            this._onPointerMove(this, pickedPoint);\r\n\r\n            var previousControlOver = this._host._lastControlOver[pointerId];\r\n            if (previousControlOver && previousControlOver !== this) {\r\n                previousControlOver._onPointerOut(this);\r\n            }\r\n\r\n            if (previousControlOver !== this) {\r\n                this._onPointerEnter(this);\r\n            }\r\n\r\n            this._host._lastControlOver[pointerId] = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERDOWN) {\r\n            this._onPointerDown(this, pickedPoint, pointerId, buttonIndex);\r\n            this._host._lastControlDown[pointerId] = this;\r\n            this._host._lastPickedControl = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERUP) {\r\n            if (this._host._lastControlDown[pointerId]) {\r\n                this._host._lastControlDown[pointerId]._onPointerUp(this, pickedPoint, pointerId, buttonIndex, true);\r\n            }\r\n            delete this._host._lastControlDown[pointerId];\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _disposeNode(): void {\r\n        if (this._node) {\r\n            this._node.dispose();\r\n            this._node = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this.onPointerDownObservable.clear();\r\n        this.onPointerEnterObservable.clear();\r\n        this.onPointerMoveObservable.clear();\r\n        this.onPointerOutObservable.clear();\r\n        this.onPointerUpObservable.clear();\r\n        this.onPointerClickObservable.clear();\r\n\r\n        this._disposeNode();\r\n\r\n        // Behaviors\r\n        for (var behavior of this._behaviors) {\r\n            behavior.detach();\r\n        }\r\n    }\r\n}","import { AbstractButton3D } from \"./abstractButton3D\";\r\nimport { Material, Nullable, int, Color3, StandardMaterial, Texture, Scene, TransformNode, Vector4, MeshBuilder, AbstractMesh } from \"babylonjs\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport { Control } from \"../../2D/controls/control\";\r\n\r\n/**\r\n * Class used to create a button in 3D\r\n */\r\nexport class Button3D extends AbstractButton3D {\r\n    /** @hidden */\r\n    protected _currentMaterial: Material;\r\n    private _facadeTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _content: Control;\r\n    private _contentResolution = 512;\r\n    private _contentScaleRatio = 2;\r\n\r\n    /**\r\n     * Gets or sets the texture resolution used to render content (512 by default)\r\n     */\r\n    public get contentResolution(): int {\r\n        return this._contentResolution;\r\n    }\r\n\r\n    public set contentResolution(value: int) {\r\n        if (this._contentResolution === value) {\r\n            return;\r\n        }\r\n\r\n        this._contentResolution = value;\r\n        this._resetContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the texture scale ratio used to render content (2 by default)\r\n     */\r\n    public get contentScaleRatio(): number {\r\n        return this._contentScaleRatio;\r\n    }\r\n\r\n    public set contentScaleRatio(value: number) {\r\n        if (this._contentScaleRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._contentScaleRatio = value;\r\n        this._resetContent();\r\n    }\r\n\r\n    protected _disposeFacadeTexture() {\r\n        if (this._facadeTexture) {\r\n            this._facadeTexture.dispose();\r\n            this._facadeTexture = null;\r\n        }\r\n    }\r\n\r\n    protected _resetContent() {\r\n        this._disposeFacadeTexture();\r\n        this.content = this._content;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n\r\n        // Default animations\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Red();\r\n        }\r\n\r\n        this.pointerOutAnimation = () => {\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Black();\r\n        }\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        }\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the GUI 2D content used to display the button's facade\r\n     */\r\n    public get content(): Control {\r\n        return this._content;\r\n    }\r\n\r\n    public set content(value: Control) {\r\n        this._content = value;\r\n\r\n        if (!this._host || !this._host.utilityLayer) {\r\n            return;\r\n        }\r\n\r\n        if (!this._facadeTexture) {\r\n            this._facadeTexture = new AdvancedDynamicTexture(\"Facade\", this._contentResolution, this._contentResolution, this._host.utilityLayer.utilityLayerScene, true, Texture.TRILINEAR_SAMPLINGMODE);\r\n            this._facadeTexture.rootContainer.scaleX = this._contentScaleRatio;\r\n            this._facadeTexture.rootContainer.scaleY = this._contentScaleRatio;\r\n            this._facadeTexture.premulAlpha = true;\r\n        }\r\n\r\n        this._facadeTexture.addControl(value);\r\n\r\n        this._applyFacade(this._facadeTexture);\r\n    }\r\n\r\n    /**\r\n     * Apply the facade texture (created from the content property).\r\n     * This function can be overloaded by child classes\r\n     * @param facadeTexture defines the AdvancedDynamicTexture to use\r\n     */\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        (<any>this._currentMaterial).emissiveTexture = facadeTexture;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        var faceUV = new Array(6);\r\n\r\n        for (var i = 0; i < 6; i++) {\r\n            faceUV[i] = new Vector4(0, 0, 0, 0);\r\n        }\r\n        faceUV[1] = new Vector4(0, 0, 1, 1);\r\n\r\n        let mesh = MeshBuilder.CreateBox(this.name + \"_rootMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08,\r\n            faceUV: faceUV\r\n        }, scene);\r\n\r\n        return mesh;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        let material = new StandardMaterial(this.name + \"Material\", mesh.getScene());\r\n        material.specularColor = Color3.Black();\r\n\r\n        mesh.material = material;\r\n        this._currentMaterial = material;\r\n\r\n        this._resetContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._disposeFacadeTexture();\r\n\r\n        if (this._currentMaterial) {\r\n            this._currentMaterial.dispose();\r\n        }\r\n    }\r\n}","export * from \"./fluentMaterial\";","export * from \"./dataSeries\";\r\nexport * from \"./chart\";\r\nexport * from \"./barGraph\";\r\nexport * from \"./mapGraph\";","export * from \"./2D\";\r\nexport * from \"./3D\";","import { Rectangle } from \"./rectangle\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Image } from \"./image\";\r\nimport { Vector2 } from \"babylonjs\";\r\n\r\n/**\r\n * Class used to create 2D buttons\r\n */\r\nexport class Button extends Rectangle {\r\n    /**\r\n     * Function called to generate a pointer enter animation\r\n     */\r\n    public pointerEnterAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation\r\n     */\r\n    public pointerOutAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation\r\n     */\r\n    public pointerDownAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation\r\n     */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    /**\r\n     * Creates a new Button\r\n     * @param name defines the name of the button\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.thickness = 1;\r\n        this.isPointerBlocker = true;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            this.alpha -= 0.1;\r\n        }\r\n\r\n        this.pointerOutAnimation = () => {\r\n            this.alpha += 0.1;\r\n        }\r\n\r\n        this.pointerDownAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        }\r\n\r\n        this.pointerUpAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        }\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button\";\r\n    }\r\n\r\n    // While being a container, the button behaves like a control.\r\n    /** @hidden */\r\n    public _processPicking(x: number, y: number, type: number, pointerId: number, buttonIndex: number): boolean {\r\n        if (!this.isHitTestVisible || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        this._processObservables(type, x, y, pointerId, buttonIndex);\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerEnter(target: Control): boolean {\r\n        if (!super._onPointerEnter(target)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerOut(target: Control): void {\r\n        if (this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n\r\n        super._onPointerOut(target);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n\r\n        if (this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        if (this.pointerUpAnimation) {\r\n            this.pointerUpAnimation();\r\n        }\r\n\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates a new button made with an image and a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageButton(name: string, text: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        textBlock.paddingLeft = \"20%\";\r\n        result.addControl(textBlock);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.width = \"20%\";\r\n        iconImage.stretch = Image.STRETCH_UNIFORM;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image\r\n     * @param name defines the name of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageOnlyButton(name: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @returns a new Button\r\n     */\r\n    public static CreateSimpleButton(name: string, text: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image and a centered text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageWithCenterTextButton(name: string, text: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        result.addControl(iconImage);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        return result;\r\n    }\r\n}    ","import { Container } from \"./container\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/** Class used to create rectangle container */\r\nexport class Rectangle extends Container {\r\n    private _thickness = 1;\r\n    private _cornerRadius = 0;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius angle */\r\n    public get cornerRadius(): number {\r\n        return this._cornerRadius;\r\n    }\r\n\r\n    public set cornerRadius(value: number) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (this._cornerRadius === value) {\r\n            return;\r\n        }\r\n\r\n        this._cornerRadius = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Rectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Rectangle\";\r\n    }\r\n    \r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this._background) {\r\n            context.fillStyle = this._background;\r\n\r\n            if (this._cornerRadius) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.fill();\r\n            } else {\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        if (this._thickness) {\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (this.color) {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            if (this._cornerRadius) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.stroke();\r\n            } else {\r\n                context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2,\r\n                    this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness);\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    private _drawRoundedRect(context: CanvasRenderingContext2D, offset: number = 0): void {\r\n        var x = this._currentMeasure.left + offset;\r\n        var y = this._currentMeasure.top + offset;\r\n        var width = this._currentMeasure.width - offset * 2;\r\n        var height = this._currentMeasure.height - offset * 2;\r\n\r\n        var radius = Math.min(height / 2 - 2, Math.min(width / 2 - 2, this._cornerRadius));\r\n\r\n        context.beginPath();\r\n        context.moveTo(x + radius, y);\r\n        context.lineTo(x + width - radius, y);\r\n        context.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n        context.lineTo(x + width, y + height - radius);\r\n        context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n        context.lineTo(x + radius, y + height);\r\n        context.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n        context.lineTo(x, y + radius);\r\n        context.quadraticCurveTo(x, y, x + radius, y);\r\n        context.closePath();\r\n    }\r\n\r\n    protected _clipForChildren(context: CanvasRenderingContext2D) {\r\n        if (this._cornerRadius) {\r\n            this._drawRoundedRect(context, this._thickness);\r\n            context.clip();\r\n        }\r\n    }\r\n}    ","import { Vector2, Epsilon, Nullable } from \"babylonjs\";\r\n\r\n/**\r\n * Class used to transport Vector2 information for pointer events\r\n */\r\nexport class Vector2WithInfo extends Vector2 {\r\n    /**\r\n     * Creates a new Vector2WithInfo\r\n     * @param source defines the vector2 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(source: Vector2,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0) {\r\n        super(source.x, source.y);\r\n    }\r\n}\r\n\r\n/** Class used to provide 2D matrix features */\r\nexport class Matrix2D {\r\n    /** Gets the internal array of 6 floats used to store matrix data */\r\n    public m = new Float32Array(6);\r\n\r\n    /**\r\n     * Creates a new matrix\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1) \r\n     * @param m10 defines value for (1, 0) \r\n     * @param m11 defines value for (1, 1) \r\n     * @param m20 defines value for (2, 0) \r\n     * @param m21 defines value for (2, 1) \r\n     */\r\n    constructor(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number) {\r\n        this.fromValues(m00, m01, m10, m11, m20, m21);\r\n    }\r\n\r\n    /**\r\n     * Fills the matrix from direct values\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1)\r\n     * @param m10 defines value for (1, 0)\r\n     * @param m11 defines value for (1, 1)\r\n     * @param m20 defines value for (2, 0)\r\n     * @param m21 defines value for (2, 1)\r\n     * @returns the current modified matrix\r\n     */\r\n    public fromValues(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number): Matrix2D {\r\n        this.m[0] = m00; this.m[1] = m01;\r\n        this.m[2] = m10; this.m[3] = m11;\r\n        this.m[4] = m20; this.m[5] = m21;\r\n        return this;\r\n    }\r\n\r\n    /** \r\n     * Gets matrix determinant\r\n     * @returns the determinant\r\n     */\r\n    public determinant(): number {\r\n        return this.m[0] * this.m[3] - this.m[1] * this.m[2];\r\n    }\r\n\r\n    /**\r\n     * Inverses the matrix and stores it in a target matrix\r\n     * @param result defines the target matrix\r\n     * @returns the current matrix\r\n     */\r\n    public invertToRef(result: Matrix2D): Matrix2D {\r\n        let l0 = this.m[0]; let l1 = this.m[1];\r\n        let l2 = this.m[2]; let l3 = this.m[3];\r\n        let l4 = this.m[4]; let l5 = this.m[5];\r\n\r\n        let det = this.determinant();\r\n        if (det < (Epsilon * Epsilon)) {\r\n            result.m[0] = 0; result.m[1] = 0;\r\n            result.m[2] = 0; result.m[3] = 0;\r\n            result.m[4] = 0; result.m[5] = 0;\r\n            return this;\r\n        }\r\n\r\n        let detDiv = 1 / det;\r\n\r\n        let det4 = l2 * l5 - l3 * l4;\r\n        let det5 = l1 * l4 - l0 * l5;\r\n\r\n        result.m[0] = l3 * detDiv; result.m[1] = -l1 * detDiv;\r\n        result.m[2] = -l2 * detDiv; result.m[3] = l0 * detDiv;\r\n        result.m[4] = det4 * detDiv; result.m[5] = det5 * detDiv;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies the current matrix with another one\r\n     * @param other defines the second operand\r\n     * @param result defines the target matrix \r\n     * @returns the current matrix\r\n     */\r\n    public multiplyToRef(other: Matrix2D, result: Matrix2D): Matrix2D {\r\n        let l0 = this.m[0]; let l1 = this.m[1];\r\n        let l2 = this.m[2]; let l3 = this.m[3];\r\n        let l4 = this.m[4]; let l5 = this.m[5];\r\n\r\n        let r0 = other.m[0]; let r1 = other.m[1];\r\n        let r2 = other.m[2]; let r3 = other.m[3];\r\n        let r4 = other.m[4]; let r5 = other.m[5];\r\n\r\n        result.m[0] = l0 * r0 + l1 * r2; result.m[1] = l0 * r1 + l1 * r3;\r\n        result.m[2] = l2 * r0 + l3 * r2; result.m[3] = l2 * r1 + l3 * r3;\r\n        result.m[4] = l4 * r0 + l5 * r2 + r4; result.m[5] = l4 * r1 + l5 * r3 + r5;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Applies the current matrix to a set of 2 floats and stores the result in a vector2\r\n     * @param x defines the x coordinate to transform\r\n     * @param y defines the x coordinate to transform \r\n     * @param result defines the target vector2 \r\n     * @returns the current matrix\r\n     */\r\n    public transformCoordinates(x: number, y: number, result: Vector2): Matrix2D {\r\n        result.x = x * this.m[0] + y * this.m[2] + this.m[4];\r\n        result.y = x * this.m[1] + y * this.m[3] + this.m[5];\r\n\r\n        return this;\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates an identity matrix\r\n     * @returns a new matrix\r\n     */\r\n    public static Identity(): Matrix2D {\r\n        return new Matrix2D(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a translation matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the translation\r\n     * @param y defines the y coordinate of the translation \r\n     * @param result defines the target matrix\r\n     */\r\n    public static TranslationToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(1, 0, 0, 1, x, y);\r\n    }\r\n\r\n    /**\r\n     * Creates a scaling matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the scaling\r\n     * @param y defines the y coordinate of the scaling \r\n     * @param result defines the target matrix\r\n     */\r\n    public static ScalingToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(x, 0, 0, y, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a rotation matrix and stores it in a target matrix\r\n     * @param angle defines the rotation angle\r\n     * @param result defines the target matrix\r\n     */\r\n    public static RotationToRef(angle: number, result: Matrix2D): void {\r\n        var s = Math.sin(angle);\r\n        var c = Math.cos(angle);\r\n\r\n        result.fromValues(c, s, -s, c, 0, 0);\r\n    }\r\n\r\n    private static _TempPreTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempPostTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempRotationMatrix = Matrix2D.Identity();\r\n    private static _TempScalingMatrix = Matrix2D.Identity();\r\n    private static _TempCompose0 = Matrix2D.Identity();\r\n    private static _TempCompose1 = Matrix2D.Identity();\r\n    private static _TempCompose2 = Matrix2D.Identity();\r\n\r\n    /**\r\n     * Composes a matrix from translation, rotation, scaling and parent matrix and stores it in a target matrix \r\n     * @param tx defines the x coordinate of the translation\r\n     * @param ty defines the y coordinate of the translation \r\n     * @param angle defines the rotation angle \r\n     * @param scaleX defines the x coordinate of the scaling\r\n     * @param scaleY defines the y coordinate of the scaling \r\n     * @param parentMatrix defines the parent matrix to multiply by (can be null)\r\n     * @param result defines the target matrix \r\n     */\r\n    public static ComposeToRef(tx: number, ty: number, angle: number, scaleX: number, scaleY: number, parentMatrix: Nullable<Matrix2D>, result: Matrix2D): void {\r\n        Matrix2D.TranslationToRef(tx, ty, Matrix2D._TempPreTranslationMatrix);\r\n\r\n        Matrix2D.ScalingToRef(scaleX, scaleY, Matrix2D._TempScalingMatrix);\r\n\r\n        Matrix2D.RotationToRef(angle, Matrix2D._TempRotationMatrix);\r\n\r\n        Matrix2D.TranslationToRef(-tx, -ty, Matrix2D._TempPostTranslationMatrix);\r\n\r\n        Matrix2D._TempPreTranslationMatrix.multiplyToRef(Matrix2D._TempScalingMatrix, Matrix2D._TempCompose0);\r\n        Matrix2D._TempCompose0.multiplyToRef(Matrix2D._TempRotationMatrix, Matrix2D._TempCompose1);\r\n        if (parentMatrix) {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, Matrix2D._TempCompose2);\r\n            Matrix2D._TempCompose2.multiplyToRef(parentMatrix, result);\r\n        } else {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, result);\r\n        }\r\n    }\r\n}   ","import { Control } from \"./control\";\r\nimport { IFocusableControl } from \"../advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Nullable, Observable, Vector2 } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/**\r\n * Class used to create input text control\r\n */\r\nexport class InputText extends Control implements IFocusableControl {\r\n    private _text = \"\";\r\n    private _placeholderText = \"\";\r\n    private _background = \"#222222\";\r\n    private _focusedBackground = \"#000000\";\r\n    private _placeholderColor = \"gray\";\r\n    private _thickness = 1;\r\n    private _margin = new ValueAndUnit(10, ValueAndUnit.UNITMODE_PIXEL);\r\n    private _autoStretchWidth = true;\r\n    private _maxWidth = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\r\n    private _isFocused = false;\r\n    private _blinkTimeout: number;\r\n    private _blinkIsEven = false;\r\n    private _cursorOffset = 0;\r\n    private _scrollLeft: Nullable<number>;\r\n    private _textWidth: number;\r\n    private _clickedCoordinate: Nullable<number>;\r\n    private _deadKey = false;\r\n    private _addKey = true;\r\n    private _currentKey = \"\";\r\n\r\n    /** Gets or sets a string representing the message displayed on mobile when the control gets the focus */\r\n    public promptMessage = \"Please enter text:\";\r\n\r\n    /** Observable raised when the text changes */\r\n    public onTextChangedObservable = new Observable<InputText>();\r\n    /** Observable raised just before an entered character is to be added */\r\n    public onBeforeKeyAddObservable = new Observable<InputText>();\r\n    /** Observable raised when the control gets the focus */\r\n    public onFocusObservable = new Observable<InputText>();\r\n    /** Observable raised when the control loses the focus */\r\n    public onBlurObservable = new Observable<InputText>();\r\n\r\n    /** Gets or sets the maximum width allowed by the control */\r\n    public get maxWidth(): string | number {\r\n        return this._maxWidth.toString(this._host);\r\n    }\r\n\r\n    /** Gets the maximum width allowed by the control in pixels */\r\n    public get maxWidthInPixels(): number {\r\n        return this._maxWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set maxWidth(value: string | number) {\r\n        if (this._maxWidth.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._maxWidth.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets control margin */\r\n    public get margin(): string {\r\n        return this._margin.toString(this._host);\r\n    }\r\n\r\n    /** Gets control margin in pixels */\r\n    public get marginInPixels(): number {\r\n        return this._margin.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set margin(value: string) {\r\n        if (this._margin.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._margin.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control can auto stretch its width to adapt to the text */\r\n    public get autoStretchWidth(): boolean {\r\n        return this._autoStretchWidth;\r\n    }\r\n\r\n    public set autoStretchWidth(value: boolean) {\r\n        if (this._autoStretchWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoStretchWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the background color when focused */\r\n    public get focusedBackground(): string {\r\n        return this._focusedBackground;\r\n    }\r\n\r\n    public set focusedBackground(value: string) {\r\n        if (this._focusedBackground === value) {\r\n            return;\r\n        }\r\n\r\n        this._focusedBackground = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the placeholder color */\r\n    public get placeholderColor(): string {\r\n        return this._placeholderColor;\r\n    }\r\n\r\n    public set placeholderColor(value: string) {\r\n        if (this._placeholderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._placeholderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the text displayed when the control is empty */\r\n    public get placeholderText(): string {\r\n        return this._placeholderText;\r\n    }\r\n\r\n    public set placeholderText(value: string) {\r\n        if (this._placeholderText === value) {\r\n            return;\r\n        }\r\n        this._placeholderText = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the dead key flag */\r\n    public get deadKey(): boolean {\r\n        return this._deadKey;\r\n    }\r\n\r\n    public set deadKey(flag: boolean) {\r\n        this._deadKey = flag;\r\n    }\r\n\r\n    /** Gets or sets if the current key should be added */\r\n    public get addKey(): boolean {\r\n        return this._addKey;\r\n    }\r\n\r\n    public set addKey(flag: boolean) {\r\n        this._addKey = flag;\r\n    }\r\n\r\n    /** Gets or sets the value of the current key being entered */\r\n    public get currentKey(): string {\r\n        return this._currentKey;\r\n    }\r\n\r\n    public set currentKey(key: string) {\r\n        this._currentKey = key;\r\n    }\r\n\r\n    /** Gets or sets the text displayed in the control */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n        this._text = value;\r\n        this._markAsDirty();\r\n\r\n        this.onTextChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Gets or sets control width */\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    public set width(value: string | number) {\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n\r\n        this.autoStretchWidth = false;\r\n    }\r\n\r\n    /**\r\n     * Creates a new InputText\r\n     * @param name defines the control name\r\n     * @param text defines the text of the control\r\n     */\r\n    constructor(public name?: string, text: string = \"\") {\r\n        super(name);\r\n\r\n        this.text = text;\r\n    }\r\n\r\n    /** @hidden */\r\n    public onBlur(): void {\r\n        this._isFocused = false;\r\n        this._scrollLeft = null;\r\n        this._cursorOffset = 0;\r\n        clearTimeout(this._blinkTimeout);\r\n        this._markAsDirty();\r\n\r\n        this.onBlurObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** @hidden */\r\n    public onFocus(): void {\r\n        this._scrollLeft = null;\r\n        this._isFocused = true;\r\n        this._blinkIsEven = false;\r\n        this._cursorOffset = 0;\r\n        this._markAsDirty();\r\n\r\n        this.onFocusObservable.notifyObservers(this);\r\n\r\n        if (navigator.userAgent.indexOf(\"Mobile\") !== -1) {\r\n            let value = prompt(this.promptMessage);\r\n\r\n            if (value !== null) {\r\n                this.text = value;\r\n            }\r\n            this._host.focusedControl = null;\r\n            return;\r\n        }\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"InputText\";\r\n    }\r\n\r\n    /** @hidden */\r\n    public processKey(keyCode: number, key?: string) {\r\n        // Specific cases\r\n        switch (keyCode) {\r\n            case 32: //SPACE\r\n                key = \" \"; //ie11 key for space is \"Spacebar\"\r\n                break;\r\n            case 8: // BACKSPACE\r\n                if (this._text && this._text.length > 0) {\r\n                    if (this._cursorOffset === 0) {\r\n                        this.text = this._text.substr(0, this._text.length - 1);\r\n                    } else {\r\n                        let deletePosition = this._text.length - this._cursorOffset;\r\n                        if (deletePosition > 0) {\r\n                            this.text = this._text.slice(0, deletePosition - 1) + this._text.slice(deletePosition);\r\n                        }\r\n                    }\r\n                }\r\n                return;\r\n            case 46: // DELETE\r\n                if (this._text && this._text.length > 0) {\r\n                    let deletePosition = this._text.length - this._cursorOffset;\r\n                    this.text = this._text.slice(0, deletePosition) + this._text.slice(deletePosition + 1);\r\n                    this._cursorOffset--;\r\n                }\r\n                return;\r\n            case 13: // RETURN\r\n                this._host.focusedControl = null;\r\n                return;\r\n            case 35: // END\r\n                this._cursorOffset = 0;\r\n                this._blinkIsEven = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 36: // HOME\r\n                this._cursorOffset = this._text.length;\r\n                this._blinkIsEven = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 37: // LEFT\r\n                this._cursorOffset++;\r\n                if (this._cursorOffset > this._text.length) {\r\n                    this._cursorOffset = this._text.length;\r\n                }\r\n                this._blinkIsEven = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 39: // RIGHT\r\n                this._cursorOffset--;\r\n                if (this._cursorOffset < 0) {\r\n                    this._cursorOffset = 0;\r\n                }\r\n                this._blinkIsEven = false;\r\n                this._markAsDirty();\r\n                return;\r\n            case 222: // Dead\r\n                this.deadKey = true;\r\n                return;\r\n        }\r\n\r\n        // Printable characters\r\n        if (key &&\r\n            ((keyCode === -1) ||                     // Direct access\r\n                (keyCode === 32) ||                     // Space\r\n                (keyCode > 47 && keyCode < 58) ||       // Numbers\r\n                (keyCode > 64 && keyCode < 91) ||       // Letters\r\n                (keyCode > 185 && keyCode < 193) ||     // Special characters\r\n                (keyCode > 218 && keyCode < 223) ||     // Special characters\r\n                (keyCode > 95 && keyCode < 112))) {     // Numpad\r\n            this._currentKey = key;\r\n            this.onBeforeKeyAddObservable.notifyObservers(this);\r\n            key = this._currentKey;\r\n            if (this._addKey) {\r\n                if (this._cursorOffset === 0) {\r\n                    this.text += key;\r\n                } else {\r\n                    let insertPosition = this._text.length - this._cursorOffset;\r\n\r\n                    this.text = this._text.slice(0, insertPosition) + key + this._text.slice(insertPosition);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public processKeyboard(evt: KeyboardEvent): void {\r\n        this.processKey(evt.keyCode, evt.key);\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            // Background\r\n            if (this._isFocused) {\r\n                if (this._focusedBackground) {\r\n                    context.fillStyle = this._focusedBackground;\r\n\r\n                    context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                }\r\n            } else if (this._background) {\r\n                context.fillStyle = this._background;\r\n\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (!this._fontOffset) {\r\n                this._fontOffset = Control._GetFontOffset(context.font);\r\n            }\r\n\r\n            // Text\r\n            let clipTextLeft = this._currentMeasure.left + this._margin.getValueInPixel(this._host, parentMeasure.width);\r\n            if (this.color) {\r\n                context.fillStyle = this.color;\r\n            }\r\n\r\n            let text = this._beforeRenderText(this._text);\r\n\r\n            if (!this._isFocused && !this._text && this._placeholderText) {\r\n                text = this._placeholderText;\r\n\r\n                if (this._placeholderColor) {\r\n                    context.fillStyle = this._placeholderColor;\r\n                }\r\n            }\r\n\r\n            this._textWidth = context.measureText(text).width;\r\n            let marginWidth = this._margin.getValueInPixel(this._host, parentMeasure.width) * 2;\r\n            if (this._autoStretchWidth) {\r\n                this.width = Math.min(this._maxWidth.getValueInPixel(this._host, parentMeasure.width), this._textWidth + marginWidth) + \"px\";\r\n            }\r\n\r\n            let rootY = this._fontOffset.ascent + (this._currentMeasure.height - this._fontOffset.height) / 2;\r\n            let availableWidth = this._width.getValueInPixel(this._host, parentMeasure.width) - marginWidth;\r\n            context.save();\r\n            context.beginPath();\r\n            context.rect(clipTextLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, availableWidth + 2, this._currentMeasure.height);\r\n            context.clip();\r\n\r\n            if (this._isFocused && this._textWidth > availableWidth) {\r\n                let textLeft = clipTextLeft - this._textWidth + availableWidth;\r\n                if (!this._scrollLeft) {\r\n                    this._scrollLeft = textLeft;\r\n                }\r\n            } else {\r\n                this._scrollLeft = clipTextLeft;\r\n            }\r\n\r\n            context.fillText(text, this._scrollLeft, this._currentMeasure.top + rootY);\r\n\r\n            // Cursor\r\n            if (this._isFocused) {\r\n\r\n                // Need to move cursor\r\n                if (this._clickedCoordinate) {\r\n                    var rightPosition = this._scrollLeft + this._textWidth;\r\n                    var absoluteCursorPosition = rightPosition - this._clickedCoordinate;\r\n                    var currentSize = 0;\r\n                    this._cursorOffset = 0;\r\n                    var previousDist = 0;\r\n                    do {\r\n                        if (this._cursorOffset) {\r\n                            previousDist = Math.abs(absoluteCursorPosition - currentSize);\r\n                        }\r\n                        this._cursorOffset++;\r\n                        currentSize = context.measureText(text.substr(text.length - this._cursorOffset, this._cursorOffset)).width;\r\n\r\n                    } while (currentSize < absoluteCursorPosition && (text.length >= this._cursorOffset));\r\n\r\n                    // Find closest move\r\n                    if (Math.abs(absoluteCursorPosition - currentSize) > previousDist) {\r\n                        this._cursorOffset--;\r\n                    }\r\n\r\n                    this._blinkIsEven = false;\r\n                    this._clickedCoordinate = null;\r\n                }\r\n\r\n                // Render cursor\r\n                if (!this._blinkIsEven) {\r\n                    let cursorOffsetText = this.text.substr(this._text.length - this._cursorOffset);\r\n                    let cursorOffsetWidth = context.measureText(cursorOffsetText).width;\r\n                    let cursorLeft = this._scrollLeft + this._textWidth - cursorOffsetWidth;\r\n\r\n                    if (cursorLeft < clipTextLeft) {\r\n                        this._scrollLeft += (clipTextLeft - cursorLeft);\r\n                        cursorLeft = clipTextLeft;\r\n                        this._markAsDirty();\r\n                    } else if (cursorLeft > clipTextLeft + availableWidth) {\r\n                        this._scrollLeft += (clipTextLeft + availableWidth - cursorLeft);\r\n                        cursorLeft = clipTextLeft + availableWidth;\r\n                        this._markAsDirty();\r\n                    }\r\n                    context.fillRect(cursorLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, 2, this._fontOffset.height);\r\n                }\r\n\r\n                clearTimeout(this._blinkTimeout);\r\n                this._blinkTimeout = <any>setTimeout(() => {\r\n                    this._blinkIsEven = !this._blinkIsEven;\r\n                    this._markAsDirty();\r\n                }, 500);\r\n            }\r\n\r\n            context.restore();\r\n\r\n            // Border\r\n            if (this._thickness) {\r\n                if (this.color) {\r\n                    context.strokeStyle = this.color;\r\n                }\r\n                context.lineWidth = this._thickness;\r\n\r\n                context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2,\r\n                    this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness);\r\n            }\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n        this._clickedCoordinate = coordinates.x;\r\n        if (this._host.focusedControl === this) {\r\n            // Move cursor\r\n            clearTimeout(this._blinkTimeout);\r\n            this._markAsDirty();\r\n            return true;\r\n        }\r\n        this._host.focusedControl = this;\r\n\r\n        return true;\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n\r\n    protected _beforeRenderText(text: string): string {\r\n        return text;\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this.onBlurObservable.clear();\r\n        this.onFocusObservable.clear();\r\n        this.onTextChangedObservable.clear();\r\n    }\r\n}\r\n","import { MultiLine } from \"./controls/multiLine\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\nimport { Control } from \"./controls/control\";\r\nimport { AbstractMesh, Nullable, Observer, Camera, Vector2 } from \"babylonjs\";\r\n\r\n\r\n/**\r\n * Class used to store a point for a MultiLine object.\r\n * The point can be pure 2D coordinates, a mesh or a control\r\n */\r\nexport class MultiLinePoint {\r\n\r\n    private _multiLine: MultiLine;\r\n\r\n    private _x: ValueAndUnit;\r\n    private _y: ValueAndUnit;\r\n    private _control: Nullable<Control>;\r\n    private _mesh: Nullable<AbstractMesh>;\r\n\r\n    private _controlObserver: Nullable<Observer<Control>>;\r\n    private _meshObserver: Nullable<Observer<Camera>>;\r\n\r\n    /** @hidden */\r\n    public _point: Vector2;\r\n\r\n    /**\r\n     * Creates a new MultiLinePoint\r\n     * @param multiLine defines the source MultiLine object\r\n     */\r\n    constructor(multiLine: MultiLine) {\r\n        this._multiLine = multiLine;\r\n\r\n        this._x = new ValueAndUnit(0);\r\n        this._y = new ValueAndUnit(0);\r\n\r\n        this._point = new Vector2(0, 0);\r\n    }\r\n\r\n    /** Gets or sets x coordinate */\r\n    public get x(): string | number {\r\n        return this._x.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set x(value: string | number) {\r\n        if (this._x.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets y coordinate */\r\n    public get y(): string | number {\r\n        return this._y.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set y(value: string | number) {\r\n        if (this._y.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the control associated with this point */\r\n    public get control(): Nullable<Control> {\r\n        return this._control;\r\n    }\r\n\r\n    public set control(value: Nullable<Control>) {\r\n        if (this._control === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._control && this._controlObserver) {\r\n            this._control.onDirtyObservable.remove(this._controlObserver);\r\n\r\n            this._controlObserver = null;\r\n        }\r\n\r\n        this._control = value;\r\n\r\n        if (this._control) {\r\n            this._controlObserver = this._control.onDirtyObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the mesh associated with this point */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        return this._mesh;\r\n    }\r\n\r\n    public set mesh(value: Nullable<AbstractMesh>) {\r\n        if (this._mesh === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._mesh && this._meshObserver) {\r\n            this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver);\r\n        }\r\n\r\n        this._mesh = value;\r\n\r\n        if (this._mesh) {\r\n            this._meshObserver = this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** \r\n     * Gets a translation vector\r\n     * @returns the translation vector\r\n     */\r\n    public translate(): Vector2 {\r\n        this._point = this._translatePoint();\r\n\r\n        return this._point;\r\n    }\r\n\r\n    private _translatePoint(): Vector2 {\r\n        if (this._mesh != null) {\r\n            return this._multiLine._host.getProjectedPosition(this._mesh.getBoundingInfo().boundingSphere.center, this._mesh.getWorldMatrix());\r\n        }\r\n        else if (this._control != null) {\r\n            return new Vector2(this._control.centerX, this._control.centerY);\r\n        }\r\n        else {\r\n            var host: any = this._multiLine._host as any;\r\n\r\n            var xValue: number = this._x.getValueInPixel(host, Number(host._canvas.width));\r\n            var yValue: number = this._y.getValueInPixel(host, Number(host._canvas.height));\r\n\r\n            return new Vector2(xValue, yValue);\r\n        }\r\n    }\r\n\r\n    /** Release associated resources */\r\n    public dispose(): void {\r\n        this.control = null;\r\n        this.mesh = null;\r\n    }\r\n\r\n}\r\n","import { DynamicTexture, Nullable, Observer, Camera, Engine, KeyboardInfoPre, PointerInfoPre, PointerInfo, Layer, Viewport, Scene, Texture, KeyboardEventTypes, Vector3, Matrix, Vector2, Tools, PointerEventTypes, AbstractMesh, StandardMaterial, Color3 } from \"babylonjs\";\r\nimport { Container } from \"./controls/container\";\r\nimport { Control } from \"./controls/control\";\r\nimport { Style } from \"./style\";\r\nimport { Measure } from \"./measure\";\r\n\r\n/**\r\n * Interface used to define a control that can receive focus\r\n */\r\nexport interface IFocusableControl {\r\n    /**\r\n     * Function called when the control receives the focus\r\n     */\r\n    onFocus(): void;\r\n    /**\r\n     * Function called when the control loses the focus\r\n     */\r\n    onBlur(): void;\r\n    /**\r\n     * Function called to let the control handle keyboard events\r\n     * @param evt defines the current keyboard event\r\n     */\r\n    processKeyboard(evt: KeyboardEvent): void;\r\n}\r\n\r\n/**\r\n * Class used to create texture to support 2D GUI elements\r\n * @see http://doc.babylonjs.com/how_to/gui\r\n */\r\nexport class AdvancedDynamicTexture extends DynamicTexture {\r\n    private _isDirty = false;\r\n    private _renderObserver: Nullable<Observer<Camera>>;\r\n    private _resizeObserver: Nullable<Observer<Engine>>;\r\n    private _preKeyboardObserver: Nullable<Observer<KeyboardInfoPre>>;\r\n    private _pointerMoveObserver: Nullable<Observer<PointerInfoPre>>;\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    private _canvasPointerOutObserver: Nullable<Observer<PointerEvent>>;\r\n    private _background: string;\r\n    /** @hidden */\r\n    public _rootContainer = new Container(\"root\");\r\n    /** @hidden */\r\n    public _lastPickedControl: Control;\r\n    /** @hidden */\r\n    public _lastControlOver: { [pointerId: number]: Control } = {};\r\n    /** @hidden */\r\n    public _lastControlDown: { [pointerId: number]: Control } = {};\r\n    /** @hidden */\r\n    public _capturingControl: { [pointerId: number]: Control } = {};\r\n    /** @hidden */\r\n    public _shouldBlockPointer: boolean;\r\n    /** @hidden */\r\n    public _layerToDispose: Nullable<Layer>;\r\n    /** @hidden */\r\n    public _linkedControls = new Array<Control>();\r\n    private _isFullscreen = false;\r\n    private _fullscreenViewport = new Viewport(0, 0, 1, 1);\r\n    private _idealWidth = 0;\r\n    private _idealHeight = 0;\r\n    private _useSmallestIdeal: boolean = false;\r\n    private _renderAtIdealSize = false;\r\n    private _focusedControl: Nullable<IFocusableControl>;\r\n    private _blockNextFocusCheck = false;\r\n    private _renderScale = 1;\r\n    private _rootCanvas: Nullable<HTMLCanvasElement>;\r\n\r\n    /**\r\n     * Gets or sets a boolean defining if alpha is stored as premultiplied\r\n     */\r\n    public premulAlpha = false;\r\n\r\n    /**\r\n     * Gets or sets a number used to scale rendering size (2 means that the texture will be twice bigger).\r\n     * Useful when you want more antialiasing\r\n     */\r\n    public get renderScale(): number {\r\n        return this._renderScale;\r\n    }\r\n\r\n    public set renderScale(value: number) {\r\n        if (value === this._renderScale) {\r\n            return;\r\n        }\r\n\r\n        this._renderScale = value;\r\n\r\n        this._onResize();\r\n    }\r\n\r\n    /** Gets or sets the background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this.markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the ideal width used to design controls.\r\n     * The GUI will then rescale everything accordingly\r\n     * @see http://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public get idealWidth(): number {\r\n        return this._idealWidth;\r\n    }\r\n\r\n    public set idealWidth(value: number) {\r\n        if (this._idealWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._idealWidth = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the ideal height used to design controls.\r\n     * The GUI will then rescale everything accordingly\r\n     * @see http://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public get idealHeight(): number {\r\n        return this._idealHeight;\r\n    }\r\n\r\n    public set idealHeight(value: number) {\r\n        if (this._idealHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._idealHeight = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the smallest ideal value must be used if idealWidth and idealHeight are both set\r\n     * @see http://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public get useSmallestIdeal(): boolean {\r\n        return this._useSmallestIdeal;\r\n    }\r\n\r\n    public set useSmallestIdeal(value: boolean) {\r\n        if (this._useSmallestIdeal === value) {\r\n            return;\r\n        }\r\n\r\n        this._useSmallestIdeal = value;\r\n        this.markAsDirty();\r\n        this._rootContainer._markAllAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if adaptive scaling must be used\r\n     * @see http://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public get renderAtIdealSize(): boolean {\r\n        return this._renderAtIdealSize;\r\n    }\r\n\r\n    public set renderAtIdealSize(value: boolean) {\r\n        if (this._renderAtIdealSize === value) {\r\n            return;\r\n        }\r\n\r\n        this._renderAtIdealSize = value;\r\n        this._onResize();\r\n    }\r\n\r\n    /**\r\n     * Gets the underlying layer used to render the texture when in fullscreen mode\r\n     */\r\n    public get layer(): Nullable<Layer> {\r\n        return this._layerToDispose;\r\n    }\r\n\r\n    /**\r\n     * Gets the root container control\r\n     */\r\n    public get rootContainer(): Container {\r\n        return this._rootContainer;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the current focused control\r\n     */\r\n    public get focusedControl(): Nullable<IFocusableControl> {\r\n        return this._focusedControl;\r\n    }\r\n\r\n    public set focusedControl(control: Nullable<IFocusableControl>) {\r\n        if (this._focusedControl == control) {\r\n            return;\r\n        }\r\n\r\n        if (this._focusedControl) {\r\n            this._focusedControl.onBlur();\r\n        }\r\n\r\n        if (control) {\r\n            control.onFocus();\r\n        }\r\n\r\n        this._focusedControl = control;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the texture must be rendered in background or foreground when in fullscreen mode\r\n     */\r\n    public get isForeground(): boolean {\r\n        if (!this.layer) {\r\n            return true;\r\n        }\r\n        return (!this.layer.isBackground);\r\n    }\r\n\r\n    public set isForeground(value: boolean) {\r\n        if (!this.layer) {\r\n            return;\r\n        }\r\n        if (this.layer.isBackground === !value) {\r\n            return;\r\n        }\r\n        this.layer.isBackground = !value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture\r\n     * @param name defines the name of the texture\r\n     * @param width defines the width of the texture\r\n     * @param height defines the height of the texture\r\n     * @param scene defines the hosting scene\r\n     * @param generateMipMaps defines a boolean indicating if mipmaps must be generated (false by default)\r\n     * @param samplingMode defines the texture sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\r\n     */\r\n    constructor(name: string, width = 0, height = 0, scene: Nullable<Scene>, generateMipMaps = false, samplingMode = Texture.NEAREST_SAMPLINGMODE) {\r\n        super(name, { width: width, height: height }, scene, generateMipMaps, samplingMode, Engine.TEXTUREFORMAT_RGBA);\r\n\r\n        scene = this.getScene();\r\n\r\n        if (!scene || !this._texture) {\r\n            return;\r\n        }\r\n\r\n        this._rootCanvas = scene.getEngine()!.getRenderingCanvas()!;\r\n\r\n        this._renderObserver = scene.onBeforeCameraRenderObservable.add((camera: Camera) => this._checkUpdate(camera));\r\n        this._preKeyboardObserver = scene.onPreKeyboardObservable.add(info => {\r\n            if (!this._focusedControl) {\r\n                return;\r\n            }\r\n\r\n            if (info.type === KeyboardEventTypes.KEYDOWN) {\r\n                this._focusedControl.processKeyboard(info.event);\r\n            }\r\n\r\n            info.skipOnPointerObservable = true;\r\n        });\r\n\r\n        this._rootContainer._link(null, this);\r\n\r\n        this.hasAlpha = true;\r\n\r\n        if (!width || !height) {\r\n            this._resizeObserver = scene.getEngine().onResizeObservable.add(() => this._onResize());\r\n            this._onResize();\r\n        }\r\n\r\n        this._texture.isReady = true;\r\n    }\r\n\r\n    /**\r\n     * Function used to execute a function on all controls\r\n     * @param func defines the function to execute\r\n     * @param container defines the container where controls belong. If null the root container will be used\r\n     */\r\n    public executeOnAllControls(func: (control: Control) => void, container?: Container) {\r\n        if (!container) {\r\n            container = this._rootContainer;\r\n        }\r\n\r\n        func(container);\r\n\r\n        for (var child of container.children) {\r\n            if ((<any>child).children) {\r\n                this.executeOnAllControls(func, (<Container>child));\r\n                continue;\r\n            }\r\n            func(child);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Marks the texture as dirty forcing a complete update\r\n     */\r\n    public markAsDirty() {\r\n        this._isDirty = true;\r\n\r\n        this.executeOnAllControls((control) => {\r\n            if (control._isFontSizeInPercentage) {\r\n                control._resetFontCache();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Helper function used to create a new style\r\n     * @returns a new style\r\n     * @see http://doc.babylonjs.com/how_to/gui#styles\r\n     */\r\n    public createStyle(): Style {\r\n        return new Style(this);\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the root container\r\n     * @param control defines the control to add\r\n     * @returns the current texture\r\n     */\r\n    public addControl(control: Control): AdvancedDynamicTexture {\r\n        this._rootContainer.addControl(control);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the root container\r\n     * @param control defines the control to remove\r\n     * @returns the current texture\r\n     */\r\n    public removeControl(control: Control): AdvancedDynamicTexture {\r\n        this._rootContainer.removeControl(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        let scene = this.getScene();\r\n\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        this._rootCanvas = null;\r\n\r\n        scene.onBeforeCameraRenderObservable.remove(this._renderObserver);\r\n\r\n        if (this._resizeObserver) {\r\n            scene.getEngine().onResizeObservable.remove(this._resizeObserver);\r\n        }\r\n\r\n        if (this._pointerMoveObserver) {\r\n            scene.onPrePointerObservable.remove(this._pointerMoveObserver);\r\n        }\r\n\r\n        if (this._pointerObserver) {\r\n            scene.onPointerObservable.remove(this._pointerObserver);\r\n        }\r\n\r\n        if (this._preKeyboardObserver) {\r\n            scene.onPreKeyboardObservable.remove(this._preKeyboardObserver);\r\n        }\r\n\r\n        if (this._canvasPointerOutObserver) {\r\n            scene.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver);\r\n        }\r\n\r\n        if (this._layerToDispose) {\r\n            this._layerToDispose.texture = null;\r\n            this._layerToDispose.dispose();\r\n            this._layerToDispose = null;\r\n        }\r\n\r\n        this._rootContainer.dispose();\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    private _onResize(): void {\r\n        let scene = this.getScene();\r\n\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        // Check size\r\n        var engine = scene.getEngine();\r\n        var textureSize = this.getSize();\r\n        var renderWidth = engine.getRenderWidth() * this._renderScale;\r\n        var renderHeight = engine.getRenderHeight() * this._renderScale;\r\n\r\n        if (this._renderAtIdealSize) {\r\n            if (this._idealWidth) {\r\n                renderHeight = (renderHeight * this._idealWidth) / renderWidth;\r\n                renderWidth = this._idealWidth;\r\n            } else if (this._idealHeight) {\r\n                renderWidth = (renderWidth * this._idealHeight) / renderHeight;\r\n                renderHeight = this._idealHeight;\r\n            }\r\n        }\r\n\r\n        if (textureSize.width !== renderWidth || textureSize.height !== renderHeight) {\r\n            this.scaleTo(renderWidth, renderHeight);\r\n\r\n            this.markAsDirty();\r\n\r\n            if (this._idealWidth || this._idealHeight) {\r\n                this._rootContainer._markAllAsDirty();\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _getGlobalViewport(scene: Scene): Viewport {\r\n        var engine = scene.getEngine();\r\n        return this._fullscreenViewport.toGlobal(engine.getRenderWidth(), engine.getRenderHeight());\r\n    }\r\n\r\n    /**\r\n     * Get screen coordinates for a vector3\r\n     * @param position defines the position to project\r\n     * @param worldMatrix defines the world matrix to use\r\n     * @returns the projected position\r\n     */\r\n    public getProjectedPosition(position: Vector3, worldMatrix: Matrix): Vector2 {\r\n        var scene = this.getScene();\r\n\r\n        if (!scene) {\r\n            return Vector2.Zero();\r\n        }\r\n\r\n        var globalViewport = this._getGlobalViewport(scene);\r\n        var projectedPosition = Vector3.Project(position, worldMatrix, scene.getTransformMatrix(), globalViewport);\r\n\r\n        projectedPosition.scaleInPlace(this.renderScale);\r\n\r\n        return new Vector2(projectedPosition.x, projectedPosition.y);\r\n    }\r\n\r\n    private _checkUpdate(camera: Camera): void {\r\n        if (this._layerToDispose) {\r\n            if ((camera.layerMask & this._layerToDispose.layerMask) === 0) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this._isFullscreen && this._linkedControls.length) {\r\n            var scene = this.getScene();\r\n\r\n            if (!scene) {\r\n                return;\r\n            }\r\n\r\n            var globalViewport = this._getGlobalViewport(scene);\r\n\r\n            for (var control of this._linkedControls) {\r\n                if (!control.isVisible) {\r\n                    continue;\r\n                }\r\n\r\n                var mesh = control._linkedMesh;\r\n\r\n                if (!mesh || mesh.isDisposed()) {\r\n                    Tools.SetImmediate(() => {\r\n                        control.linkWithMesh(null);\r\n                    });\r\n\r\n                    continue;\r\n                }\r\n\r\n                var position = mesh.getBoundingInfo().boundingSphere.center;\r\n                var projectedPosition = Vector3.Project(position, mesh.getWorldMatrix(), scene.getTransformMatrix(), globalViewport);\r\n\r\n                if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n                    control.notRenderable = true;\r\n                    continue;\r\n                }\r\n                control.notRenderable = false;\r\n                // Account for RenderScale.\r\n                projectedPosition.scaleInPlace(this.renderScale);\r\n                control._moveToProjectedPosition(projectedPosition);\r\n            }\r\n        }\r\n\r\n        if (!this._isDirty && !this._rootContainer.isDirty) {\r\n            return;\r\n        }\r\n        this._isDirty = false;\r\n\r\n        this._render();\r\n        this.update(true, this.premulAlpha);\r\n    }\r\n\r\n    private _render(): void {\r\n        var textureSize = this.getSize();\r\n        var renderWidth = textureSize.width;\r\n        var renderHeight = textureSize.height;\r\n\r\n        // Clear\r\n        var context = this.getContext();\r\n        context.clearRect(0, 0, renderWidth, renderHeight);\r\n        if (this._background) {\r\n            context.save();\r\n            context.fillStyle = this._background;\r\n            context.fillRect(0, 0, renderWidth, renderHeight);\r\n            context.restore();\r\n        }\r\n\r\n        // Render\r\n        context.font = \"18px Arial\";\r\n        context.strokeStyle = \"white\";\r\n        var measure = new Measure(0, 0, renderWidth, renderHeight);\r\n        this._rootContainer._draw(measure, context);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _changeCursor(cursor: string) {\r\n        if (this._rootCanvas) {\r\n            this._rootCanvas.style.cursor = cursor;\r\n        }\r\n    }\r\n\r\n    private _doPicking(x: number, y: number, type: number, pointerId: number, buttonIndex: number): void {\r\n        var scene = this.getScene();\r\n\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        var engine = scene.getEngine();\r\n        var textureSize = this.getSize();\r\n\r\n        if (this._isFullscreen) {\r\n            x = x * (textureSize.width / engine.getRenderWidth());\r\n            y = y * (textureSize.height / engine.getRenderHeight());\r\n        }\r\n\r\n        if (this._capturingControl[pointerId]) {\r\n            this._capturingControl[pointerId]._processObservables(type, x, y, pointerId, buttonIndex);\r\n            return;\r\n        }\r\n\r\n        if (!this._rootContainer._processPicking(x, y, type, pointerId, buttonIndex)) {\r\n            this._changeCursor(\"\");\r\n            if (type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId]);\r\n                }\r\n\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        }\r\n\r\n        this._manageFocus();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _cleanControlAfterRemovalFromList(list: { [pointerId: number]: Control }, control: Control) {\r\n        for (var pointerId in list) {\r\n            if (!list.hasOwnProperty(pointerId)) {\r\n                continue;\r\n            }\r\n\r\n            var lastControlOver = list[pointerId];\r\n            if (lastControlOver === control) {\r\n                delete list[pointerId];\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _cleanControlAfterRemoval(control: Control) {\r\n        this._cleanControlAfterRemovalFromList(this._lastControlDown, control);\r\n        this._cleanControlAfterRemovalFromList(this._lastControlOver, control);\r\n    }\r\n\r\n    /** Attach to all scene events required to support pointer events */\r\n    public attach(): void {\r\n        var scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n\r\n        this._pointerMoveObserver = scene.onPrePointerObservable.add((pi, state) => {\r\n            if (scene!.isPointerCaptured((<PointerEvent>(pi.event)).pointerId)) {\r\n                return;\r\n            }\r\n\r\n            if (pi.type !== PointerEventTypes.POINTERMOVE\r\n                && pi.type !== PointerEventTypes.POINTERUP\r\n                && pi.type !== PointerEventTypes.POINTERDOWN) {\r\n                return;\r\n            }\r\n\r\n            if (!scene) {\r\n                return;\r\n            }\r\n\r\n            let camera = scene.cameraToUseForPointers || scene.activeCamera;\r\n\r\n            if (!camera) {\r\n                return;\r\n            }\r\n            let engine = scene.getEngine();\r\n            let viewport = camera.viewport;\r\n            let x = (scene.pointerX / engine.getHardwareScalingLevel() - viewport.x * engine.getRenderWidth()) / viewport.width;\r\n            let y = (scene.pointerY / engine.getHardwareScalingLevel() - viewport.y * engine.getRenderHeight()) / viewport.height;\r\n\r\n            this._shouldBlockPointer = false;\r\n            // Do picking modifies _shouldBlockPointer\r\n            this._doPicking(x, y, pi.type, (pi.event as PointerEvent).pointerId || 0, pi.event.button);\r\n            \r\n            // Avoid overwriting a true skipOnPointerObservable to false \r\n            if(this._shouldBlockPointer){\r\n                pi.skipOnPointerObservable = this._shouldBlockPointer;\r\n            }\r\n        });\r\n\r\n        this._attachToOnPointerOut(scene);\r\n    }\r\n\r\n    /**\r\n     * Connect the texture to a hosting mesh to enable interactions\r\n     * @param mesh defines the mesh to attach to\r\n     * @param supportPointerMove defines a boolean indicating if pointer move events must be catched as well\r\n     */\r\n    public attachToMesh(mesh: AbstractMesh, supportPointerMove = true): void {\r\n        var scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        this._pointerObserver = scene.onPointerObservable.add((pi, state) => {\r\n            if (pi.type !== PointerEventTypes.POINTERMOVE\r\n                && pi.type !== PointerEventTypes.POINTERUP\r\n                && pi.type !== PointerEventTypes.POINTERDOWN) {\r\n                return;\r\n            }\r\n            var pointerId = (pi.event as PointerEvent).pointerId || 0;\r\n            if (pi.pickInfo && pi.pickInfo.hit && pi.pickInfo.pickedMesh === mesh) {\r\n                var uv = pi.pickInfo.getTextureCoordinates();\r\n\r\n                if (uv) {\r\n                    let size = this.getSize();\r\n\r\n                    this._doPicking(uv.x * size.width, (1.0 - uv.y) * size.height, pi.type, pointerId, pi.event.button);\r\n                }\r\n            } else if (pi.type === PointerEventTypes.POINTERUP) {\r\n                if (this._lastControlDown[pointerId]) {\r\n                    this._lastControlDown[pointerId]._forcePointerUp(pointerId);\r\n                }\r\n                delete this._lastControlDown[pointerId];\r\n\r\n                this.focusedControl = null;\r\n            } else if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId]);\r\n                }\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        });\r\n\r\n        mesh.enablePointerMoveEvents = supportPointerMove;\r\n        this._attachToOnPointerOut(scene);\r\n    }\r\n\r\n    /**\r\n     * Move the focus to a specific control\r\n     * @param control defines the control which will receive the focus\r\n     */\r\n    public moveFocusToControl(control: IFocusableControl): void {\r\n        this.focusedControl = control;\r\n        this._lastPickedControl = <any>control;\r\n        this._blockNextFocusCheck = true;\r\n    }\r\n\r\n    private _manageFocus(): void {\r\n        if (this._blockNextFocusCheck) {\r\n            this._blockNextFocusCheck = false;\r\n            this._lastPickedControl = <any>this._focusedControl;\r\n            return;\r\n        }\r\n\r\n        // Focus management\r\n        if (this._focusedControl) {\r\n            if (this._focusedControl !== (<any>this._lastPickedControl)) {\r\n                if (this._lastPickedControl.isFocusInvisible) {\r\n                    return;\r\n                }\r\n\r\n                this.focusedControl = null;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _attachToOnPointerOut(scene: Scene): void {\r\n        this._canvasPointerOutObserver = scene.getEngine().onCanvasPointerOutObservable.add((pointerEvent) => {\r\n            if (this._lastControlOver[pointerEvent.pointerId]) {\r\n                this._lastControlOver[pointerEvent.pointerId]._onPointerOut(this._lastControlOver[pointerEvent.pointerId]);\r\n            }\r\n            delete this._lastControlOver[pointerEvent.pointerId];\r\n\r\n            if (this._lastControlDown[pointerEvent.pointerId]) {\r\n                this._lastControlDown[pointerEvent.pointerId]._forcePointerUp();\r\n            }\r\n            delete this._lastControlDown[pointerEvent.pointerId];\r\n        });\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture in projected mode (ie. attached to a mesh)\r\n     * @param mesh defines the mesh which will receive the texture\r\n     * @param width defines the texture width (1024 by default)\r\n     * @param height defines the texture height (1024 by default)\r\n     * @param supportPointerMove defines a boolean indicating if the texture must capture move events (true by default)\r\n     * @param onlyAlphaTesting defines a boolean indicating that alpha blending will not be used (only alpha testing) (false by default)\r\n     * @returns a new AdvancedDynamicTexture\r\n     */\r\n    public static CreateForMesh(mesh: AbstractMesh, width = 1024, height = 1024, supportPointerMove = true, onlyAlphaTesting = false): AdvancedDynamicTexture {\r\n        var result = new AdvancedDynamicTexture(mesh.name + \" AdvancedDynamicTexture\", width, height, mesh.getScene(), true, Texture.TRILINEAR_SAMPLINGMODE);\r\n\r\n        var material = new StandardMaterial(\"AdvancedDynamicTextureMaterial\", mesh.getScene());\r\n        material.backFaceCulling = false;\r\n        material.diffuseColor = Color3.Black();\r\n        material.specularColor = Color3.Black();\r\n\r\n        if (onlyAlphaTesting) {\r\n            material.diffuseTexture = result;\r\n            material.emissiveTexture = result;\r\n            result.hasAlpha = true;    \r\n        } else {\r\n            material.emissiveTexture = result;\r\n            material.opacityTexture = result;   \r\n        }\r\n\r\n        mesh.material = material;\r\n\r\n        result.attachToMesh(mesh, supportPointerMove);\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new AdvancedDynamicTexture in fullscreen mode.\r\n     * In this mode the texture will rely on a layer for its rendering.\r\n     * This allows it to be treated like any other layer.\r\n     * As such, if you have a multi camera setup, you can set the layerMask on the GUI as well.\r\n     * LayerMask is set through advancedTexture.layer.layerMask\r\n     * @param name defines name for the texture\r\n     * @param foreground defines a boolean indicating if the texture must be rendered in foreground (default is true)\r\n     * @param scene defines the hsoting scene\r\n     * @param sampling defines the texture sampling mode (Texture.BILINEAR_SAMPLINGMODE by default)\r\n     * @returns a new AdvancedDynamicTexture\r\n     */\r\n    public static CreateFullscreenUI(name: string, foreground: boolean = true, scene: Nullable<Scene> = null, sampling = Texture.BILINEAR_SAMPLINGMODE): AdvancedDynamicTexture {\r\n        var result = new AdvancedDynamicTexture(name, 0, 0, scene, false, sampling);\r\n\r\n        // Display\r\n        var layer = new Layer(name + \"_layer\", null, scene, !foreground);\r\n        layer.texture = result;\r\n\r\n        result._layerToDispose = layer;\r\n        result._isFullscreen = true;\r\n\r\n        // Attach\r\n        result.attach();\r\n\r\n        return result;\r\n    }\r\n}\r\n","import { IDisposable, Observable } from \"babylonjs\";\r\nimport { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\n\r\n/**\r\n * Define a style used by control to automatically setup properties based on a template.\r\n * Only support font related properties so far\r\n */\r\nexport class Style implements IDisposable {\r\n    private _fontFamily = \"Arial\";\r\n    private _fontStyle = \"\";\r\n    private _fontWeight = \"\";\r\n    /** @hidden */\r\n    public _host: AdvancedDynamicTexture;\r\n    /** @hidden */\r\n    public _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\r\n\r\n    /**\r\n     * Observable raised when the style values are changed\r\n     */\r\n    public onChangedObservable = new Observable<Style>();\r\n\r\n    /**\r\n     * Creates a new style object\r\n     * @param host defines the AdvancedDynamicTexture which hosts this style\r\n     */\r\n    public constructor(host: AdvancedDynamicTexture) {\r\n        this._host = host;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font size\r\n     */\r\n    public get fontSize(): string | number {\r\n        return this._fontSize.toString(this._host);\r\n    }\r\n\r\n    public set fontSize(value: string | number) {\r\n        if (this._fontSize.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._fontSize.fromString(value)) {\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font family\r\n     */\r\n    public get fontFamily(): string {\r\n        return this._fontFamily;\r\n    }\r\n\r\n    public set fontFamily(value: string) {\r\n        if (this._fontFamily === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontFamily = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font style \r\n     */\r\n    public get fontStyle(): string {\r\n        return this._fontStyle;\r\n    }\r\n\r\n    public set fontStyle(value: string) {\r\n        if (this._fontStyle === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontStyle = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Gets or sets font weight */\r\n    public get fontWeight(): string {\r\n        return this._fontWeight;\r\n    }\r\n\r\n    public set fontWeight(value: string) {\r\n        if (this._fontWeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontWeight = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Dispose all associated resources */\r\n    public dispose() {\r\n        this.onChangedObservable.clear();\r\n    }\r\n}    ","import { Control3D } from \"./control3D\";\r\nimport { TransformNode, Scene } from \"babylonjs\";\r\n\r\n/**\r\n * Class used as a root to all buttons\r\n */\r\nexport class AbstractButton3D extends Control3D {\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"AbstractButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        return new TransformNode(\"button\" + this.name);\r\n    }\r\n}","import { Vector3 } from \"babylonjs\";\r\n\r\n/**\r\n * Class used to transport Vector3 information for pointer events\r\n */\r\nexport class Vector3WithInfo extends Vector3 {\r\n    /**\r\n     * Creates a new Vector3WithInfo\r\n     * @param source defines the vector3 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(source: Vector3,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0) {\r\n        super(source.x, source.y, source.z);\r\n    }\r\n}","import { MaterialDefines, PushMaterial, serialize, expandToProperty, serializeAsColor3, Color3, serializeAsColor4, Color4, serializeAsVector3, Vector3, Scene, Nullable, BaseTexture, AbstractMesh, SubMesh, VertexBuffer, MaterialHelper, EffectCreationOptions, Matrix, Mesh, Tmp, SerializationHelper, serializeAsTexture } from \"babylonjs\";\r\n\r\nimport { registerShader } from \"./shaders/fluent\";\r\n\r\n// register shaders\r\nregisterShader();\r\n\r\n/** @hidden */\r\nexport class FluentMaterialDefines extends MaterialDefines {\r\n    public INNERGLOW = false;\r\n    public BORDER = false;\r\n    public HOVERLIGHT = false;\r\n    public TEXTURE = false;\r\n\r\n    constructor() {\r\n        super();\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render controls with fluent desgin\r\n */\r\nexport class FluentMaterial extends PushMaterial {\r\n\r\n    /**\r\n     * Gets or sets inner glow intensity. A value of 0 means no glow (default is 0.5)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public innerGlowColorIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the inner glow color (white by default)\r\n     */\r\n    @serializeAsColor3()\r\n    public innerGlowColor = new Color3(1.0, 1.0, 1.0);\r\n\r\n    /**\r\n     * Gets or sets alpha value (default is 1.0)\r\n     */\r\n    @serialize()\r\n    public alpha = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the albedo color (Default is Color3(0.3, 0.35, 0.4))\r\n     */\r\n    @serializeAsColor3()\r\n    public albedoColor = new Color3(0.3, 0.35, 0.4);\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if borders must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderBorders = false;\r\n\r\n    /**\r\n     * Gets or sets border width (default is 0.5)\r\n     */\r\n    @serialize()\r\n    public borderWidth = 0.5;\r\n\r\n    /**\r\n     * Gets or sets a value indicating the smoothing value applied to border edges (0.02 by default)\r\n     */\r\n    @serialize()\r\n    public edgeSmoothingValue = 0.02;\r\n\r\n    /**\r\n     * Gets or sets the minimum value that can be applied to border width (default is 0.1)\r\n     */\r\n    @serialize()\r\n    public borderMinValue = 0.1;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if hover light must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderHoverLight = false;\r\n\r\n    /**\r\n     * Gets or sets the radius used to render the hover light (default is 1.0)\r\n     */\r\n    @serialize()\r\n    public hoverRadius = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the color used to render the hover light (default is Color4(0.3, 0.3, 0.3, 1.0))\r\n     */\r\n    @serializeAsColor4()\r\n    public hoverColor = new Color4(0.3, 0.3, 0.3, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the hover light position in world space (default is Vector3.Zero())\r\n     */\r\n    @serializeAsVector3()\r\n    public hoverPosition = Vector3.Zero();\r\n\r\n    @serializeAsTexture(\"albedoTexture\")\r\n    private _albedoTexture: Nullable<BaseTexture>;\r\n\r\n    /** Gets or sets the texture to use for albedo color */\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesAndMiscDirty\")\r\n    public albedoTexture: Nullable<BaseTexture>;    \r\n\r\n    /**\r\n     * Creates a new Fluent material\r\n     * @param name defines the name of the material\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return this.alpha !== 1.0;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh, useInstances?: boolean): boolean {\r\n        if (this.isFrozen) {\r\n            if (this._wasPreviouslyReady && subMesh.effect) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh._materialDefines) {\r\n            subMesh._materialDefines = new FluentMaterialDefines();\r\n        }\r\n\r\n        var scene = this.getScene();\r\n        var defines = <FluentMaterialDefines>subMesh._materialDefines;\r\n        if (!this.checkReadyOnEveryCall && subMesh.effect) {\r\n            if (defines._renderId === scene.getRenderId()) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (defines._areTexturesDirty) {\r\n            defines.INNERGLOW = this.innerGlowColorIntensity > 0;\r\n            defines.BORDER = this.renderBorders;\r\n            defines.HOVERLIGHT = this.renderHoverLight;\r\n\r\n            if (this._albedoTexture) {\r\n                if (!this._albedoTexture.isReadyOrNotBlocking()) {\r\n                    return false;\r\n                } else {\r\n                    defines.TEXTURE = true;\r\n                }\r\n            } else {\r\n                defines.TEXTURE = false;\r\n            }\r\n        }\r\n\r\n        var engine = scene.getEngine();\r\n        // Get correct effect      \r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n            scene.resetCachedMaterial();\r\n\r\n            //Attributes\r\n            var attribs = [VertexBuffer.PositionKind];\r\n            attribs.push(VertexBuffer.NormalKind);\r\n            attribs.push(VertexBuffer.UVKind);\r\n\r\n            var shaderName = \"fluent\";\r\n\r\n            var uniforms = [\"world\", \"viewProjection\", \"innerGlowColor\", \"albedoColor\", \"borderWidth\", \"edgeSmoothingValue\", \"scaleFactor\", \"borderMinValue\",\r\n                \"hoverColor\", \"hoverPosition\", \"hoverRadius\"\r\n            ];\r\n\r\n            var samplers = [\"albedoSampler\"];\r\n            var uniformBuffers = new Array<string>();\r\n\r\n            MaterialHelper.PrepareUniformsAndSamplersList(<EffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4\r\n            });\r\n\r\n            var join = defines.toString();\r\n            subMesh.setEffect(scene.getEngine().createEffect(shaderName,\r\n                <EffectCreationOptions>{\r\n                    attributes: attribs,\r\n                    uniformsNames: uniforms,\r\n                    uniformBuffersNames: uniformBuffers,\r\n                    samplers: samplers,\r\n                    defines: join,\r\n                    fallbacks: null,\r\n                    onCompiled: this.onCompiled,\r\n                    onError: this.onError,\r\n                    indexParameters: { maxSimultaneousLights: 4 }\r\n                }, engine));\r\n\r\n        }\r\n\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        this._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        var scene = this.getScene();\r\n\r\n        var defines = <FluentMaterialDefines>subMesh._materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        var effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices        \r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n\r\n\r\n        if (this._mustRebind(scene, effect)) {\r\n            this._activeEffect.setColor4(\"albedoColor\", this.albedoColor, this.alpha);\r\n\r\n            if (defines.INNERGLOW) {\r\n                this._activeEffect.setColor4(\"innerGlowColor\", this.innerGlowColor, this.innerGlowColorIntensity);\r\n            }\r\n\r\n            if (defines.BORDER) {\r\n                this._activeEffect.setFloat(\"borderWidth\", this.borderWidth);\r\n                this._activeEffect.setFloat(\"edgeSmoothingValue\", this.edgeSmoothingValue);\r\n                this._activeEffect.setFloat(\"borderMinValue\", this.borderMinValue);\r\n\r\n                mesh.getBoundingInfo().boundingBox.extendSize.multiplyToRef(mesh.scaling, Tmp.Vector3[0]);\r\n                this._activeEffect.setVector3(\"scaleFactor\", Tmp.Vector3[0]);\r\n            }\r\n\r\n            if (defines.HOVERLIGHT) {\r\n                this._activeEffect.setDirectColor4(\"hoverColor\", this.hoverColor);\r\n                this._activeEffect.setFloat(\"hoverRadius\", this.hoverRadius);\r\n                this._activeEffect.setVector3(\"hoverPosition\", this.hoverPosition);\r\n            }\r\n\r\n            if (defines.TEXTURE) {\r\n                this._activeEffect.setTexture(\"albedoSampler\", this._albedoTexture)\r\n            }\r\n        }\r\n\r\n        this._afterBind(mesh, this._activeEffect);\r\n    }\r\n\r\n    public getActiveTextures(): BaseTexture[] {\r\n        var activeTextures = super.getActiveTextures();\r\n\r\n        return activeTextures;\r\n    }\r\n\r\n    public hasTexture(texture: BaseTexture): boolean {\r\n        if (super.hasTexture(texture)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): FluentMaterial {\r\n        return SerializationHelper.Clone(() => new FluentMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        var serializationObject = SerializationHelper.Serialize(this);\r\n        serializationObject.customType = \"BABYLON.GUI.FluentMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FluentMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): FluentMaterial {\r\n        return SerializationHelper.Parse(() => new FluentMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}","import * as GUI from \"./index\";\r\n\r\n/**\r\n * Legacy support, defining window.BABYLON.GUI (global variable).\r\n * \r\n * This is the entry point for the UMD module. \r\n * The entry point for a future ESM package should be index.ts\r\n */\r\nvar globalObject = (typeof global !== 'undefined') ? global : ((typeof window !== 'undefined') ? window : undefined);\r\nif (typeof globalObject !== \"undefined\") {\r\n    (<any>globalObject).BABYLON = (<any>globalObject).BABYLON || {};\r\n    (<any>globalObject).BABYLON.GUI = GUI;\r\n}\r\n\r\nexport * from \"./index\";","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { Observable, Vector2 } from \"babylonjs\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\n\r\n/**\r\n * Class used to represent a 2D checkbox\r\n */\r\nexport class Checkbox extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness  */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Observable raised when isChecked property changes\r\n     */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n    }\r\n\r\n    /**\r\n     * Creates a new CheckBox\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"CheckBox\";\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            let actualWidth = this._currentMeasure.width - this._thickness;\r\n            let actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            context.fillStyle = this._background;\r\n            context.fillRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (this._isChecked) {\r\n                context.fillStyle = this.color;\r\n                let offsetWidth = actualWidth * this._checkSizeRatio;\r\n                let offseHeight = actualHeight * this._checkSizeRatio;\r\n\r\n                context.fillRect(this._currentMeasure.left + this._thickness / 2 + (actualWidth - offsetWidth) / 2, this._currentMeasure.top + this._thickness / 2 + (actualHeight - offseHeight) / 2, offsetWidth, offseHeight);\r\n            }\r\n\r\n            context.strokeStyle = this.color;\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n        this.isChecked = !this.isChecked;\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a checkbox with a header\r\n     * @param title defines the label to use for the header\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the checkbox and a textBlock\r\n     */\r\n    public static AddCheckBoxWithHeader(title: string, onValueChanged: (value: boolean) => void): StackPanel {\r\n        var panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        var checkbox = new Checkbox();\r\n        checkbox.width = \"20px\";\r\n        checkbox.height = \"20px\";\r\n        checkbox.isChecked = true;\r\n        checkbox.color = \"green\";\r\n        checkbox.onIsCheckedChangedObservable.add(onValueChanged);\r\n        panel.addControl(checkbox);    \r\n    \r\n        var header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header); \r\n\r\n        return panel;\r\n    }\r\n}   \r\n","import { Control } from \"./control\";\r\nimport { Color3, Observable, Vector2 } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/** Class used to create color pickers */\r\nexport class ColorPicker extends Control {\r\n    private _colorWheelCanvas: HTMLCanvasElement;\r\n\r\n    private _value: Color3 = Color3.Red();\r\n    private _tmpColor = new Color3();\r\n\r\n    private _pointerStartedOnSquare = false;\r\n    private _pointerStartedOnWheel = false;\r\n\r\n    private _squareLeft = 0;\r\n    private _squareTop = 0;\r\n    private _squareSize = 0;\r\n\r\n    private _h = 360;\r\n    private _s = 1;\r\n    private _v = 1;\r\n\r\n    /**\r\n     * Observable raised when the value changes\r\n     */\r\n    public onValueChangedObservable = new Observable<Color3>();\r\n\r\n    /** Gets or sets the color of the color picker */\r\n    public get value(): Color3 {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: Color3) {\r\n        if (this._value.equals(value)) {\r\n            return;\r\n        }\r\n\r\n        this._value.copyFrom(value);\r\n\r\n        this._RGBtoHSV(this._value, this._tmpColor);\r\n\r\n        this._h = this._tmpColor.r;\r\n        this._s = Math.max(this._tmpColor.g, 0.00001);\r\n        this._v = Math.max(this._tmpColor.b, 0.00001);\r\n\r\n        this._markAsDirty();\r\n\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    /** Gets or sets control width */\r\n    public set width(value: string | number) {\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._height.fromString(value);\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets control height */\r\n    public set height(value: string | number) {\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._width.fromString(value);\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets control size */\r\n    public get size(): string | number {\r\n        return this.width;\r\n    }\r\n\r\n    public set size(value: string | number) {\r\n        this.width = value;\r\n    }\r\n\r\n    /**\r\n     * Creates a new ColorPicker\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n        this.value = new Color3(.88, .1, .1);\r\n        this.size = \"200px\";\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ColorPicker\";\r\n    }\r\n\r\n    private _updateSquareProps(): void {\r\n        var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\r\n        var wheelThickness = radius * .2;\r\n        var innerDiameter = (radius - wheelThickness) * 2;\r\n        var squareSize = innerDiameter / (Math.sqrt(2));\r\n        var offset = radius - squareSize * .5;\r\n\r\n        this._squareLeft = this._currentMeasure.left + offset;\r\n        this._squareTop = this._currentMeasure.top + offset;\r\n        this._squareSize = squareSize;\r\n    }\r\n\r\n    private _drawGradientSquare(hueValue: number, left: number, top: number, width: number, height: number, context: CanvasRenderingContext2D) {\r\n        var lgh = context.createLinearGradient(left, top, width + left, top);\r\n        lgh.addColorStop(0, '#fff');\r\n        lgh.addColorStop(1, 'hsl(' + hueValue + ', 100%, 50%)');\r\n\r\n        context.fillStyle = lgh;\r\n        context.fillRect(left, top, width, height);\r\n\r\n        var lgv = context.createLinearGradient(left, top, left, height + top);\r\n        lgv.addColorStop(0, 'rgba(0,0,0,0)');\r\n        lgv.addColorStop(1, '#000');\r\n\r\n        context.fillStyle = lgv;\r\n        context.fillRect(left, top, width, height);\r\n    }\r\n\r\n    private _drawCircle(centerX: number, centerY: number, radius: number, context: CanvasRenderingContext2D) {\r\n        context.beginPath();\r\n        context.arc(centerX, centerY, radius + 1, 0, 2 * Math.PI, false);\r\n        context.lineWidth = 3;\r\n        context.strokeStyle = '#333333';\r\n        context.stroke();\r\n        context.beginPath();\r\n        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);\r\n        context.lineWidth = 3;\r\n        context.strokeStyle = '#ffffff';\r\n        context.stroke();\r\n    }\r\n\r\n    private _createColorWheelCanvas(radius: number, thickness: number): HTMLCanvasElement {\r\n        var canvas = document.createElement(\"canvas\");\r\n        canvas.width = radius * 2;\r\n        canvas.height = radius * 2;\r\n        var context = <CanvasRenderingContext2D>canvas.getContext(\"2d\");\r\n        var image = context.getImageData(0, 0, radius * 2, radius * 2);\r\n        var data = image.data;\r\n\r\n        var color = this._tmpColor;\r\n        var maxDistSq = radius * radius;\r\n        var innerRadius = radius - thickness;\r\n        var minDistSq = innerRadius * innerRadius;\r\n\r\n        for (var x = -radius; x < radius; x++) {\r\n            for (var y = -radius; y < radius; y++) {\r\n\r\n                var distSq = x * x + y * y;\r\n\r\n                if (distSq > maxDistSq || distSq < minDistSq) {\r\n                    continue;\r\n                }\r\n\r\n                var dist = Math.sqrt(distSq);\r\n                var ang = Math.atan2(y, x);\r\n\r\n                this._HSVtoRGB(ang * 180 / Math.PI + 180, dist / radius, 1, color);\r\n\r\n                var index = ((x + radius) + ((y + radius) * 2 * radius)) * 4;\r\n\r\n                data[index] = color.r * 255;\r\n                data[index + 1] = color.g * 255;\r\n                data[index + 2] = color.b * 255;\r\n                var alphaRatio = (dist - innerRadius) / (radius - innerRadius);\r\n\r\n                //apply less alpha to bigger color pickers\r\n                var alphaAmount = .2;\r\n                var maxAlpha = .2;\r\n                var minAlpha = .04;\r\n                var lowerRadius = 50;\r\n                var upperRadius = 150;\r\n\r\n                if (radius < lowerRadius) {\r\n                    alphaAmount = maxAlpha;\r\n                } else if (radius > upperRadius) {\r\n                    alphaAmount = minAlpha;\r\n                } else {\r\n                    alphaAmount = (minAlpha - maxAlpha) * (radius - lowerRadius) / (upperRadius - lowerRadius) + maxAlpha;\r\n                }\r\n\r\n                var alphaRatio = (dist - innerRadius) / (radius - innerRadius);\r\n\r\n                if (alphaRatio < alphaAmount) {\r\n                    data[index + 3] = 255 * (alphaRatio / alphaAmount);\r\n                } else if (alphaRatio > 1 - alphaAmount) {\r\n                    data[index + 3] = 255 * (1.0 - ((alphaRatio - (1 - alphaAmount)) / alphaAmount));\r\n                } else {\r\n                    data[index + 3] = 255;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        context.putImageData(image, 0, 0);\r\n\r\n        return canvas;\r\n    }\r\n\r\n    private _RGBtoHSV(color: Color3, result: Color3) {\r\n        var r = color.r;\r\n        var g = color.g;\r\n        var b = color.b;\r\n\r\n        var max = Math.max(r, g, b);\r\n        var min = Math.min(r, g, b);\r\n        var h = 0;\r\n        var s = 0;\r\n        var v = max;\r\n\r\n        var dm = max - min;\r\n\r\n        if (max !== 0) {\r\n            s = dm / max;\r\n        }\r\n\r\n        if (max != min) {\r\n            if (max == r) {\r\n                h = (g - b) / dm;\r\n                if (g < b) {\r\n                    h += 6;\r\n                }\r\n            } else if (max == g) {\r\n                h = (b - r) / dm + 2;\r\n            } else if (max == b) {\r\n                h = (r - g) / dm + 4;\r\n            }\r\n            h *= 60;\r\n        }\r\n\r\n        result.r = h;\r\n        result.g = s;\r\n        result.b = v;\r\n    }\r\n\r\n    private _HSVtoRGB(hue: number, saturation: number, value: number, result: Color3) {\r\n        var chroma = value * saturation;\r\n        var h = hue / 60;\r\n        var x = chroma * (1 - Math.abs((h % 2) - 1));\r\n        var r = 0;\r\n        var g = 0;\r\n        var b = 0;\r\n\r\n        if (h >= 0 && h <= 1) {\r\n            r = chroma;\r\n            g = x;\r\n        } else if (h >= 1 && h <= 2) {\r\n            r = x;\r\n            g = chroma;\r\n        } else if (h >= 2 && h <= 3) {\r\n            g = chroma;\r\n            b = x;\r\n        } else if (h >= 3 && h <= 4) {\r\n            g = x;\r\n            b = chroma;\r\n        } else if (h >= 4 && h <= 5) {\r\n            r = x;\r\n            b = chroma;\r\n        } else if (h >= 5 && h <= 6) {\r\n            r = chroma;\r\n            b = x;\r\n        }\r\n\r\n        var m = value - chroma;\r\n        result.set((r + m), (g + m), (b + m));\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n\r\n            var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\r\n            var wheelThickness = radius * .2;\r\n            var left = this._currentMeasure.left;\r\n            var top = this._currentMeasure.top;\r\n\r\n            if (!this._colorWheelCanvas || this._colorWheelCanvas.width != radius * 2) {\r\n                this._colorWheelCanvas = this._createColorWheelCanvas(radius, wheelThickness);\r\n            }\r\n\r\n            this._updateSquareProps();\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n\r\n                context.fillRect(this._squareLeft, this._squareTop, this._squareSize, this._squareSize);\r\n            }\r\n\r\n            context.drawImage(this._colorWheelCanvas, left, top);\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            this._drawGradientSquare(this._h,\r\n                this._squareLeft,\r\n                this._squareTop,\r\n                this._squareSize,\r\n                this._squareSize,\r\n                context);\r\n\r\n            var cx = this._squareLeft + this._squareSize * this._s;\r\n            var cy = this._squareTop + this._squareSize * (1 - this._v);\r\n\r\n            this._drawCircle(cx, cy, radius * .04, context);\r\n\r\n            var dist = radius - wheelThickness * .5;\r\n            cx = left + radius + Math.cos((this._h - 180) * Math.PI / 180) * dist;\r\n            cy = top + radius + Math.sin((this._h - 180) * Math.PI / 180) * dist;\r\n            this._drawCircle(cx, cy, wheelThickness * .35, context);\r\n\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n    private _pointerIsDown = false;\r\n\r\n    private _updateValueFromPointer(x: number, y: number): void {\r\n        if (this._pointerStartedOnWheel) {\r\n            var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\r\n            var centerX = radius + this._currentMeasure.left;\r\n            var centerY = radius + this._currentMeasure.top;\r\n            this._h = Math.atan2(y - centerY, x - centerX) * 180 / Math.PI + 180;\r\n        }\r\n        else if (this._pointerStartedOnSquare) {\r\n            this._updateSquareProps();\r\n            this._s = (x - this._squareLeft) / this._squareSize;\r\n            this._v = 1 - (y - this._squareTop) / this._squareSize;\r\n            this._s = Math.min(this._s, 1);\r\n            this._s = Math.max(this._s, 0.00001);\r\n            this._v = Math.min(this._v, 1);\r\n            this._v = Math.max(this._v, 0.00001);\r\n        }\r\n\r\n        this._HSVtoRGB(this._h, this._s, this._v, this._tmpColor);\r\n\r\n        this.value = this._tmpColor;\r\n    }\r\n\r\n    private _isPointOnSquare(coordinates: Vector2): boolean {\r\n        this._updateSquareProps();\r\n\r\n        var left = this._squareLeft;\r\n        var top = this._squareTop;\r\n        var size = this._squareSize;\r\n\r\n        if (coordinates.x >= left && coordinates.x <= left + size &&\r\n            coordinates.y >= top && coordinates.y <= top + size) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    private _isPointOnWheel(coordinates: Vector2): boolean {\r\n        var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\r\n        var centerX = radius + this._currentMeasure.left;\r\n        var centerY = radius + this._currentMeasure.top;\r\n        var wheelThickness = radius * .2;\r\n        var innerRadius = radius - wheelThickness;\r\n        var radiusSq = radius * radius;\r\n        var innerRadiusSq = innerRadius * innerRadius;\r\n\r\n        var dx = coordinates.x - centerX;\r\n        var dy = coordinates.y - centerY;\r\n\r\n        var distSq = dx * dx + dy * dy;\r\n\r\n        if (distSq <= radiusSq && distSq >= innerRadiusSq) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n        this._pointerIsDown = true;\r\n\r\n        this._pointerStartedOnSquare = false;\r\n        this._pointerStartedOnWheel = false;\r\n\r\n        if (this._isPointOnSquare(coordinates)) {\r\n            this._pointerStartedOnSquare = true;\r\n        } else if (this._isPointOnWheel(coordinates)) {\r\n            this._pointerStartedOnWheel = true;\r\n        }\r\n\r\n        this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        this._host._capturingControl[pointerId] = this;\r\n\r\n        return true;\r\n    }\r\n\r\n    public _onPointerMove(target: Control, coordinates: Vector2): void {\r\n        if (this._pointerIsDown) {\r\n            this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        }\r\n\r\n        super._onPointerMove(target, coordinates);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._pointerIsDown = false;\r\n\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n}  ","import { Container } from \"./container\";\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/** Class used to create 2D ellipse containers */\r\nexport class Ellipse extends Container {\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Ellipse\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Ellipse\";\r\n    }\r\n\r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, context);\r\n\r\n        if (this._background) {\r\n            context.fillStyle = this._background;\r\n\r\n            context.fill();\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (this._thickness) {\r\n            if (this.color) {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.stroke();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    protected _clipForChildren(context: CanvasRenderingContext2D) {\r\n\r\n        Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, this._currentMeasure.width / 2, this._currentMeasure.height / 2, context);\r\n\r\n        context.clip();\r\n    }\r\n}   ","import { Container } from \"./container\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/**\r\n * Class used to create a 2D grid container\r\n */\r\nexport class Grid extends Container {\r\n    private _rowDefinitions = new Array<ValueAndUnit>();\r\n    private _columnDefinitions = new Array<ValueAndUnit>();\r\n    private _cells: { [key: string]: Container } = {};\r\n    private _childControls = new Array<Control>();\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._childControls;\r\n    }\r\n\r\n    /**\r\n     * Adds a new row to the grid\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the height is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addRowDefinition(height: number, isPixel = false): Grid {\r\n        this._rowDefinitions.push(new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new column to the grid\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addColumnDefinition(width: number, isPixel = false): Grid {\r\n        this._columnDefinitions.push(new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a row definition\r\n     * @param index defines the index of the row to update\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the weight is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setRowDefinition(index: number, height: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        this._rowDefinitions[index] = new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a column definition\r\n     * @param index defines the index of the column to update\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setColumnDefinition(index: number, width: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        this._columnDefinitions[index] = new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    private _removeCell(cell: Container, key: string) {\r\n        if (!cell) {\r\n            return;\r\n        }\r\n\r\n        super.removeControl(cell);\r\n\r\n        for (var control of cell.children) {\r\n            let childIndex = this._childControls.indexOf(control);\r\n\r\n            if (childIndex !== -1) {\r\n                this._childControls.splice(childIndex, 1);\r\n            }\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    private _offsetCell(previousKey: string, key: string) {\r\n        if (!this._cells[key]) {\r\n            return;\r\n        }\r\n\r\n        this._cells[previousKey] = this._cells[key];\r\n\r\n        for (var control of this._cells[previousKey].children) {\r\n            control._tag = previousKey;\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    /**\r\n     * Remove a column definition at specified index\r\n     * @param index defines the index of the column to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeColumnDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (var x = 0; x < this._rowDefinitions.length; x++) {\r\n            let key = `${x}:${index}`;\r\n            let cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (var x = 0; x < this._rowDefinitions.length; x++) {\r\n            for (var y = index + 1; y < this._columnDefinitions.length; y++) {\r\n                let previousKey = `${x}:${y - 1}`;\r\n                let key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._columnDefinitions.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a row definition at specified index\r\n     * @param index defines the index of the row to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeRowDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (var y = 0; y < this._columnDefinitions.length; y++) {\r\n            let key = `${index}:${y}`;\r\n            let cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (var y = 0; y < this._columnDefinitions.length; y++) {\r\n            for (var x = index + 1; x < this._rowDefinitions.length; x++) {\r\n                let previousKey = `${x - 1}:${y}`;\r\n                let key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._rowDefinitions.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current grid\r\n     * @param control defines the control to add\r\n     * @param row defines the row where to add the control (0 by default)\r\n     * @param column defines the column where to add the control (0 by default)\r\n     * @returns the current grid\r\n     */\r\n    public addControl(control: Control, row: number = 0, column: number = 0): Grid {\r\n        if (this._rowDefinitions.length === 0) {\r\n            // Add default row definition\r\n            this.addRowDefinition(1, false);\r\n        }\r\n\r\n        if (this._columnDefinitions.length === 0) {\r\n            // Add default column definition\r\n            this.addColumnDefinition(1, false);\r\n        }\r\n\r\n        let x = Math.min(row, this._rowDefinitions.length - 1);\r\n        let y = Math.min(column, this._columnDefinitions.length - 1);\r\n        let key = `${x}:${y}`;\r\n        let goodContainer = this._cells[key];\r\n\r\n        if (!goodContainer) {\r\n            goodContainer = new Container(key);\r\n            this._cells[key] = goodContainer;\r\n            goodContainer.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            goodContainer.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            super.addControl(goodContainer);\r\n        }\r\n\r\n        goodContainer.addControl(control);\r\n        this._childControls.push(control);\r\n        control._tag = key;\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        var index = this._childControls.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._childControls.splice(index, 1);\r\n        }\r\n\r\n        let cell = this._cells[control._tag];\r\n\r\n        if (cell) {\r\n            cell.removeControl(control);\r\n        }\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Grid\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Grid\";\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        let widths = [];\r\n        let heights = [];\r\n        let lefts = [];\r\n        let tops = [];\r\n\r\n        let availableWidth = this._currentMeasure.width;\r\n        let globalWidthPercentage = 0;\r\n        let availableHeight = this._currentMeasure.height;\r\n        let globalHeightPercentage = 0;\r\n\r\n        // Heights\r\n        let index = 0;\r\n        for (var value of this._rowDefinitions) {\r\n            if (value.isPixel) {\r\n                let height = value.getValue(this._host);\r\n                availableHeight -= height;\r\n                heights[index] = height;\r\n            } else {\r\n                globalHeightPercentage += value.internalValue;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let top = 0;\r\n        index = 0;\r\n        for (var value of this._rowDefinitions) {\r\n            tops.push(top);\r\n\r\n            if (!value.isPixel) {\r\n                let height = (value.internalValue / globalHeightPercentage) * availableHeight;\r\n                top += height;\r\n                heights[index] = height;\r\n            } else {\r\n                top += value.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        // Widths\r\n        index = 0;\r\n        for (var value of this._columnDefinitions) {\r\n            if (value.isPixel) {\r\n                let width = value.getValue(this._host);\r\n                availableWidth -= width;\r\n                widths[index] = width;\r\n            } else {\r\n                globalWidthPercentage += value.internalValue;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let left = 0;\r\n        index = 0;\r\n        for (var value of this._columnDefinitions) {\r\n            lefts.push(left);\r\n            if (!value.isPixel) {\r\n                let width = (value.internalValue / globalWidthPercentage) * availableWidth;\r\n                left += width;\r\n                widths[index] = width;\r\n            } else {\r\n                left += value.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        // Setting child sizes\r\n        for (var key in this._cells) {\r\n            if (!this._cells.hasOwnProperty(key)) {\r\n                continue;\r\n            }\r\n            let split = key.split(\":\");\r\n            let x = parseInt(split[0]);\r\n            let y = parseInt(split[1]);\r\n            let cell = this._cells[key];\r\n\r\n            cell.left = lefts[y] + \"px\";\r\n            cell.top = tops[x] + \"px\";\r\n            cell.width = widths[y] + \"px\";\r\n            cell.height = heights[x] + \"px\";\r\n        }\r\n\r\n        super._additionalProcessing(parentMeasure, context);\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (var control of this._childControls) {\r\n            control.dispose();\r\n        }\r\n    }\r\n}","import { InputText } from \"./inputText\";\r\n\r\n/**\r\n * Class used to create a password control\r\n */\r\nexport class InputPassword extends InputText {\r\n    protected _beforeRenderText(text: string): string {\r\n        let txt = \"\";\r\n        for (let i = 0; i < text.length; i++) {\r\n            txt += \"\\u2022\";\r\n        }\r\n        return txt;\r\n    }\r\n}\r\n","import { Control } from \"./control\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Nullable, Observer, Vector3, Scene, Tools, Matrix } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/** Class used to render 2D lines */\r\nexport class Line extends Control {\r\n    private _lineWidth = 1;\r\n    private _x1 = new ValueAndUnit(0);\r\n    private _y1 = new ValueAndUnit(0);\r\n    private _x2 = new ValueAndUnit(0);\r\n    private _y2 = new ValueAndUnit(0);\r\n    private _dash = new Array<number>();\r\n    private _connectedControl: Control;\r\n    private _connectedControlDirtyObserver: Nullable<Observer<Control>>;\r\n\r\n    /** Gets or sets the dash pattern */\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the control connected with the line end */\r\n    public get connectedControl(): Control {\r\n        return this._connectedControl;\r\n    }\r\n\r\n    public set connectedControl(value: Control) {\r\n        if (this._connectedControl === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._connectedControlDirtyObserver && this._connectedControl) {\r\n            this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver);\r\n            this._connectedControlDirtyObserver = null;\r\n        }\r\n\r\n        if (value) {\r\n            this._connectedControlDirtyObserver = value.onDirtyObservable.add(() => this._markAsDirty());\r\n        }\r\n\r\n        this._connectedControl = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets start coordinates on X axis */\r\n    public get x1(): string | number {\r\n        return this._x1.toString(this._host);\r\n    }\r\n\r\n    public set x1(value: string | number) {\r\n        if (this._x1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets start coordinates on Y axis */\r\n    public get y1(): string | number {\r\n        return this._y1.toString(this._host);\r\n    }\r\n\r\n    public set y1(value: string | number) {\r\n        if (this._y1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on X axis */\r\n    public get x2(): string | number {\r\n        return this._x2.toString(this._host);\r\n    }\r\n\r\n    public set x2(value: string | number) {\r\n        if (this._x2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on Y axis */\r\n    public get y2(): string | number {\r\n        return this._y2.toString(this._host);\r\n    }\r\n\r\n    public set y2(value: string | number) {\r\n        if (this._y2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets horizontal alignment */\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    /** Gets or sets vertical alignment */\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    private get _effectiveX2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerX : 0) + this._x2.getValue(this._host);\r\n    }\r\n\r\n    private get _effectiveY2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerY : 0) + this._y2.getValue(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new Line\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Line\";\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            context.strokeStyle = this.color;\r\n            context.lineWidth = this._lineWidth;\r\n            context.setLineDash(this._dash);\r\n\r\n            context.beginPath();\r\n            context.moveTo(this._x1.getValue(this._host), this._y1.getValue(this._host));\r\n\r\n            context.lineTo(this._effectiveX2, this._effectiveY2);\r\n\r\n            context.stroke();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public _measure(): void {\r\n        // Width / Height\r\n        this._currentMeasure.width = Math.abs(this._x1.getValue(this._host) - this._effectiveX2) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._y1.getValue(this._host) - this._effectiveY2) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._currentMeasure.left = Math.min(this._x1.getValue(this._host), this._effectiveX2) - this._lineWidth / 2;\r\n        this._currentMeasure.top = Math.min(this._y1.getValue(this._host), this._effectiveY2) - this._lineWidth / 2;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line given 3D cartesian coordinates.\r\n     * @param position Targeted world position\r\n     * @param scene Scene\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public moveToVector3(position: Vector3, scene: Scene, end: boolean = false): void {\r\n        if (!this._host || this._root !== this._host._rootContainer) {\r\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\r\n            return;\r\n        }\r\n\r\n        var globalViewport = this._host._getGlobalViewport(scene);\r\n        var projectedPosition = Vector3.Project(position, Matrix.Identity(), scene.getTransformMatrix(), globalViewport);\r\n\r\n        this._moveToProjectedPosition(projectedPosition, end)\r\n\r\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n            this.notRenderable = true;\r\n            return;\r\n        }\r\n        this.notRenderable = false;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line to a position in screen absolute space.\r\n     * @param projectedPosition Position in screen absolute space (X, Y)\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public _moveToProjectedPosition(projectedPosition: Vector3, end: boolean = false): void {\r\n        let x: string = (projectedPosition.x + this._linkOffsetX.getValue(this._host)) + \"px\";\r\n        let y: string = (projectedPosition.y + this._linkOffsetY.getValue(this._host)) + \"px\";\r\n\r\n        if (end) {\r\n            this.x2 = x;\r\n            this.y2 = y;\r\n            this._x2.ignoreAdaptiveScaling = true;\r\n            this._y2.ignoreAdaptiveScaling = true;\r\n        } else {\r\n            this.x1 = x;\r\n            this.y1 = y;\r\n            this._x1.ignoreAdaptiveScaling = true;\r\n            this._y1.ignoreAdaptiveScaling = true;\r\n        }\r\n    }\r\n}   \r\n","import { Control } from \"./control\";\r\nimport { MultiLinePoint } from \"../multiLinePoint\";\r\nimport { Nullable, AbstractMesh } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n\r\n/**\r\n * Class used to create multi line control\r\n */\r\nexport class MultiLine extends Control {\r\n\r\n    private _lineWidth: number = 1;\r\n    private _dash: number[];\r\n    private _points: Nullable<MultiLinePoint>[];\r\n\r\n    private _minX: Nullable<number>;\r\n    private _minY: Nullable<number>;\r\n    private _maxX: Nullable<number>;\r\n    private _maxY: Nullable<number>;\r\n\r\n    /**\r\n     * Creates a new MultiLine\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        this._dash = [];\r\n        this._points = [];\r\n    }\r\n\r\n    /** Gets or sets dash pattern */\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets point stored at specified index\r\n     * @param index defines the index to look for\r\n     * @returns the requested point if found\r\n     */\r\n    public getAt(index: number): MultiLinePoint {\r\n        if (!this._points[index]) {\r\n            this._points[index] = new MultiLinePoint(this);\r\n        }\r\n\r\n        return this._points[index] as MultiLinePoint;\r\n    }\r\n\r\n    /** Function called when a point is updated */\r\n    public onPointUpdate = (): void => {\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Adds new points to the point collection\r\n     * @param items defines the list of items (mesh, control or 2d coordiantes) to add \r\n     * @returns the list of created MultiLinePoint\r\n     */\r\n    public add(...items: (AbstractMesh | Control | { x: string | number, y: string | number })[]): MultiLinePoint[] {\r\n        return items.map(item => this.push(item));\r\n    }\r\n\r\n    /**\r\n     * Adds a new point to the point collection\r\n     * @param item defines the item (mesh, control or 2d coordiantes) to add \r\n     * @returns the created MultiLinePoint\r\n     */\r\n    public push(item?: (AbstractMesh | Control | { x: string | number, y: string | number })): MultiLinePoint {\r\n        var point: MultiLinePoint = this.getAt(this._points.length);\r\n\r\n        if (item == null) return point;\r\n\r\n        if (item instanceof AbstractMesh) {\r\n            point.mesh = item;\r\n        }\r\n        else if (item instanceof Control) {\r\n            point.control = item;\r\n        }\r\n        else if (item.x != null && item.y != null) {\r\n            point.x = item.x;\r\n            point.y = item.y;\r\n        }\r\n\r\n        return point;\r\n    }\r\n\r\n    /**\r\n     * Remove a specific value or point from the active point collection\r\n     * @param value defines the value or point to remove\r\n     */\r\n    public remove(value: number | MultiLinePoint): void {\r\n        var index: number;\r\n\r\n        if (value instanceof MultiLinePoint) {\r\n            index = this._points.indexOf(value);\r\n\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            index = value;\r\n        }\r\n\r\n        var point: Nullable<MultiLinePoint> = this._points[index];\r\n\r\n        if (!point) {\r\n            return;\r\n        }\r\n\r\n        point.dispose();\r\n\r\n        this._points.splice(index, 1);\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MultiLine\";\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            context.strokeStyle = this.color;\r\n            context.lineWidth = this._lineWidth;\r\n            context.setLineDash(this._dash);\r\n\r\n            context.beginPath();\r\n\r\n            var first: boolean = true; //first index is not necessarily 0\r\n\r\n            this._points.forEach(point => {\r\n                if (!point) {\r\n                    return;\r\n                }\r\n\r\n                if (first) {\r\n                    context.moveTo(point._point.x, point._point.y);\r\n\r\n                    first = false;\r\n                }\r\n                else {\r\n                    context.lineTo(point._point.x, point._point.y);\r\n                }\r\n            });\r\n\r\n            context.stroke();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._minX = null;\r\n        this._minY = null;\r\n        this._maxX = null;\r\n        this._maxY = null;\r\n\r\n        this._points.forEach((point, index) => {\r\n            if (!point) {\r\n                return;\r\n            }\r\n\r\n            point.translate();\r\n\r\n            if (this._minX == null || point._point.x < this._minX) this._minX = point._point.x;\r\n            if (this._minY == null || point._point.y < this._minY) this._minY = point._point.y;\r\n            if (this._maxX == null || point._point.x > this._maxX) this._maxX = point._point.x;\r\n            if (this._maxY == null || point._point.y > this._maxY) this._maxY = point._point.y;\r\n        });\r\n\r\n        if (this._minX == null) this._minX = 0;\r\n        if (this._minY == null) this._minY = 0;\r\n        if (this._maxX == null) this._maxX = 0;\r\n        if (this._maxY == null) this._maxY = 0;\r\n    }\r\n\r\n    public _measure(): void {\r\n        if (this._minX == null || this._maxX == null || this._minY == null || this._maxY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.width = Math.abs(this._maxX - this._minX) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._maxY - this._minY) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (this._minX == null || this._minY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.left = this._minX - this._lineWidth / 2;\r\n        this._currentMeasure.top = this._minY - this._lineWidth / 2;\r\n    }\r\n\r\n    public dispose(): void {\r\n        while (this._points.length > 0) {\r\n            this.remove(this._points.length - 1);\r\n        }\r\n\r\n        super.dispose();\r\n    }\r\n\r\n}    \r\n","import { Control } from \"./control\";\r\nimport { Observable, Vector2 } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\nimport { StackPanel, TextBlock } from \".\";\r\n\r\n/**\r\n * Class used to create radio button controls\r\n */\r\nexport class RadioButton extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets group name */\r\n    public group = \"\";\r\n\r\n    /** Observable raised when isChecked is changed */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n\r\n        if (this._isChecked && this._host) {\r\n            // Update all controls from same group\r\n            this._host.executeOnAllControls((control) => {\r\n                if (control === this) {\r\n                    return;\r\n                }\r\n\r\n                if ((<any>control).group === undefined) {\r\n                    return;\r\n                }\r\n                var childRadio = (<RadioButton>control);\r\n                if (childRadio.group === this.group) {\r\n                    childRadio.isChecked = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new RadioButton\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"RadioButton\";\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            let actualWidth = this._currentMeasure.width - this._thickness;\r\n            let actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            // Outer\r\n            Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n                this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, context);\r\n\r\n            context.fillStyle = this._background;\r\n            context.fill();\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            context.strokeStyle = this.color;\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.stroke();\r\n\r\n            // Inner\r\n            if (this._isChecked) {\r\n                context.fillStyle = this.color;\r\n                let offsetWidth = actualWidth * this._checkSizeRatio;\r\n                let offseHeight = actualHeight * this._checkSizeRatio;\r\n\r\n                Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n                    offsetWidth / 2 - this._thickness / 2, offseHeight / 2 - this._thickness / 2, context);\r\n\r\n                context.fill();\r\n            }\r\n\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isChecked) {\r\n            this.isChecked = true;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a radio button with a header\r\n     * @param title defines the label to use for the header\r\n     * @param group defines the group to use for the radio button\r\n     * @param isChecked defines the initial state of the radio button\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the radio button and a textBlock\r\n     */\r\n    public static AddRadioButtonWithHeader(title: string, group: string, isChecked: boolean, onValueChanged: (button: RadioButton, value: boolean) => void): StackPanel {\r\n        var panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        var radio = new RadioButton();\r\n        radio.width = \"20px\";\r\n        radio.height = \"20px\";\r\n        radio.isChecked = isChecked;\r\n        radio.color = \"green\";\r\n        radio.group = group;\r\n        radio.onIsCheckedChangedObservable.add((value) => onValueChanged(radio, value));\r\n        panel.addControl(radio);    \r\n    \r\n        var header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header); \r\n\r\n        return panel;\r\n    }\r\n}   \r\n","import { StackPanel } from \"./stackPanel\";\r\nimport { Observable, Nullable, Observer } from \"babylonjs\";\r\nimport { Button } from \"./button\";\r\nimport { Container } from \"./container\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { InputText } from \"./inputText\";\r\n\r\n\r\n/**\r\n * Class used to store key control properties\r\n */\r\nexport class KeyPropertySet {\r\n    /** Width */\r\n    width?: string;\r\n    /** Height */\r\n    height?: string;\r\n    /** Left padding */\r\n    paddingLeft?: string;\r\n    /** Right padding */\r\n    paddingRight?: string;\r\n    /** Top padding */\r\n    paddingTop?: string;\r\n    /** Bottom padding */\r\n    paddingBottom?: string;\r\n    /** Foreground color */\r\n    color?: string;\r\n    /** Background color */\r\n    background?: string;\r\n}\r\n\r\n/**\r\n * Class used to create virtual keyboard\r\n */\r\nexport class VirtualKeyboard extends StackPanel {\r\n    /** Observable raised when a key is pressed */\r\n    public onKeyPressObservable = new Observable<string>();\r\n\r\n    /** Gets or sets default key button width */\r\n    public defaultButtonWidth = \"40px\";\r\n    /** Gets or sets default key button height */\r\n    public defaultButtonHeight = \"40px\";\r\n\r\n    /** Gets or sets default key button left padding */\r\n    public defaultButtonPaddingLeft = \"2px\";\r\n    /** Gets or sets default key button right padding */\r\n    public defaultButtonPaddingRight = \"2px\";\r\n    /** Gets or sets default key button top padding */\r\n    public defaultButtonPaddingTop = \"2px\";\r\n    /** Gets or sets default key button bottom padding */\r\n    public defaultButtonPaddingBottom = \"2px\";\r\n\r\n    /** Gets or sets default key button foreground color */\r\n    public defaultButtonColor = \"#DDD\";\r\n    /** Gets or sets default key button background color */\r\n    public defaultButtonBackground = \"#070707\";\r\n\r\n    /** Gets or sets shift button foreground color */\r\n    public shiftButtonColor = \"#7799FF\";\r\n    /** Gets or sets shift button thickness*/\r\n    public selectedShiftThickness = 1;\r\n\r\n    /** Gets shift key state */\r\n    public shiftState = 0;\r\n\r\n    protected _getTypeName(): string {\r\n        return \"VirtualKeyboard\";\r\n    }\r\n\r\n    private _createKey(key: string, propertySet: Nullable<KeyPropertySet>) {\r\n        var button = Button.CreateSimpleButton(key, key);\r\n\r\n        button.width = propertySet && propertySet.width ? propertySet.width : this.defaultButtonWidth;\r\n        button.height = propertySet && propertySet.height ? propertySet.height : this.defaultButtonHeight;\r\n        button.color = propertySet && propertySet.color ? propertySet.color : this.defaultButtonColor;\r\n        button.background = propertySet && propertySet.background ? propertySet.background : this.defaultButtonBackground;\r\n        button.paddingLeft = propertySet && propertySet.paddingLeft ? propertySet.paddingLeft : this.defaultButtonPaddingLeft;\r\n        button.paddingRight = propertySet && propertySet.paddingRight ? propertySet.paddingRight : this.defaultButtonPaddingRight;\r\n        button.paddingTop = propertySet && propertySet.paddingTop ? propertySet.paddingTop : this.defaultButtonPaddingTop;\r\n        button.paddingBottom = propertySet && propertySet.paddingBottom ? propertySet.paddingBottom : this.defaultButtonPaddingBottom;\r\n\r\n        button.thickness = 0;\r\n        button.isFocusInvisible = true;\r\n\r\n        button.shadowColor = this.shadowColor;\r\n        button.shadowBlur = this.shadowBlur;\r\n        button.shadowOffsetX = this.shadowOffsetX;\r\n        button.shadowOffsetY = this.shadowOffsetY;\r\n\r\n        button.onPointerUpObservable.add(() => {\r\n            this.onKeyPressObservable.notifyObservers(key);\r\n        });\r\n\r\n        return button;\r\n    }\r\n\r\n    /**\r\n     * Adds a new row of keys\r\n     * @param keys defines the list of keys to add\r\n     * @param propertySets defines the associated property sets\r\n     */\r\n    public addKeysRow(keys: Array<string>, propertySets?: Array<KeyPropertySet>): void {\r\n        let panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.isFocusInvisible = true;\r\n\r\n        for (var i = 0; i < keys.length; i++) {\r\n            let properties = null;\r\n\r\n            if (propertySets && propertySets.length === keys.length) {\r\n                properties = propertySets[i];\r\n            }\r\n\r\n            panel.addControl(this._createKey(keys[i], properties));\r\n        }\r\n\r\n        this.addControl(panel);\r\n    }\r\n\r\n    /**\r\n     * Set the shift key to a specific state\r\n     * @param shiftState defines the new shift state\r\n     */\r\n    public applyShiftState(shiftState: number): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            let row = this.children[i];\r\n            if (!row || !(<Container>row).children) {\r\n                continue;\r\n            }\r\n\r\n            let rowContainer = <Container>row;\r\n            for (var j = 0; j < rowContainer.children.length; j++) {\r\n                let button = rowContainer.children[j] as Button;\r\n\r\n                if (!button || !button.children[0]) {\r\n                    continue;\r\n                }\r\n\r\n                let button_tblock = button.children[0] as TextBlock;\r\n\r\n                if (button_tblock.text === \"\\u21E7\") {\r\n                    button.color = (shiftState ? this.shiftButtonColor : this.defaultButtonColor);\r\n                    button.thickness = (shiftState > 1 ? this.selectedShiftThickness : 0);\r\n                }\r\n\r\n                button_tblock.text = (shiftState > 0 ? button_tblock.text.toUpperCase() : button_tblock.text.toLowerCase());\r\n            }\r\n        }\r\n    }\r\n\r\n    private _connectedInputText: Nullable<InputText>;\r\n    private _onFocusObserver: Nullable<Observer<InputText>>;\r\n    private _onBlurObserver: Nullable<Observer<InputText>>;\r\n    private _onKeyPressObserver: Nullable<Observer<string>>;\r\n\r\n    /** Gets the input text control attached with the keyboard */\r\n    public get connectedInputText(): Nullable<InputText> {\r\n        return this._connectedInputText;\r\n    }\r\n\r\n    /**\r\n     * Connects the keyboard with an input text control\r\n     * @param input defines the target control\r\n     */\r\n    public connect(input: InputText): void {\r\n        this.isVisible = false;\r\n        this._connectedInputText = input;\r\n\r\n        // Events hooking\r\n        this._onFocusObserver = input.onFocusObservable.add(() => {\r\n            this.isVisible = true;\r\n        });\r\n\r\n        this._onBlurObserver = input.onBlurObservable.add(() => {\r\n            this.isVisible = false;\r\n        });\r\n\r\n        this._onKeyPressObserver = this.onKeyPressObservable.add((key) => {\r\n            if (!this._connectedInputText) {\r\n                return;\r\n            }\r\n            switch (key) {\r\n                case \"\\u21E7\":\r\n                    this.shiftState++;\r\n                    if (this.shiftState > 2) {\r\n                        this.shiftState = 0;\r\n                    }\r\n                    this.applyShiftState(this.shiftState);\r\n                    return;\r\n                case \"\\u2190\":\r\n                    this._connectedInputText.processKey(8);\r\n                    return;\r\n                case \"\\u21B5\":\r\n                    this._connectedInputText.processKey(13);\r\n                    return;\r\n            }\r\n            this._connectedInputText.processKey(-1, (this.shiftState ? key.toUpperCase() : key));\r\n\r\n            if (this.shiftState === 1) {\r\n                this.shiftState = 0;\r\n                this.applyShiftState(this.shiftState);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disconnects the keyboard from an input text control\r\n     */\r\n    public disconnect(): void {\r\n        if (!this._connectedInputText) {\r\n            return;\r\n        }\r\n\r\n        this._connectedInputText.onFocusObservable.remove(this._onFocusObserver);\r\n        this._connectedInputText.onBlurObservable.remove(this._onBlurObserver);\r\n        this.onKeyPressObservable.remove(this._onKeyPressObserver);\r\n\r\n        this._connectedInputText = null;\r\n    }\r\n\r\n    // Statics\r\n\r\n    /**\r\n     * Creates a new keyboard using a default layout\r\n     * @returns a new VirtualKeyboard\r\n     */\r\n    public static CreateDefaultLayout(): VirtualKeyboard {\r\n        let returnValue = new VirtualKeyboard();\r\n\r\n        returnValue.addKeysRow([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"\\u2190\"]);\r\n        returnValue.addKeysRow([\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"]);\r\n        returnValue.addKeysRow([\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\", \"\\u21B5\"]);\r\n        returnValue.addKeysRow([\"\\u21E7\", \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\"]);\r\n        returnValue.addKeysRow([\" \"], [{ width: \"200px\" }]);\r\n\r\n        return returnValue;\r\n    }\r\n}\r\n","import { Control } from \"./control\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Observable, Vector2 } from \"babylonjs\";\r\nimport { Measure } from \"../measure\";\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class Slider extends Control {\r\n    private _thumbWidth = new ValueAndUnit(20, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _minimum = 0;\r\n    private _maximum = 100;\r\n    private _value = 50;\r\n    private _isVertical = false;\r\n    private _background = \"black\";\r\n    private _borderColor = \"white\";\r\n    private _barOffset = new ValueAndUnit(5, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _isThumbCircle = false;\r\n    private _isThumbClamped = false;\r\n\r\n    /** Observable raised when the sldier value changes */\r\n    public onValueChangedObservable = new Observable<number>();\r\n\r\n    /** Gets or sets border color */\r\n    public get borderColor(): string {\r\n        return this._borderColor;\r\n    }\r\n\r\n    public set borderColor(value: string) {\r\n        if (this._borderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._borderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets main bar offset */\r\n    public get barOffset(): string | number {\r\n        return this._barOffset.toString(this._host);\r\n    }\r\n\r\n    /** Gets main bar offset in pixels*/\r\n    public get barOffsetInPixels(): number {\r\n        return this._barOffset.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set barOffset(value: string | number) {\r\n        if (this._barOffset.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._barOffset.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets thumb width */\r\n    public get thumbWidth(): string | number {\r\n        return this._thumbWidth.toString(this._host);\r\n    }\r\n\r\n    /** Gets thumb width in pixels */\r\n    public get thumbWidthInPixels(): number {\r\n        return this._thumbWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set thumbWidth(value: string | number) {\r\n        if (this._thumbWidth.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._thumbWidth.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets minimum value */\r\n    public get minimum(): number {\r\n        return this._minimum;\r\n    }\r\n\r\n    public set minimum(value: number) {\r\n        if (this._minimum === value) {\r\n            return;\r\n        }\r\n\r\n        this._minimum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets maximum value */\r\n    public get maximum(): number {\r\n        return this._maximum;\r\n    }\r\n\r\n    public set maximum(value: number) {\r\n        if (this._maximum === value) {\r\n            return;\r\n        }\r\n\r\n        this._maximum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets current value */\r\n    public get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: number) {\r\n        value = Math.max(Math.min(value, this._maximum), this._minimum);\r\n\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n\r\n        this._value = value;\r\n        this._markAsDirty();\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    /**Gets or sets a boolean indicating if the slider should be vertical or horizontal */\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the thumb should be round or square */\r\n    public get isThumbCircle(): boolean {\r\n        return this._isThumbCircle;\r\n    }\r\n\r\n    public set isThumbCircle(value: boolean) {\r\n        if (this._isThumbCircle === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbCircle = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating if the thumb can go over main bar extends */\r\n    public get isThumbClamped(): boolean {\r\n        return this._isThumbClamped;\r\n    }\r\n\r\n    public set isThumbClamped(value: boolean) {\r\n        if (this._isThumbClamped === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbClamped = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Slider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Slider\";\r\n    }\r\n\r\n    protected _getThumbThickness(type: string, backgroundLength: number): number {\r\n        var thumbThickness = 0;\r\n        switch (type) {\r\n            case \"circle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.max(this._thumbWidth.getValue(this._host), backgroundLength);\r\n                }\r\n                else {\r\n                    thumbThickness = backgroundLength * this._thumbWidth.getValue(this._host);\r\n                }\r\n                break;\r\n            case \"rectangle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.min(this._thumbWidth.getValue(this._host), backgroundLength);\r\n                }\r\n                else {\r\n                    thumbThickness = backgroundLength * this._thumbWidth.getValue(this._host);\r\n                }\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n            // Main bar\r\n            var effectiveBarOffset = 0;\r\n            var type = this.isThumbCircle ? \"circle\" : \"rectangle\";\r\n            var left = this._currentMeasure.left;\r\n            var top = this._currentMeasure.top;\r\n            var width = this._currentMeasure.width;\r\n            var height = this._currentMeasure.height;\r\n\r\n            var backgroundBoxLength = Math.max(this._currentMeasure.width, this._currentMeasure.height);\r\n            var backgroundBoxThickness = Math.min(this._currentMeasure.width, this._currentMeasure.height);\r\n\r\n            var effectiveThumbThickness = this._getThumbThickness(type, backgroundBoxThickness);\r\n            backgroundBoxLength -= effectiveThumbThickness;\r\n\r\n            var radius = 0;\r\n\r\n\r\n            //throw error when height is less than width for vertical slider\r\n            if ((this._isVertical && this._currentMeasure.height < this._currentMeasure.width)) {\r\n                console.error(\"Height should be greater than width\");\r\n                return;\r\n            }\r\n            if (this._barOffset.isPixel) {\r\n                effectiveBarOffset = Math.min(this._barOffset.getValue(this._host), backgroundBoxThickness);\r\n            }\r\n            else {\r\n                effectiveBarOffset = backgroundBoxThickness * this._barOffset.getValue(this._host);\r\n            }\r\n\r\n            backgroundBoxThickness -= (effectiveBarOffset * 2);\r\n\r\n            if (this._isVertical) {\r\n                left += effectiveBarOffset;\r\n                if (!this.isThumbClamped) {\r\n                    top += (effectiveThumbThickness / 2);\r\n                }\r\n\r\n                height = backgroundBoxLength;\r\n                width = backgroundBoxThickness;\r\n\r\n            }\r\n            else {\r\n                top += effectiveBarOffset;\r\n                if (!this.isThumbClamped) {\r\n                    left += (effectiveThumbThickness / 2);\r\n                }\r\n                height = backgroundBoxThickness;\r\n                width = backgroundBoxLength;\r\n            }\r\n\r\n            if (this.isThumbClamped && this.isThumbCircle) {\r\n                if (this._isVertical)\r\n                    top += (effectiveThumbThickness / 2);\r\n                else\r\n                    left += (effectiveThumbThickness / 2);\r\n\r\n                radius = backgroundBoxThickness / 2;\r\n            }\r\n            else {\r\n                radius = (effectiveThumbThickness - effectiveBarOffset) / 2;\r\n            }\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            var thumbPosition = (this._isVertical) ? ((this._maximum - this._value) / (this._maximum - this._minimum)) * backgroundBoxLength : ((this._value - this._minimum) / (this._maximum - this._minimum)) * backgroundBoxLength;\r\n            context.fillStyle = this._background;\r\n\r\n            if (this._isVertical) {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left + backgroundBoxThickness / 2, top, radius, Math.PI, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top, width, height);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top, width, height + effectiveThumbThickness);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, width, height);\r\n                }\r\n            }\r\n            else {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left + backgroundBoxLength, top + (backgroundBoxThickness / 2), radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top, width, height);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top, width + effectiveThumbThickness, height);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, width, height);\r\n                }\r\n            }\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            context.fillStyle = this.color;\r\n            if (this._isVertical) {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left + backgroundBoxThickness / 2, top + backgroundBoxLength, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top + thumbPosition, width, this._currentMeasure.height - thumbPosition);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                }\r\n            }\r\n            else {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left, top + backgroundBoxThickness / 2, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, thumbPosition, height);\r\n                }\r\n            }\r\n\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n            if (this._isThumbCircle) {\r\n                context.beginPath();\r\n                if (this._isVertical) {\r\n                    context.arc(left + backgroundBoxThickness / 2, top + thumbPosition, radius, 0, 2 * Math.PI);\r\n                }\r\n                else {\r\n                    context.arc(left + thumbPosition, top + (backgroundBoxThickness / 2), radius, 0, 2 * Math.PI);\r\n                }\r\n                context.fill();\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                context.stroke();\r\n            }\r\n            else {\r\n                if (this._isVertical) {\r\n                    context.fillRect(left - effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, effectiveThumbThickness);\r\n                }\r\n                else {\r\n                    context.fillRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                if (this._isVertical) {\r\n                    context.strokeRect(left - effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, effectiveThumbThickness);\r\n                }\r\n                else {\r\n                    context.strokeRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n            }\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n\r\n    // Events\r\n    private _pointerIsDown = false;\r\n\r\n    private _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        if (this._isVertical) {\r\n            this.value = this._minimum + (1 - ((y - this._currentMeasure.top) / this._currentMeasure.height)) * (this._maximum - this._minimum);\r\n        }\r\n        else {\r\n            this.value = this._minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this._maximum - this._minimum);\r\n        }\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex)) {\r\n            return false;\r\n        }\r\n\r\n        this._pointerIsDown = true;\r\n\r\n        this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        this._host._capturingControl[pointerId] = this;\r\n\r\n        return true;\r\n    }\r\n\r\n    public _onPointerMove(target: Control, coordinates: Vector2): void {\r\n        if (this._pointerIsDown) {\r\n            this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        }\r\n\r\n        super._onPointerMove(target, coordinates);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._pointerIsDown = false;\r\n\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n}\r\n","\r\nimport { Control } from \".\";\r\nimport { Measure } from \"..\";\r\n\r\n/** Class used to render a grid  */\r\nexport class DisplayGrid extends Control {\r\n    private _cellWidth = 20;\r\n    private _cellHeight = 20;\r\n\r\n    private _minorLineTickness = 1;\r\n    private _minorLineColor = \"DarkGray\";\r\n\r\n    private _majorLineTickness = 2;\r\n    private _majorLineColor = \"White\";\r\n\r\n    private _majorLineFrequency = 5;\r\n\r\n    private _background = \"Black\";\r\n\r\n    private _displayMajorLines = true;\r\n    private _displayMinorLines = true;\r\n\r\n    /** Gets or sets a boolean indicating if minor lines must be rendered (true by default)) */\r\n    public get displayMinorLines(): boolean {\r\n        return this._displayMinorLines;\r\n    }\r\n\r\n    public set displayMinorLines(value: boolean) {\r\n        if (this._displayMinorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMinorLines = value;\r\n        this._markAsDirty();\r\n    }  \r\n\r\n    /** Gets or sets a boolean indicating if major lines must be rendered (true by default)) */\r\n    public get displayMajorLines(): boolean {\r\n        return this._displayMajorLines;\r\n    }\r\n\r\n    public set displayMajorLines(value: boolean) {\r\n        if (this._displayMajorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMajorLines = value;\r\n        this._markAsDirty();\r\n    }  \r\n\r\n    /** Gets or sets background color (Black by default) */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }    \r\n\r\n    /** Gets or sets the width of each cell (20 by default) */\r\n    public get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n\r\n    public set cellWidth(value: number) {\r\n        this._cellWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of each cell (20 by default) */\r\n    public get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n\r\n    public set cellHeight(value: number) {\r\n        this._cellHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the tickness of minor lines (1 by default) */\r\n    public get minorLineTickness(): number {\r\n        return this._minorLineTickness;\r\n    }\r\n\r\n    public set minorLineTickness(value: number) {\r\n        this._minorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of minor lines (DarkGray by default) */\r\n    public get minorLineColor(): string {\r\n        return this._minorLineColor;\r\n    }\r\n\r\n    public set minorLineColor(value: string) {\r\n        this._minorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }    \r\n\r\n    /** Gets or sets the tickness of major lines (2 by default) */\r\n    public get majorLineTickness(): number {\r\n        return this._majorLineTickness;\r\n    }\r\n\r\n    public set majorLineTickness(value: number) {\r\n        this._majorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of major lines (White by default) */\r\n    public get majorLineColor(): string {\r\n        return this._majorLineColor;\r\n    }\r\n\r\n    public set majorLineColor(value: string) {\r\n        this._majorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }    \r\n\r\n    /** Gets or sets the frequency of major lines (default is 1 every 5 minor lines)*/\r\n    public get majorLineFrequency(): number {\r\n        return this._majorLineFrequency;\r\n    }\r\n\r\n    public set majorLineFrequency(value: number) {\r\n        this._majorLineFrequency = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new GridDisplayRectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    public _draw(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n        \r\n        this._applyStates(context);\r\n\r\n        if (this._processMeasures(parentMeasure, context)) {\r\n\r\n            if (this._background) {\r\n                context.fillStyle = this._background;\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n\r\n            let cellCountX = this._currentMeasure.width / this._cellWidth;\r\n            let cellCountY = this._currentMeasure.height / this._cellHeight;\r\n\r\n            // Minor lines    \r\n            const left = this._currentMeasure.left + this._currentMeasure.width / 2;\r\n            const top = this._currentMeasure.top + this._currentMeasure.height / 2;\r\n\r\n            if (this._displayMinorLines) {\r\n                context.strokeStyle = this._minorLineColor;\r\n                context.lineWidth = this._minorLineTickness;    \r\n\r\n                for (var x = -cellCountX / 2; x < cellCountX / 2; x++) {\r\n                    const cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n                    \r\n                    context.stroke();                \r\n                }\r\n\r\n                for (var y = -cellCountY / 2; y < cellCountY / 2; y++) {\r\n                    const cellY = top + y * this.cellHeight;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.stroke();\r\n                }\r\n            }\r\n\r\n            // Major lines\r\n            if (this._displayMajorLines) {\r\n                context.strokeStyle = this._majorLineColor;\r\n                context.lineWidth = this._majorLineTickness;        \r\n\r\n                for (var x = -cellCountX / 2 + this._majorLineFrequency; x < cellCountX / 2; x += this._majorLineFrequency) {\r\n                    let cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();    \r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n                    context.stroke();\r\n                }\r\n\r\n                for (var y = -cellCountY / 2 + this._majorLineFrequency; y < cellCountY / 2; y += this._majorLineFrequency) {\r\n                    let cellY = top + y * this.cellHeight;\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.closePath();\r\n                    context.stroke();\r\n                }\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"DisplayGrid\";\r\n    }\r\n}    ","import { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\n\r\n/**\r\n * Forcing an export so that this code will execute\r\n * @hidden\r\n */\r\nconst name = \"Statics\";\r\n\r\nexport { name };\r\n\r\n/**\r\n * Creates a stack panel that can be used to render headers\r\n * @param control defines the control to associate with the header\r\n * @param text defines the text of the header\r\n * @param size defines the size of the header\r\n * @param options defines options used to configure the header\r\n * @returns a new StackPanel\r\n */\r\nControl.AddHeader = function (control: Control, text: string, size: string | number, options: { isHorizontal: boolean, controlFirst: boolean }): StackPanel {\r\n    let panel = new StackPanel(\"panel\");\r\n    let isHorizontal = options ? options.isHorizontal : true;\r\n    let controlFirst = options ? options.controlFirst : true;\r\n\r\n    panel.isVertical = !isHorizontal;\r\n\r\n    let header = new TextBlock(\"header\");\r\n    header.text = text;\r\n    header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n    if (isHorizontal) {\r\n        header.width = size;\r\n    } else {\r\n        header.height = size;\r\n    }\r\n\r\n    if (controlFirst) {\r\n        panel.addControl(control);\r\n        panel.addControl(header);\r\n        header.paddingLeft = \"5px\";\r\n    } else {\r\n        panel.addControl(header);\r\n        panel.addControl(control);\r\n        header.paddingRight = \"5px\";\r\n    }\r\n\r\n    header.shadowBlur = control.shadowBlur;\r\n    header.shadowColor = control.shadowColor;\r\n    header.shadowOffsetX = control.shadowOffsetX;\r\n    header.shadowOffsetY = control.shadowOffsetY;\r\n\r\n    return panel;\r\n}","export * from \"./controls\";\r\nexport * from \"./materials\";\r\nexport * from \"./charting\";\r\n\r\nexport * from \"./gui3DManager\";\r\nexport * from \"./vector3WithInfo\";","export * from \"./abstractButton3D\";\r\nexport * from \"./button3D\";\r\nexport * from \"./container3D\";\r\nexport * from \"./control3D\";\r\nexport * from \"./cylinderPanel\";\r\nexport * from \"./holographicButton\";\r\nexport * from \"./meshButton3D\";\r\nexport * from \"./planePanel\";\r\nexport * from \"./scatterPanel\";\r\nexport * from \"./spherePanel\";\r\nexport * from \"./stackPanel3D\";\r\nexport * from \"./volumeBasedPanel\";","import { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { float, Tools, Vector3, Matrix, Tmp } from \"babylonjs\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a cylinder\r\n */\r\nexport class CylinderPanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the cylinder where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n        let newPos = this._cylindricalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new BABYLON.Vector3(-newPos.x, newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new BABYLON.Vector3(2 * newPos.x, newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(BABYLON.Axis.Y, Math.PI, BABYLON.Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _cylindricalMapping(source: Vector3) {\r\n        let newPos = new Vector3(0, source.y, this._radius);\r\n\r\n        let yAngle = (source.x / this._radius);\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, 0, 0, Tmp.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, Tmp.Matrix[0]);\r\n    }\r\n}\r\n","import { Button3D } from \"./button3D\";\r\nimport { Mesh, StandardMaterial, Nullable, Observer, Vector3, Scene, TransformNode, MeshBuilder, Color3 } from \"babylonjs\";\r\nimport { FluentMaterial } from \"../materials/fluentMaterial\";\r\nimport { StackPanel } from \"../../2D/controls/stackPanel\";\r\nimport { Image } from \"../../2D/controls/image\";\r\nimport { TextBlock } from \"../../2D/controls/textBlock\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\n\r\n/**\r\n * Class used to create a holographic button in 3D\r\n */\r\nexport class HolographicButton extends Button3D {\r\n    private _backPlate: Mesh;\r\n    private _textPlate: Mesh;\r\n    private _frontPlate: Mesh;\r\n    private _text: string;\r\n    private _imageUrl: string;\r\n    private _shareMaterials = true;\r\n    private _frontMaterial: FluentMaterial;\r\n    private _backMaterial: FluentMaterial;\r\n    private _plateMaterial: StandardMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n\r\n    /**\r\n     * Gets or sets text for the button\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n\r\n        this._text = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image url for the button\r\n     */\r\n    public get imageUrl(): string {\r\n        return this._imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        if (this._imageUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._imageUrl = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets the back material used by this button\r\n     */\r\n    public get backMaterial(): FluentMaterial {\r\n        return this._backMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the front material used by this button\r\n     */\r\n    public get frontMaterial(): FluentMaterial {\r\n        return this._frontMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the plate material used by this button\r\n     */\r\n    public get plateMaterial(): StandardMaterial {\r\n        return this._plateMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this button shares its material with other HolographicButtons\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string, shareMaterials = true) {\r\n        super(name);\r\n\r\n        this._shareMaterials = shareMaterials;\r\n\r\n        // Default animations\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(true);\r\n        }\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(false);\r\n        }\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"HolographicButton\";\r\n    }\r\n\r\n    private _rebuildContent(): void {\r\n        this._disposeFacadeTexture();\r\n\r\n        let panel = new StackPanel();\r\n        panel.isVertical = true;\r\n\r\n        if (this._imageUrl) {\r\n            let image = new Image();\r\n            image.source = this._imageUrl;\r\n            image.paddingTop = \"40px\";\r\n            image.height = \"180px\";\r\n            image.width = \"100px\";\r\n            image.paddingBottom = \"40px\";\r\n            panel.addControl(image);\r\n        }\r\n\r\n        if (this._text) {\r\n            let text = new TextBlock();\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.height = \"30px\";\r\n            text.fontSize = 24;\r\n            panel.addControl(text);\r\n        }\r\n\r\n        if (this._frontPlate) {\r\n            this.content = panel;\r\n        }\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._backPlate = MeshBuilder.CreateBox(this.name + \"BackMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08\r\n        }, scene);\r\n\r\n        this._frontPlate = MeshBuilder.CreateBox(this.name + \"FrontMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08\r\n        }, scene);\r\n\r\n        this._frontPlate.parent = this._backPlate;\r\n        this._frontPlate.position.z = -0.08;\r\n        this._frontPlate.isPickable = false;\r\n        this._frontPlate.setEnabled(false);\r\n\r\n        this._textPlate = <Mesh>super._createNode(scene);\r\n        this._textPlate.parent = this._backPlate;\r\n        this._textPlate.position.z = -0.08;\r\n        this._textPlate.isPickable = false;\r\n\r\n        return this._backPlate;\r\n    }\r\n\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._plateMaterial.emissiveTexture = facadeTexture;\r\n        this._plateMaterial.opacityTexture = facadeTexture;\r\n    }\r\n\r\n    private _createBackMaterial(mesh: Mesh) {\r\n        this._backMaterial = new FluentMaterial(this.name + \"Back Material\", mesh.getScene());\r\n        this._backMaterial.renderHoverLight = true;\r\n        this._pickedPointObserver = this._host.onPickedPointChangedObservable.add(pickedPoint => {\r\n            if (pickedPoint) {\r\n                this._backMaterial.hoverPosition = pickedPoint;\r\n                this._backMaterial.hoverColor.a = 1.0;\r\n            } else {\r\n                this._backMaterial.hoverColor.a = 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    private _createFrontMaterial(mesh: Mesh) {\r\n        this._frontMaterial = new FluentMaterial(this.name + \"Front Material\", mesh.getScene());\r\n        this._frontMaterial.innerGlowColorIntensity = 0; // No inner glow\r\n        this._frontMaterial.alpha = 0.5; // Additive\r\n        this._frontMaterial.renderBorders = true;\r\n    }\r\n\r\n    private _createPlateMaterial(mesh: Mesh) {\r\n        this._plateMaterial = new StandardMaterial(this.name + \"Plate Material\", mesh.getScene());\r\n        this._plateMaterial.specularColor = Color3.Black();\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        // Back\r\n        if (this._shareMaterials) {\r\n            if (!this._host._sharedMaterials[\"backFluentMaterial\"]) {\r\n                this._createBackMaterial(mesh);\r\n                this._host._sharedMaterials[\"backFluentMaterial\"] = this._backMaterial;\r\n            } else {\r\n                this._backMaterial = this._host._sharedMaterials[\"backFluentMaterial\"] as FluentMaterial;\r\n            }\r\n\r\n            // Front\r\n            if (!this._host._sharedMaterials[\"frontFluentMaterial\"]) {\r\n                this._createFrontMaterial(mesh);\r\n                this._host._sharedMaterials[\"frontFluentMaterial\"] = this._frontMaterial;\r\n            } else {\r\n                this._frontMaterial = this._host._sharedMaterials[\"frontFluentMaterial\"] as FluentMaterial;\r\n            }\r\n        } else {\r\n            this._createBackMaterial(mesh);\r\n            this._createFrontMaterial(mesh);\r\n        }\r\n\r\n        this._createPlateMaterial(mesh);\r\n        this._backPlate.material = this._backMaterial;\r\n        this._frontPlate.material = this._frontMaterial;\r\n        this._textPlate.material = this._plateMaterial;\r\n\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        if (!this.shareMaterials) {\r\n            this._backMaterial.dispose();\r\n            this._frontMaterial.dispose();\r\n            this._plateMaterial.dispose();\r\n\r\n            if (this._pickedPointObserver) {\r\n                this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n                this._pickedPointObserver = null;\r\n            }\r\n        }\r\n    }\r\n}","import { Effect } from \"babylonjs\";\r\n\r\nconst fShader = require(\"./fluent.fragment.fx\");\r\nconst vShader = require(\"./fluent.vertex.fx\");\r\n\r\nexport function registerShader() {\r\n    // register shaders\r\n    Effect.ShadersStore[\"fluentVertexShader\"] = vShader;\r\n    Effect.ShadersStore[\"fluentPixelShader\"] = fShader;\r\n}\r\n\r\nexport { fShader, vShader };","module.exports = \"precision highp float;\\nvarying vec2 vUV;\\nuniform vec4 albedoColor;\\n#ifdef INNERGLOW\\nuniform vec4 innerGlowColor;\\n#endif\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float edgeSmoothingValue;\\nuniform float borderMinValue;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\nuniform vec3 hoverPosition;\\nuniform vec4 hoverColor;\\nuniform float hoverRadius;\\n#endif\\n#ifdef TEXTURE\\nuniform sampler2D albedoSampler;\\n#endif\\nvoid main(void) {\\nvec3 albedo=albedoColor.rgb;\\nfloat alpha=albedoColor.a;\\n#ifdef TEXTURE\\nalbedo=texture2D(albedoSampler,vUV).rgb;\\n#endif\\n#ifdef HOVERLIGHT\\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\\n#else\\nfloat pointToHover=1.0;\\n#endif\\n#ifdef BORDER \\nfloat borderPower=10.0;\\nfloat inverseBorderPower=1.0/borderPower;\\nvec3 borderColor=albedo*borderPower;\\nvec2 distanceToEdge;\\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover); \\nalbedo+=borderColor;\\nalpha=max(alpha,borderValue);\\n#endif\\n#ifdef INNERGLOW\\n\\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\\nuvGlow=uvGlow*uvGlow;\\nuvGlow=uvGlow*uvGlow;\\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y); \\n#endif\\ngl_FragColor=vec4(albedo,alpha);\\n}\"","module.exports = \"precision highp float;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec2 uv;\\n\\nuniform mat4 world;\\nuniform mat4 viewProjection;\\nvarying vec2 vUV;\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float borderWidth;\\nuniform vec3 scaleFactor;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\n#endif\\nvoid main(void) {\\nvUV=uv;\\n#ifdef BORDER\\nvec3 scale=scaleFactor;\\nfloat minScale=min(min(scale.x,scale.y),scale.z);\\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\\nfloat areaYZ=scale.y*scale.z;\\nfloat areaXZ=scale.x*scale.z;\\nfloat areaXY=scale.x*scale.y;\\nfloat scaledBorderWidth=borderWidth; \\nif (abs(normal.x) == 1.0) \\n{\\nscale.x=scale.y;\\nscale.y=scale.z;\\nif (areaYZ>areaXZ && areaYZ>areaXY)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse if (abs(normal.y) == 1.0) \\n{\\nscale.x=scale.z;\\nif (areaXZ>areaXY && areaXZ>areaYZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse \\n{\\nif (areaXY>areaYZ && areaXY>areaXZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\\nif (scale.x>scale.y)\\n{\\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\\nscaleInfo.y=1.0-scaledBorderWidth;\\n}\\nelse\\n{\\nscaleInfo.x=1.0-scaledBorderWidth;\\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\\n} \\n#endif \\nvec4 worldPos=world*vec4(position,1.0);\\n#ifdef HOVERLIGHT\\nworldPosition=worldPos.xyz;\\n#endif\\ngl_Position=viewProjection*worldPos;\\n}\\n\"","import { Scene, TransformNode, AbstractMesh, Mesh } from \"babylonjs\";\r\nimport { Button3D } from \"./button3D\";\r\n\r\n/**\r\n * Class used to create an interactable object. It's a 3D button using a mesh coming from the current scene\r\n */\r\nexport class MeshButton3D extends Button3D {\r\n    /** @hidden */\r\n    protected _currentMesh: Mesh;\r\n\r\n    /**\r\n     * Creates a new 3D button based on a mesh\r\n     * @param mesh mesh to become a 3D button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(mesh: Mesh, name?: string) {\r\n        super(name);\r\n        this._currentMesh = mesh;\r\n\r\n        /**\r\n         * Provides a default behavior on hover/out & up/down\r\n         * Override those function to create your own desired behavior specific to your mesh\r\n         */\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.1);\r\n        }\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 1.1);\r\n        }\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        }\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        }\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MeshButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._currentMesh.getChildMeshes().forEach((mesh) => {\r\n            mesh.metadata = this;\r\n        });\r\n        return this._currentMesh;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n    }\r\n}","import { Tmp, Vector3 } from \"babylonjs\";\r\nimport { Container3D } from \"./container3D\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a plane\r\n */\r\nexport class PlanePanel extends VolumeBasedPanel {\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        control.position = nodePosition.clone();\r\n        let target = Tmp.Vector3[0];\r\n\r\n        target.copyFrom(nodePosition);\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                target.addInPlace(new BABYLON.Vector3(0, 0, -1));\r\n                mesh.lookAt(target);\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                target.addInPlace(new BABYLON.Vector3(0, 0, 1));\r\n                mesh.lookAt(target);\r\n                break;\r\n        }\r\n\r\n    }\r\n}\r\n","import { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { float, Tools, Vector3, Tmp } from \"babylonjs\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a container panel where items get randomized planar mapping\r\n */\r\nexport class ScatterPanel extends VolumeBasedPanel {\r\n    private _iteration = 100.0;\r\n\r\n    /**\r\n     * Gets or sets the number of iteration to use to scatter the controls (100 by default)\r\n     */\r\n    public get iteration(): float {\r\n        return this._iteration;\r\n    }\r\n\r\n    public set iteration(value: float) {\r\n        if (this._iteration === value) {\r\n            return;\r\n        }\r\n\r\n        this._iteration = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n        let newPos = this._scatterMapping(nodePosition);\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, -1));\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, 1));\r\n                break;\r\n        }\r\n\r\n        control.position = newPos;\r\n    }\r\n\r\n    private _scatterMapping(source: Vector3): Vector3 {\r\n        source.x = (1.0 - Math.random() * 2.0) * this._cellWidth;\r\n        source.y = (1.0 - Math.random() * 2.0) * this._cellHeight;\r\n\r\n        return source;\r\n    }\r\n\r\n    protected _finalProcessing() {\r\n        var meshes = [];\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            meshes.push(child.mesh);\r\n        }\r\n\r\n        for (var count = 0; count < this._iteration; count++) {\r\n            meshes.sort((a, b) => {\r\n                let distance1 = a.position.lengthSquared();\r\n                let distance2 = b.position.lengthSquared();\r\n\r\n                if (distance1 < distance2) {\r\n                    return 1;\r\n                } else if (distance1 > distance2) {\r\n                    return -1;\r\n                }\r\n\r\n                return 0;\r\n            });\r\n\r\n            let radiusPaddingSquared = Math.pow(this.margin, 2.0);\r\n            let cellSize = Math.max(this._cellWidth, this._cellHeight);\r\n            let difference2D = Tmp.Vector2[0];\r\n            let difference = Tmp.Vector3[0];\r\n\r\n            for (let i = 0; i < meshes.length - 1; i++) {\r\n                for (let j = i + 1; j < meshes.length; j++) {\r\n                    if (i != j) {\r\n                        meshes[j].position.subtractToRef(meshes[i].position, difference);\r\n\r\n                        // Ignore Z axis\r\n                        difference2D.x = difference.x;\r\n                        difference2D.y = difference.y;\r\n                        let combinedRadius = cellSize;\r\n                        let distance = difference2D.lengthSquared() - radiusPaddingSquared;\r\n                        let minSeparation = Math.min(distance, radiusPaddingSquared);\r\n                        distance -= minSeparation;\r\n\r\n                        if (distance < (Math.pow(combinedRadius, 2.0))) {\r\n                            difference2D.normalize();\r\n                            difference.scaleInPlace((combinedRadius - Math.sqrt(distance)) * 0.5);\r\n                            meshes[j].position.addInPlace(difference);\r\n                            meshes[i].position.subtractInPlace(difference);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { float, Tools, Vector3, Matrix, Tmp } from \"babylonjs\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a sphere\r\n */\r\nexport class SpherePanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the sphere where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        let newPos = this._sphericalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new BABYLON.Vector3(-newPos.x, -newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new BABYLON.Vector3(2 * newPos.x, 2 * newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(BABYLON.Axis.Y, Math.PI, BABYLON.Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _sphericalMapping(source: Vector3) {\r\n        let newPos = new Vector3(0, 0, this._radius);\r\n\r\n        let xAngle = (source.y / this._radius);\r\n        let yAngle = -(source.x / this._radius);\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, xAngle, 0, Tmp.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, Tmp.Matrix[0]);\r\n    }\r\n}\r\n","import { Container3D } from \"./container3D\";\r\nimport { Tools, Matrix, Tmp, Vector3 } from \"babylonjs\";\r\n\r\n/**\r\n * Class used to create a stack panel in 3D on XY plane\r\n */\r\nexport class StackPanel3D extends Container3D {\r\n    private _isVertical = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the stack panel is vertical or horizontal (horizontal by default)\r\n     */\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0.1;\r\n\r\n    /**\r\n     * Creates new StackPanel\r\n     * @param isVertical \r\n     */\r\n    public constructor(isVertical = false) {\r\n        super();\r\n\r\n        this._isVertical = isVertical;\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        let width = 0;\r\n        let height = 0;\r\n        let controlCount = 0;\r\n        let extendSizes = [];\r\n\r\n        let currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, Tmp.Matrix[0]);\r\n\r\n            let boundingBox = child.mesh.getBoundingInfo().boundingBox;\r\n            let extendSize = Vector3.TransformNormal(boundingBox.extendSize, Tmp.Matrix[0]);\r\n            extendSizes.push(extendSize);\r\n\r\n            if (this._isVertical) {\r\n                height += extendSize.y;\r\n            } else {\r\n                width += extendSize.x;\r\n            }\r\n        }\r\n\r\n        if (this._isVertical) {\r\n            height += (controlCount - 1) * this.margin / 2;\r\n        } else {\r\n            width += (controlCount - 1) * this.margin / 2;\r\n        }\r\n\r\n        // Arrange\r\n        let offset: number;\r\n        if (this._isVertical) {\r\n            offset = -height;\r\n        } else {\r\n            offset = -width;\r\n        }\r\n\r\n        let index = 0;\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n            controlCount--;\r\n            let extendSize = extendSizes[index++];\r\n\r\n            if (this._isVertical) {\r\n                child.position.y = offset + extendSize.y;\r\n                child.position.x = 0;\r\n                offset += extendSize.y * 2;\r\n            } else {\r\n                child.position.x = offset + extendSize.x;\r\n                child.position.y = 0;\r\n                offset += extendSize.x * 2;\r\n            }\r\n\r\n            offset += (controlCount > 0 ? this.margin : 0)\r\n        }\r\n    }\r\n}\r\n","import { Color3 } from \"babylonjs\";\r\n\r\n/** \r\n * Class used to store data to display \r\n * @see http://doc.babylonjs.com/how_to/chart3d\r\n */\r\nexport class DataSeries {\r\n    /** Gets or sets the label of the series */\r\n    public label: string;\r\n\r\n    /** Gets or sets the color associated with the series */\r\n    public color: Color3;\r\n\r\n    /** Gets or sets the list of dimensions (used to filter data) */\r\n    public dimensions: Array<string>;\r\n\r\n    /** Gets or sets the list of values (data to display) */\r\n    public data: Array<any>;  \r\n\r\n    /**\r\n     * Apply a list of filters to the data and return a list\r\n     * @param filters defines the filters to apply\r\n     * @returns an array containing the filtered data\r\n     */\r\n    public getFilteredData(filters: {[key: string]: string}): Array<any> {\r\n        let filteredData = new Array<any>();\r\n\r\n        this.data.forEach(element => {\r\n            let isValid = false;\r\n            for (var filter in filters) {\r\n                if (!filters.hasOwnProperty(filter)) {\r\n                    continue;\r\n                }\r\n\r\n                var filterValue = filters[filter];\r\n                isValid = (element[filter] === filterValue);\r\n\r\n                if (!isValid) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isValid) {\r\n                filteredData.push(element);\r\n            }\r\n        });\r\n\r\n        return filteredData;\r\n    }\r\n\r\n    /**\r\n     * Get the different values of a dimension\r\n     * @param key defines the dimension name\r\n     * @returns An array of values\r\n     */\r\n    public getDimensionValues(key: string): Array<any> {\r\n        var result = new Array<any>();\r\n\r\n        this.data.forEach((entry) => {\r\n            var value = entry[key];\r\n            if (result.indexOf(value) === -1) {\r\n                result.push(value);\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Create a new DataSeries containing testing values\r\n     * @returns the new DataSeries\r\n     */\r\n    public static CreateFakeData(): DataSeries {\r\n        var series = new DataSeries();\r\n        series.label = \"Product #1\";\r\n        series.color = new Color3(1.0, 0, 0);\r\n\r\n        series.dimensions = [\"Year\", \"Country\"];\r\n\r\n        series.data = [\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"France\",\r\n                \"value\": 10\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"USA\",\r\n                \"value\": 200\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"India\",\r\n                \"value\": 400\r\n            },\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"UK\",\r\n                \"value\": 180\r\n            },\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Germany\",\r\n                \"value\": 400\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Australia\",\r\n                \"value\": 24\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"China\",\r\n                \"value\": 540\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Japan\",\r\n                \"value\": 150\r\n            },\r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"France\",\r\n                \"value\": 12\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"USA\",\r\n                \"value\": 120\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"India\",\r\n                \"value\": 480\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"UK\",\r\n                \"value\": 10\r\n            },\r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Germany\",\r\n                \"value\": 80\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Australia\",\r\n                \"value\": 230\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"China\",\r\n                \"value\": 490\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Japan\",\r\n                \"value\": 120\r\n            }\r\n        ];\r\n        \r\n        return series;\r\n    }\r\n\r\n    /**\r\n     * Create a new DataSeries containing testing spatial values\r\n     * @returns the new DataSeries\r\n     */\r\n    public static CreateFakeSpatialData(): DataSeries {\r\n        var series = new DataSeries();\r\n        series.label = \"Spatial Data\";\r\n        series.color = new Color3(0, 1.0, 0);\r\n\r\n        series.dimensions = [\"Year\", \"Country\"];\r\n\r\n        series.data = [\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"France\",\r\n                \"value\": 10,\r\n                \"latitude\": 46.63728,\r\n                \"longitude\": 2.338262\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"USA\",\r\n                \"value\": 200,\r\n                \"latitude\": 39.83333,\r\n                \"longitude\": -98.58334\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"India\",\r\n                \"value\": 400,\r\n                \"latitude\": 23.40601,\r\n                \"longitude\": 79.45809\r\n            },\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"UK\",\r\n                \"value\": 180,\r\n                \"latitude\": 54.56089,\r\n                \"longitude\": -2.212512\r\n            },\r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Germany\",\r\n                \"value\": 400,\r\n                \"latitude\": 51.20247,\r\n                \"longitude\": 10.3822\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Australia\",\r\n                \"value\": 24,\r\n                \"latitude\": -25.58524,\r\n                \"longitude\": 134.5041\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"China\",\r\n                \"value\": 540,\r\n                \"latitude\": 36.55309,\r\n                \"longitude\": 103.9754\r\n            }, \r\n            {\r\n                \"Year\": 2014,\r\n                \"Country\": \"Japan\",\r\n                \"value\": 150,\r\n                \"latitude\": 36.28165,\r\n                \"longitude\": 139.0773\r\n            },\r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"France\",\r\n                \"value\": 12,\r\n                \"latitude\": 46.63728,\r\n                \"longitude\": 2.338262\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"USA\",\r\n                \"value\": 120,\r\n                \"latitude\": 39.83333,\r\n                \"longitude\": -98.58334\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"India\",\r\n                \"value\": 480,\r\n                \"latitude\": 23.40601,\r\n                \"longitude\": 79.45809\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"UK\",\r\n                \"value\": 10,\r\n                \"latitude\": 54.56089,\r\n                \"longitude\": -2.212512\r\n            },\r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Germany\",\r\n                \"value\": 80,\r\n                \"latitude\": 51.20247,\r\n                \"longitude\": 10.3822\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Australia\",\r\n                \"value\": 230,\r\n                \"latitude\": -25.58524,\r\n                \"longitude\": 134.5041\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"China\",\r\n                \"value\": 490,\r\n                \"latitude\": 36.55309,\r\n                \"longitude\": 103.9754\r\n            }, \r\n            {\r\n                \"Year\": 2015,\r\n                \"Country\": \"Japan\",\r\n                \"value\": 120,\r\n                \"latitude\": 36.28165,\r\n                \"longitude\": 139.0773\r\n            }\r\n        ];\r\n        \r\n        return series;\r\n    }\r\n}","import { Nullable, TransformNode, Scene, Vector3, Engine, Observer, PointerInfo, Observable, Mesh, AbstractMesh, GlowLayer, Material } from \"babylonjs\";\r\nimport { DataSeries } from \".\";\r\nimport { AdvancedDynamicTexture, TextBlock, Rectangle, TextWrapping } from \"../../2D\";\r\nimport { FluentMaterial } from \"../materials\";\r\n\r\n/** \r\n * Base class for all chart controls\r\n * @see http://doc.babylonjs.com/how_to/chart3d#charts\r\n */\r\nexport abstract class Chart {\r\n    protected _dataSource: Nullable<DataSeries>;\r\n    protected _rootNode: TransformNode;\r\n    protected _dataFilters: {[key: string]: string};\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    protected _scene: Scene;\r\n    private _lastElementOver: Nullable<AbstractMesh>;\r\n    private _labelMeshes = new Array<Mesh>();\r\n    protected _blockRefresh = false;    \r\n    protected _elementWidth = 2;    \r\n    private _pickedPointObserver: Nullable<Observer<Vector3>>;      \r\n    protected _defaultMaterial: Nullable<Material>; \r\n    private _labelDimension: string;\r\n    private _displayLabels = true;\r\n    private _activeBar: Nullable<Mesh>;\r\n\r\n    private _glowLayer: Nullable<GlowLayer>;\r\n    private _onElementEnterObserver: Nullable<Observer<AbstractMesh>>;\r\n    private _onElementOutObserver: Nullable<Observer<AbstractMesh>>;\r\n    \r\n    private _hoverLabel: Nullable<Mesh>;\r\n\r\n    /** Observable raised when a refresh was done */\r\n    public onRefreshObservable  = new Observable<Chart>();\r\n\r\n    /** Observable raised when a new element is created */\r\n    public onElementCreatedObservable  = new Observable<AbstractMesh>();\r\n\r\n    /**\r\n     * Observable raised when the point picked by the pointer events changed\r\n     */\r\n    public onPickedPointChangedObservable = new Observable<Nullable<Vector3>>();\r\n\r\n    /**\r\n     * Observable raised when the pointer enters an element of the chart\r\n    */\r\n    public onElementEnterObservable = new Observable<AbstractMesh>();\r\n\r\n    /**\r\n     * Observable raised when the pointer leaves an element of the chart\r\n     */\r\n    public onElementOutObservable = new Observable<AbstractMesh>();\r\n\r\n    /** User defined callback used to create labels */\r\n    public labelCreationFunction: Nullable<(label: string, width: number, includeBackground: boolean) => Mesh>;\r\n\r\n    /** User defined callback used to apply specific setup to hover labels */\r\n    public updateHoverLabel: Nullable<(meshLabel: Mesh) => void>;\r\n\r\n    /** Gets or sets the width of each element */\r\n    public get elementWidth(): number {\r\n        return this._elementWidth;\r\n    }\r\n\r\n    public set elementWidth(value: number) {\r\n        if (this._elementWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._elementWidth = value;\r\n\r\n        this.refresh();\r\n    }    \r\n\r\n    /** Gets or sets the rotation of the entire chart */\r\n    public set rotation(value: Vector3) {\r\n        this._rootNode.rotation = value;\r\n    }\r\n\r\n    public get rotation(): Vector3 {\r\n        return this._rootNode.rotation;\r\n    }\r\n\r\n    /** Gets or sets the position of the entire chart */\r\n    public set position(value: Vector3) {\r\n        this._rootNode.position = value;\r\n    }\r\n\r\n    public get position(): Vector3 {\r\n        return this._rootNode.position;\r\n    }\r\n\r\n    /** Gets or sets the scaling of the entire chart */\r\n    public set scaling(value: Vector3) {\r\n        this._rootNode.scaling = value;\r\n    }\r\n\r\n    public get scaling(): Vector3 {\r\n        return this._rootNode.scaling;\r\n    }\r\n\r\n    /** Gets or sets the data source used by the graph */\r\n    public get dataSource(): Nullable<DataSeries> {\r\n        return this._dataSource;\r\n    }\r\n\r\n    public set dataSource(value: Nullable<DataSeries>) {\r\n        if (this._dataSource === value) {\r\n            return;\r\n        }\r\n\r\n        this._dataSource = value;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    /** Gets or sets the filters applied to data source */\r\n    public get dataFilters(): {[key: string]: string} {\r\n        return this._dataFilters;\r\n    }\r\n\r\n    public set dataFilters(filters: {[key: string]: string}) {\r\n        this._dataFilters = filters;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    /** Gets the root node associated with this graph */\r\n    public get rootNode(): TransformNode {\r\n        return this._rootNode;\r\n    }\r\n\r\n    /** Gets or sets a value indicating if refresh function should be executed (useful when multiple changes will happen and you want to run refresh only at the end) */\r\n    public get blockRefresh(): boolean {\r\n        return this._blockRefresh;\r\n    }\r\n\r\n    public set blockRefresh(value: boolean) {\r\n        if (this._blockRefresh === value) {\r\n            return;\r\n        }\r\n\r\n        this._blockRefresh = value;\r\n\r\n        if (value) {\r\n            this.refresh();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the material used by element meshes */\r\n    public get defaultMaterial(): Nullable<Material> {\r\n        return this._defaultMaterial;\r\n    }\r\n\r\n    public set defaultMaterial(value: Nullable<Material>) {\r\n        if (this._defaultMaterial === value) {\r\n            return;\r\n        }\r\n\r\n        this._defaultMaterial = value;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if labels must be displayed */\r\n    public get displayLabels(): boolean {\r\n        return this._displayLabels;\r\n    }\r\n\r\n    public set displayLabels(value: boolean) {\r\n        if (this._displayLabels === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayLabels = value;\r\n\r\n        this.refresh();\r\n    }       \r\n    \r\n    /** Gets or sets the dimension used for the labels */\r\n    public get labelDimension(): string {\r\n        return this._labelDimension;\r\n    }\r\n\r\n    public set labelDimension(value: string) {\r\n        if (this._labelDimension === value) {\r\n            return;\r\n        }\r\n\r\n        this._labelDimension = value;\r\n\r\n        this.refresh();\r\n    }    \r\n\r\n    /** Gets or sets a boolean indicating if glow should be used to highlight element hovering */\r\n    public get glowHover(): boolean {\r\n        return this._glowLayer !== undefined && this._glowLayer !== null;\r\n    }\r\n\r\n    public set glowHover(value: boolean) {\r\n        if (this.glowHover === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._glowLayer) {\r\n            this._glowLayer.dispose();\r\n            this._glowLayer = null;\r\n            return;\r\n        }\r\n\r\n        this._glowLayer = new GlowLayer(\"glow\", this._scene);\r\n\r\n        this._glowLayer.customEmissiveColorSelector = (mesh, subMesh, material, result) => {\r\n            if (mesh === this._activeBar) {\r\n                let chartColor = this._dataSource!.color.scale(0.75);\r\n                result.set(chartColor.r, chartColor.g, chartColor.b, 1.0);\r\n            } else {\r\n                result.set(0, 0, 0, 0);\r\n            }\r\n        }     \r\n    }\r\n\r\n    /** Gets or sets the name of the graph */\r\n    public name: string; \r\n\r\n    /**\r\n     * Creates a new Chart\r\n     * @param name defines the name of the graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, scene: Nullable<Scene> = Engine.LastCreatedScene) {\r\n        this.name = name;\r\n        this._rootNode = new TransformNode(name, scene);\r\n\r\n        this._scene = scene!;\r\n\r\n        this._pointerObserver = this._scene.onPointerObservable.add((pi, state) => {\r\n            if (!pi.pickInfo || !pi.pickInfo.hit) {\r\n                if (this._lastElementOver) {\r\n                    this.onElementOutObservable.notifyObservers(this._lastElementOver);\r\n                    this._lastElementOver = null;\r\n                }\r\n\r\n                this.onPickedPointChangedObservable.notifyObservers(null);\r\n                return;\r\n            }\r\n\r\n            let metadata = pi.pickInfo.pickedMesh!.metadata;\r\n            if (metadata && metadata.value) {\r\n                if (this._lastElementOver !== pi.pickInfo.pickedMesh) {\r\n                    if (this._lastElementOver) {\r\n                        this.onElementOutObservable.notifyObservers(this._lastElementOver);\r\n                        this._lastElementOver = null;\r\n                    }\r\n                    this._lastElementOver = pi.pickInfo.pickedMesh;\r\n                    this.onElementEnterObservable.notifyObservers(this._lastElementOver!);\r\n                }\r\n            } else {\r\n                if (this._lastElementOver) {\r\n                    this.onElementOutObservable.notifyObservers(this._lastElementOver);\r\n                    this._lastElementOver = null;\r\n                }\r\n            }\r\n\r\n            this.onPickedPointChangedObservable.notifyObservers(pi.pickInfo.pickedPoint);\r\n        });\r\n\r\n        this._onElementEnterObserver = this.onElementEnterObservable.add(mesh => {\r\n            this._activeBar = <Mesh>mesh;\r\n\r\n            this._hoverLabel = this._addLabel(this._activeBar.metadata.value.toString(), this._elementWidth);\r\n\r\n            this._hoverLabel.position = this._activeBar.position.clone();\r\n            this._hoverLabel.position.y = this._activeBar.scaling.y + 1.0;\r\n            this._hoverLabel.scaling.x = this._elementWidth;     \r\n            \r\n            if (this.updateHoverLabel) {\r\n                this.updateHoverLabel(this._hoverLabel);\r\n            }\r\n        });\r\n\r\n        this._onElementOutObserver = this.onElementOutObservable.add(mesh => {\r\n            this._activeBar = null;\r\n\r\n            if (this._hoverLabel) {\r\n                this._removeLabel(this._hoverLabel);\r\n                this._hoverLabel = null;\r\n            }\r\n        });\r\n\r\n\r\n        this.glowHover = true;\r\n    }\r\n\r\n    protected _createDefaultMaterial(scene: Scene): Material {\r\n        var result = new FluentMaterial(\"fluent\", scene);\r\n        result.albedoColor = this._dataSource!.color.scale(0.5);\r\n        result.innerGlowColorIntensity = 0.6;\r\n        result.renderHoverLight = true;\r\n        result.hoverRadius = 5;\r\n\r\n        this._pickedPointObserver = this.onPickedPointChangedObservable.add(pickedPoint => {\r\n            if (pickedPoint) {\r\n                result.hoverPosition = pickedPoint;\r\n                result.hoverColor.a = 1.0;\r\n            } else {\r\n                result.hoverColor.a = 0;\r\n            }\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Function called by the chart objects when they need a label. Could be user defined if you set this.labelCreationFunction to a custom callback\r\n     * @param label defines the text of the label\r\n     * @param width defines the expected width (height is supposed to be 1)\r\n     * @param includeBackground defines if a background rectangle must be added (default is true)\r\n     * @returns a mesh used to host the label\r\n     */\r\n    protected _addLabel(label: string, width: number, includeBackground = true): Mesh {\r\n        if (this.labelCreationFunction) {\r\n            let labelMesh = this.labelCreationFunction(label, width, includeBackground);\r\n            labelMesh.parent = this._rootNode;\r\n\r\n            this._labelMeshes.push(labelMesh);\r\n\r\n            return labelMesh;\r\n        }\r\n\r\n        let plane = Mesh.CreatePlane(label, 1, this._scene);\r\n\r\n        this._labelMeshes.push(plane);\r\n\r\n        plane.parent = this._rootNode;\r\n        plane.billboardMode = Mesh.BILLBOARDMODE_ALL;\r\n        plane.scaling.x = width;\r\n\r\n        let resolution = 256;\r\n        let adt = AdvancedDynamicTexture.CreateForMesh(plane, resolution, resolution / width, false, true);\r\n        let textBlock = new TextBlock(label, label);\r\n        textBlock.color = \"White\";\r\n        textBlock.textWrapping = TextWrapping.Ellipsis;\r\n        textBlock.fontWeight = \"Bold\";\r\n        textBlock.fontSize = 50;\r\n\r\n        if (includeBackground) {\r\n            let rectangle = new Rectangle(label + \"Border\");\r\n            rectangle.thickness = 4;\r\n            rectangle.color = \"White\";\r\n            rectangle.background = \"Black\";\r\n            rectangle.addControl(textBlock);\r\n            adt.addControl(rectangle);\r\n        } else {\r\n            adt.addControl(textBlock);\r\n        }\r\n\r\n        return plane;\r\n    }\r\n\r\n    /**\r\n     * Remove specific label mesh\r\n     * @param label defines the label mesh to remove\r\n     */\r\n    protected _removeLabel(label: Mesh): void {\r\n        let index = this._labelMeshes.indexOf(label);\r\n\r\n        if (index === -1) {\r\n            return;\r\n        }\r\n\r\n        this._labelMeshes.splice(index, 1);\r\n        label.dispose(false, true);\r\n    }\r\n\r\n    /** Remove all created labels */\r\n    protected _removeLabels(): void {\r\n        this._labelMeshes.forEach(label => {\r\n            label.dispose(false, true);\r\n        });\r\n\r\n        this._labelMeshes = [];\r\n    }\r\n\r\n    /** \r\n     * Force the chart to redraw itself \r\n     * @returns the current chart\r\n    */\r\n    public abstract refresh(): Chart;\r\n\r\n    /** Release all associated resources */\r\n    public dispose() {\r\n        this.onElementCreatedObservable.clear();\r\n        this.onPickedPointChangedObservable.clear();\r\n        this.onElementEnterObservable.clear();\r\n        this.onElementOutObservable.clear();\r\n\r\n        this.labelCreationFunction = null;\r\n\r\n        if (this._onElementEnterObserver) {\r\n            this.onElementEnterObservable.remove(this._onElementEnterObserver);\r\n            this._onElementEnterObserver = null;\r\n        }\r\n\r\n        if (this._onElementOutObserver) {\r\n            this.onElementOutObservable.remove(this._onElementOutObserver);\r\n            this._onElementOutObserver = null;\r\n        }         \r\n\r\n        if (this._pointerObserver) {\r\n            this._scene.onPointerObservable.remove(this._pointerObserver);\r\n            this._pointerObserver = null;\r\n        }\r\n\r\n        this.glowHover = false;\r\n\r\n        if (this._pickedPointObserver) {\r\n            this.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n            this._pickedPointObserver = null;\r\n        }\r\n\r\n        this._rootNode.dispose();\r\n    }\r\n\r\n    protected _clean(): void {\r\n        // Cleanup\r\n        var descendants = this._rootNode.getDescendants();\r\n        descendants.forEach(n => n.dispose());\r\n    }\r\n}","import { Nullable, Scene, Mesh, StandardMaterial, Animation, Engine, Matrix, AbstractMesh } from \"babylonjs\";\r\nimport { Chart } from \".\";\r\nimport { AdvancedDynamicTexture, DisplayGrid } from \"../../2D\";\r\n\r\n/** \r\n * Class used to render bar graphs \r\n * @see http://doc.babylonjs.com/how_to/chart3d#bargraph\r\n */\r\nexport class BarGraph extends Chart {\r\n    private _margin = 1;\r\n    private _maxBarHeight = 10;\r\n    private _barMeshes: Nullable<Array<AbstractMesh>>;\r\n    private _backgroundMesh: Nullable<Mesh>;\r\n    private _backgroundADT : Nullable<AdvancedDynamicTexture>;\r\n    \r\n    private _displayBackground = true;\r\n    private _backgroundResolution = 512;\r\n    private _backgroundTickCount = 5;\r\n\r\n    /** Gets or sets a boolean indicating if the background must be displayed */\r\n    public get displayBackground(): boolean {\r\n        return this._displayBackground;\r\n    }\r\n\r\n    public set displayBackground(value: boolean) {\r\n        if (this._displayBackground === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayBackground = value;\r\n\r\n        this.refresh();\r\n    }     \r\n\r\n    /** Gets or sets the margin between bars */\r\n    public get margin(): number {\r\n        return this._margin;\r\n    }\r\n\r\n    public set margin(value: number) {\r\n        if (this._margin === value) {\r\n            return;\r\n        }\r\n\r\n        this._margin = value;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    /** Gets or sets the maximum height of a bar */\r\n    public get maxBarHeight(): number {\r\n        return this._maxBarHeight;\r\n    }\r\n\r\n    public set maxBarHeight(value: number) {\r\n        if (this._maxBarHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._maxBarHeight = value;\r\n\r\n        this.refresh();\r\n    }\r\n\r\n    /**\r\n     * Creates a new BarGraph\r\n     * @param name defines the name of the graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, scene: Nullable<Scene> = Engine.LastCreatedScene) {\r\n        super(name, scene);\r\n    }\r\n\r\n    /**\r\n     * Children class can override this function to provide a new mesh (as long as it stays inside a 1x1x1 box)\r\n     * @param name defines the mesh name\r\n     * @param scene defines the hosting scene\r\n     * @returns a new mesh used to represent the current bar\r\n     */\r\n    protected _createBarMesh(name: string, scene: Scene): Mesh {\r\n        var box = Mesh.CreateBox(name, 1, scene);\r\n        box.setPivotMatrix(Matrix.Translation(0, 0.5, 0), false);\r\n\r\n        return box;\r\n    }\r\n\r\n    /** \r\n     * Force the graph to redraw itself \r\n     * @returns the current BarGraph\r\n    */\r\n    public refresh(): BarGraph {\r\n        if (this._blockRefresh) {\r\n            return this;\r\n        }\r\n\r\n        if (!this._dataSource) {\r\n            this._clean();\r\n            return this;\r\n        }\r\n\r\n        const scene = this._rootNode.getScene();\r\n\r\n        // Default material\r\n        if (!this._defaultMaterial) {\r\n            this._defaultMaterial = this._createDefaultMaterial(scene);\r\n        }\r\n\r\n        // Scan data\r\n        let min = 0;\r\n        let max = Number.MIN_VALUE;\r\n\r\n        const data = this._dataFilters ? this._dataSource.getFilteredData(this._dataFilters) : this._dataSource.data;\r\n\r\n        // Check the limit of the entire series\r\n        this._dataSource.data.forEach(entry => {\r\n            if (min > entry.value) {\r\n                min = entry.value;\r\n            }\r\n\r\n            if (max < entry.value) {\r\n                max = entry.value;\r\n            }\r\n        });\r\n\r\n        let ratio = this._maxBarHeight / (max - min);\r\n\r\n        let createMesh = false;\r\n        let left = -(data.length / 2) * (this._elementWidth + this.margin) + 1.5 * this._margin;\r\n\r\n        // Do we need to create new graph or animate the current one\r\n        if (!this._barMeshes || this._barMeshes.length !== data.length) {\r\n            this._clean();\r\n            createMesh = true;\r\n            this._barMeshes = [];\r\n        }        \r\n\r\n        this._removeLabels();\r\n\r\n        if (this._backgroundMesh) {\r\n            this._backgroundMesh.dispose(false, true);\r\n            this._backgroundMesh = null;\r\n        }\r\n\r\n        if (this._displayBackground) {\r\n            // Axis\r\n            this._backgroundMesh = BABYLON.Mesh.CreatePlane(\"background\", 1, scene);\r\n            this._backgroundMesh.parent = this._rootNode;            \r\n            this._backgroundMesh.setPivotMatrix(Matrix.Translation(0, 0.5, 0), false);\r\n\r\n            this._backgroundADT = AdvancedDynamicTexture.CreateForMesh(this._backgroundMesh, this._backgroundResolution, this._backgroundResolution, false);\r\n\r\n            let displayGrid = new DisplayGrid();\r\n            displayGrid.displayMajorLines = false;\r\n            displayGrid.minorLineColor = \"White\";\r\n            displayGrid.minorLineTickness = 2;\r\n            displayGrid.cellWidth = this._backgroundResolution / data.length;\r\n            displayGrid.cellHeight = this._backgroundResolution / this._backgroundTickCount;\r\n\r\n            this._backgroundADT.addControl(displayGrid);\r\n\r\n            (<StandardMaterial>this._backgroundMesh.material!).opacityTexture = null;\r\n\r\n            this._backgroundMesh.position.z = this._elementWidth;\r\n            this._backgroundMesh.scaling.x = (this._elementWidth + this.margin) * data.length;\r\n            this._backgroundMesh.scaling.y = this._maxBarHeight; \r\n\r\n            for (var tickIndex = 0; tickIndex <= this._backgroundTickCount; tickIndex++) {\r\n                var label = (max / this._backgroundTickCount) * tickIndex + \"\";\r\n                var ticklabel = this._addLabel(label, this._elementWidth, false);\r\n                ticklabel.position.x = left - this._elementWidth;\r\n                ticklabel.position.y = (this.maxBarHeight * tickIndex) / this._backgroundTickCount;\r\n                ticklabel.position.z = this._elementWidth;\r\n            }\r\n        }\r\n\r\n        // We will generate one bar per entry\r\n        let index = 0;\r\n        data.forEach(entry => {\r\n\r\n            var barMesh: AbstractMesh;\r\n            if (createMesh) {\r\n                barMesh = this._createBarMesh(this.name + \"_box_\" + index++, scene);\r\n                barMesh.enablePointerMoveEvents = true;\r\n                this._barMeshes!.push(barMesh);\r\n            } else {\r\n                barMesh = this._barMeshes![index++];\r\n            }\r\n\r\n            barMesh.material = this._defaultMaterial;\r\n            barMesh.metadata = entry;\r\n            barMesh.parent = this._rootNode;\r\n            barMesh.position.x = left;\r\n            let currentScalingYState = barMesh.scaling.y;\r\n            barMesh.scaling.set(this._elementWidth, 0, this._elementWidth);\r\n\r\n            var easing = new BABYLON.CircleEase();\r\n            Animation.CreateAndStartAnimation(\"entryScale\", barMesh, \"scaling.y\", 30, 30, currentScalingYState, entry.value * ratio, 0, easing);\r\n\r\n            this.onElementCreatedObservable.notifyObservers(barMesh);\r\n\r\n            left += this._elementWidth + this.margin;\r\n\r\n            // Label\r\n            if (!this.labelDimension || !this.displayLabels) {\r\n                return;\r\n            }\r\n\r\n            let label = this._addLabel(entry[this.labelDimension], this._elementWidth);\r\n            label.position = barMesh.position.clone();\r\n            label.position.z -= this._elementWidth;\r\n        });\r\n\r\n        this.onRefreshObservable.notifyObservers(this);\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _clean(): void {\r\n        super._clean();\r\n        this._barMeshes = null;\r\n        this._backgroundMesh = null;\r\n\r\n        if (this._backgroundADT) {\r\n            this._backgroundADT.dispose();\r\n            this._backgroundADT = null;\r\n        }\r\n    }\r\n}","import { Chart } from \".\";\r\nimport { Engine, Scene, Nullable, Mesh, Animation, Texture, Matrix, Observer, Vector3, Material, AbstractMesh } from \"babylonjs\";\r\nimport { FluentMaterial } from \"../materials\";\r\n\r\n/** \r\n * Class used to render bar graphs \r\n * @see http://doc.babylonjs.com/how_to/chart3d#mapgraph\r\n */\r\nexport class MapGraph extends Chart {\r\n\r\n    private _cylinderMeshes: Nullable<Array<AbstractMesh>>;\r\n    private _maxCylinderHeight = 10;\r\n    private _worldMap: Nullable<Mesh>;\r\n    private _mercatorMaterial: Nullable<FluentMaterial>;\r\n    private _worldMapSize = 40;   \r\n    private _cylinderTesselation = 16;\r\n    private _xOffset = 0;\r\n    private _yOffset = 0;\r\n    private _worldMapPickedPointObserver: Nullable<Observer<Vector3>>;  \r\n\r\n    /** Gets or sets the maximum height of a cylinder */\r\n    public get maxCylinderHeight(): number {\r\n        return this._maxCylinderHeight;\r\n    }\r\n\r\n    public set maxCylinderHeight(value: number) {\r\n        if (this._maxCylinderHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._maxCylinderHeight = value;\r\n\r\n        this.refresh();\r\n    }    \r\n\r\n    /** Gets or sets the offset (in world unit) on X axis to apply to all elements */\r\n    public get xOffset(): number {\r\n        return this._xOffset;\r\n    }\r\n\r\n    public set xOffset(value: number) {\r\n        if (this._xOffset === value) {\r\n            return;\r\n        }\r\n\r\n        this._xOffset = value;\r\n\r\n        this.refresh();\r\n    }    \r\n    \r\n    /** Gets or sets the offset (in world unit) on Y axis to apply to all elements */\r\n    public get yOffset(): number {\r\n        return this._yOffset;\r\n    }\r\n\r\n    public set yOffset(value: number) {\r\n        if (this._yOffset === value) {\r\n            return;\r\n        }\r\n\r\n        this._yOffset = value;\r\n\r\n        this.refresh();\r\n    }       \r\n\r\n    /** Gets or sets the tesselation used to build the cylinders */\r\n    public get cylinderTesselation(): number {\r\n        return this._cylinderTesselation;\r\n    }\r\n\r\n    public set cylinderTesselation(value: number) {\r\n        if (this._cylinderTesselation === value) {\r\n            return;\r\n        }\r\n\r\n        this._cylinderTesselation = value;\r\n        this._clean();\r\n\r\n        this.refresh();\r\n    }        \r\n\r\n    \r\n    /** Gets or sets the size of the world map (this will define the width of the supporting plane) */\r\n    public get worldMapSize(): number {\r\n        return this._worldMapSize;\r\n    }\r\n\r\n    public set worldMapSize(value: number) {\r\n        if (this._worldMapSize === value) {\r\n            return;\r\n        }\r\n\r\n        this._worldMapSize = value;\r\n\r\n        this.refresh();\r\n    }    \r\n\r\n    public updateHoverLabel = (meshLabel: Mesh) => {\r\n        if (!this.labelDimension || !this.displayLabels) {\r\n            return;\r\n        }\r\n\r\n        meshLabel.position.y += 1.5;\r\n    }\r\n\r\n    /**\r\n     * Gets the material used to render the world map\r\n     */\r\n    public get worldMapMaterial(): Nullable<Material> {\r\n        return this._mercatorMaterial;\r\n    }\r\n\r\n    /** Sets the texture url to use for the world map */\r\n    public set worldMapUrl(value: string) {\r\n        const scene = this._scene;\r\n        if (!this._mercatorMaterial) {\r\n            this._mercatorMaterial = new FluentMaterial(\"WorldMap\", scene!);\r\n    \r\n            this._mercatorMaterial.backFaceCulling = false;\r\n    \r\n            this._mercatorMaterial.renderHoverLight = true;\r\n            this._mercatorMaterial.hoverRadius = 3;\r\n    \r\n            this._worldMapPickedPointObserver = this.onPickedPointChangedObservable.add(pickedPoint => {\r\n                if (pickedPoint) {\r\n                    this._mercatorMaterial!.hoverPosition = pickedPoint;\r\n                    this._mercatorMaterial!.hoverColor.a = 1.0;\r\n                } else {\r\n                    this._mercatorMaterial!.hoverColor.a = 0;\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this._mercatorMaterial.albedoTexture) {\r\n            this._mercatorMaterial.albedoTexture.dispose();\r\n        }\r\n\r\n        const texture = new Texture(value, scene, false, true, Texture.LINEAR_LINEAR_MIPLINEAR, () => {\r\n            this.refresh();\r\n        });\r\n        this._mercatorMaterial.albedoTexture = texture;\r\n    }\r\n    \r\n    /**\r\n     * Creates a new MapGraph\r\n     * @param name defines the name of the graph\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, mapUrl: string, scene: Nullable<Scene> = Engine.LastCreatedScene) {\r\n        super(name, scene);\r\n\r\n        this.worldMapUrl = mapUrl;\r\n    }\r\n\r\n    protected _createCylinderMesh(name: string, scene: Scene): Mesh {\r\n        var cylinder = Mesh.CreateCylinder(name, 1, 1, 1, this._cylinderTesselation, 1, scene);\r\n        cylinder.setPivotMatrix(Matrix.Translation(0, 0.5, 0), false);\r\n\r\n        return cylinder;\r\n    }\r\n\r\n    public refresh(): MapGraph {\r\n        if (this._blockRefresh || !this._mercatorMaterial || !this._mercatorMaterial.albedoTexture!.isReady()) {\r\n            return this;\r\n        }\r\n\r\n        if (!this._dataSource) {\r\n            this._clean();\r\n            return this;\r\n        }\r\n\r\n        const scene = this._rootNode.getScene();\r\n        const data = this._dataFilters ? this._dataSource.getFilteredData(this._dataFilters) : this._dataSource.data;\r\n        let createMesh = false;\r\n\r\n        // Do we need to create new graph or animate the current one\r\n        if (!this._cylinderMeshes || this._cylinderMeshes.length !== data.length) {\r\n            this._clean();\r\n            createMesh = true;\r\n            this._cylinderMeshes = [];\r\n        }      \r\n\r\n        // Scan data\r\n        let min = 0;\r\n        let max = Number.MIN_VALUE;\r\n\r\n        // Check the limit of the entire series\r\n        this._dataSource.data.forEach(entry => {\r\n            if (min > entry.value) {\r\n                min = entry.value;\r\n            }\r\n\r\n            if (max < entry.value) {\r\n                max = entry.value;\r\n            }\r\n        });\r\n\r\n        let ratio = this._maxCylinderHeight / (max - min);     \r\n\r\n        this._removeLabels();\r\n        \r\n        const worldMaptextureSize = this._mercatorMaterial.albedoTexture!.getSize();\r\n        const worldMapWidth = this._worldMapSize;\r\n        const worldMapHeight = worldMapWidth * worldMaptextureSize.height / worldMaptextureSize.width;\r\n\r\n        if (this._worldMap) {\r\n            this._worldMap.dispose();\r\n        }\r\n\r\n        this._worldMap = Mesh.CreateGround(\"WorldMap\", worldMapWidth, worldMapHeight, 1, scene);\r\n        this._worldMap.parent = this._rootNode;\r\n        this._worldMap.material = this._mercatorMaterial;\r\n        this._worldMap.enablePointerMoveEvents = true;\r\n\r\n        // Default material\r\n        if (!this._defaultMaterial) {\r\n            this._defaultMaterial = this._createDefaultMaterial(scene);\r\n        }        \r\n        \r\n        // We will generate one cylinder per entry\r\n        let index = 0;\r\n        data.forEach(entry => {\r\n\r\n            var cylinderMesh: AbstractMesh;\r\n            if (createMesh) {\r\n                cylinderMesh = this._createCylinderMesh(this.name + \"_cylinder_\" + index++, scene);\r\n                cylinderMesh.enablePointerMoveEvents = true;\r\n                this._cylinderMeshes!.push(cylinderMesh);\r\n            } else {\r\n                cylinderMesh = this._cylinderMeshes![index++];\r\n            }\r\n\r\n            cylinderMesh.material = this._defaultMaterial;\r\n            cylinderMesh.metadata = entry;\r\n            cylinderMesh.parent = this._rootNode;\r\n            let currentScalingYState = cylinderMesh.scaling.y;\r\n            cylinderMesh.scaling.set(this._elementWidth / 2, 0, this._elementWidth / 2);\r\n\r\n            // Lat/long convertion\r\n            const latitude: number = entry.latitude;\r\n            const longitude: number = entry.longitude;\r\n            const x = (longitude + 180) * (worldMapWidth / 360) - worldMapWidth / 2;\r\n            const latRad = latitude * Math.PI / 180;\r\n            const mercN = Math.log(Math.tan(Math.PI / 4 + latRad / 2));\r\n            const z = worldMapWidth * mercN / (2 * Math.PI);\r\n            cylinderMesh.position.set(x + this._xOffset, 0.01, z + this._yOffset);\r\n\r\n            var easing = new BABYLON.CircleEase();\r\n            Animation.CreateAndStartAnimation(\"entryScale\", cylinderMesh, \"scaling.y\", 30, 30, currentScalingYState, entry.value * ratio, 0, easing);\r\n\r\n            this.onElementCreatedObservable.notifyObservers(cylinderMesh);\r\n\r\n            // Label\r\n            if (!this.labelDimension || !this.displayLabels) {\r\n                return;\r\n            }\r\n\r\n            let label = this._addLabel(entry[this.labelDimension], this._elementWidth);\r\n            label.position = cylinderMesh.position.clone();\r\n            Animation.CreateAndStartAnimation(\"labelScale\", label, \"position.y\", 30, 30, currentScalingYState + 1.0, entry.value * ratio + 1.0, 0, easing);\r\n        });\r\n\r\n        this.onRefreshObservable.notifyObservers(this);\r\n    \r\n        return this;\r\n    }\r\n\r\n    protected _clean(): void {\r\n        super._clean();\r\n        this._worldMap = null;\r\n        this._cylinderMeshes = null;\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n        if (this._worldMapPickedPointObserver) {\r\n            this.onPickedPointChangedObservable.remove(this._worldMapPickedPointObserver);\r\n            this._worldMapPickedPointObserver = null;    \r\n        }\r\n    }\r\n}","import { IDisposable, Scene, Nullable, Observer, UtilityLayerRenderer, PointerInfo, Observable, Vector3, Material, AbstractMesh, Engine, HemisphericLight, PointerEventTypes } from \"babylonjs\";\r\nimport { Container3D } from \"./controls/container3D\";\r\nimport { Control3D } from \"./controls/control3D\";\r\n\r\n/**\r\n * Class used to manage 3D user interface\r\n * @see http://doc.babylonjs.com/how_to/gui3d\r\n */\r\nexport class GUI3DManager implements IDisposable {\r\n    private _scene: Scene;\r\n    private _sceneDisposeObserver: Nullable<Observer<Scene>>;\r\n    private _utilityLayer: Nullable<UtilityLayerRenderer>;\r\n    private _rootContainer: Container3D;\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    private _pointerOutObserver: Nullable<Observer<number>>;\r\n    /** @hidden */\r\n    public _lastPickedControl: Control3D;\r\n    /** @hidden */\r\n    public _lastControlOver: { [pointerId: number]: Control3D } = {};\r\n    /** @hidden */\r\n    public _lastControlDown: { [pointerId: number]: Control3D } = {};\r\n\r\n    /**\r\n     * Observable raised when the point picked by the pointer events changed\r\n     */\r\n    public onPickedPointChangedObservable = new Observable<Nullable<Vector3>>();\r\n\r\n    // Shared resources\r\n    /** @hidden */\r\n    public _sharedMaterials: { [key: string]: Material } = {};\r\n\r\n    /** Gets the hosting scene */\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    /** Gets associated utility layer */\r\n    public get utilityLayer(): Nullable<UtilityLayerRenderer> {\r\n        return this._utilityLayer;\r\n    }\r\n\r\n    /**\r\n     * Creates a new GUI3DManager\r\n     * @param scene \r\n     */\r\n    public constructor(scene?: Scene) {\r\n        this._scene = scene || Engine.LastCreatedScene!;\r\n        this._sceneDisposeObserver = this._scene.onDisposeObservable.add(() => {\r\n            this._sceneDisposeObserver = null;\r\n            this._utilityLayer = null;\r\n            this.dispose();\r\n        })\r\n\r\n        this._utilityLayer = new UtilityLayerRenderer(this._scene);\r\n        this._utilityLayer.onlyCheckPointerDownEvents = false;\r\n        this._utilityLayer.mainSceneTrackerPredicate = (mesh: Nullable<AbstractMesh>) => {\r\n            return mesh && mesh.metadata && mesh.metadata._node;\r\n        }\r\n\r\n        // Root\r\n        this._rootContainer = new Container3D(\"RootContainer\");\r\n        this._rootContainer._host = this;\r\n        let utilityLayerScene = this._utilityLayer.utilityLayerScene;\r\n\r\n        // Events\r\n        this._pointerOutObserver = this._utilityLayer.onPointerOutObservable.add((pointerId) => {\r\n            this._handlePointerOut(pointerId, true);\r\n        });\r\n\r\n        this._pointerObserver = utilityLayerScene.onPointerObservable.add((pi, state) => {\r\n            this._doPicking(pi);\r\n        });\r\n\r\n        // Scene\r\n        this._utilityLayer.utilityLayerScene.autoClear = false;\r\n        this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = false;\r\n        new HemisphericLight(\"hemi\", Vector3.Up(), this._utilityLayer.utilityLayerScene);\r\n    }\r\n\r\n    private _handlePointerOut(pointerId: number, isPointerUp: boolean) {\r\n        var previousControlOver = this._lastControlOver[pointerId];\r\n        if (previousControlOver) {\r\n            previousControlOver._onPointerOut(previousControlOver);\r\n            delete this._lastControlOver[pointerId];\r\n        }\r\n\r\n        if (isPointerUp) {\r\n            if (this._lastControlDown[pointerId]) {\r\n                this._lastControlDown[pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerId];\r\n            }\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.notifyObservers(null);\r\n    }\r\n\r\n    private _doPicking(pi: PointerInfo): boolean {\r\n        if (!this._utilityLayer || !this._utilityLayer.utilityLayerScene.activeCamera) {\r\n            return false;\r\n        }\r\n\r\n        let pointerEvent = <PointerEvent>(pi.event);\r\n\r\n        let pointerId = pointerEvent.pointerId || 0;\r\n        let buttonIndex = pointerEvent.button;\r\n\r\n        let pickingInfo = pi.pickInfo;\r\n        if (!pickingInfo || !pickingInfo.hit) {\r\n            this._handlePointerOut(pointerId, pi.type === PointerEventTypes.POINTERUP);\r\n            return false;\r\n        }\r\n\r\n        let control = <Control3D>(pickingInfo.pickedMesh!.metadata);\r\n        if (pickingInfo.pickedPoint) {\r\n            this.onPickedPointChangedObservable.notifyObservers(pickingInfo.pickedPoint);\r\n        }\r\n\r\n        if (!control._processObservables(pi.type, pickingInfo.pickedPoint!, pointerId, buttonIndex)) {\r\n\r\n            if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId]);\r\n                }\r\n\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        }\r\n\r\n        if (pi.type === PointerEventTypes.POINTERUP) {\r\n            if (this._lastControlDown[pointerEvent.pointerId]) {\r\n                this._lastControlDown[pointerEvent.pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerEvent.pointerId];\r\n            }\r\n\r\n            if (pointerEvent.pointerType === \"touch\") {\r\n                this._handlePointerOut(pointerId, false);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Gets the root container\r\n     */\r\n    public get rootContainer(): Container3D {\r\n        return this._rootContainer;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the root child list\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the root child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._rootContainer.containsControl(control);\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the root child list\r\n     * @param control defines the control to add\r\n     * @returns the current manager\r\n     */\r\n    public addControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.addControl(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the root child list\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.removeControl(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this._rootContainer.dispose();\r\n\r\n        for (var materialName in this._sharedMaterials) {\r\n            if (!this._sharedMaterials.hasOwnProperty(materialName)) {\r\n                continue;\r\n            }\r\n\r\n            this._sharedMaterials[materialName].dispose();\r\n        }\r\n\r\n        this._sharedMaterials = {};\r\n\r\n        if (this._pointerOutObserver && this._utilityLayer) {\r\n            this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver);\r\n            this._pointerOutObserver = null;\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.clear();\r\n\r\n        let utilityLayerScene = this._utilityLayer ? this._utilityLayer.utilityLayerScene : null;\r\n\r\n        if (utilityLayerScene) {\r\n            if (this._pointerObserver) {\r\n                utilityLayerScene.onPointerObservable.remove(this._pointerObserver);\r\n                this._pointerObserver = null;\r\n            }\r\n        }\r\n        if (this._scene) {\r\n            if (this._sceneDisposeObserver) {\r\n                this._scene.onDisposeObservable.remove(this._sceneDisposeObserver);\r\n                this._sceneDisposeObserver = null;\r\n            }\r\n        }\r\n\r\n        if (this._utilityLayer) {\r\n            this._utilityLayer.dispose();\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}