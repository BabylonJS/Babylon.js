var BABYLON;!(function(e){var t=(function(){function t(){}return t.GLTF=function(t,r,i){function s(e,t,r){var i={buffer:e,byteLength:r};return t>0&&(i.byteOffset=t),i}function n(e,t,r,i,s,n,a){var o={name:t,bufferView:e,componentType:i,count:s,type:r};return n&&(o.min=n),a&&(o.max=a),o}function a(e,t,r,i,s){var n=[1/0,1/0,1/0],a=[-1/0,-1/0,-1/0],o=t+r;if(r>0)for(var f=t;f<o;++f)for(var u=s*f,c=0;c<s;++c)e[u]<n[c]&&(n[c]=e[u]),e[u]>a[c]&&(a[c]=e[u]),++u;return{min:n,max:a}}function o(t,r,i,s,n,a,o){var f=n,u=r.verticesStart+r.verticesCount,c=0;switch(t){case e.VertexBuffer.PositionKind:case e.VertexBuffer.NormalKind:for(var v=r.verticesStart;v<u;++v){var l=v*s;a.setFloat32(f,i[l],!0),f+=4,a.setFloat32(f,i[l+1],!0),f+=4,o?a.setFloat32(f,i[l+2],!0):a.setFloat32(f,-i[l+2],!0),f+=4}c=12*r.verticesCount;break;case e.VertexBuffer.TangentKind:for(var v=r.indexStart;v<u;++v){var l=v*s;a.setFloat32(f,i[l],!0),f+=4,a.setFloat32(f,i[l+1],!0),f+=4,o?a.setFloat32(f,i[l+2],!0):a.setFloat32(f,-i[l+2],!0),f+=4,a.setFloat32(f,i[l+3],!0),f+=4}c=16*r.verticesCount;break;case e.VertexBuffer.ColorKind:for(var v=r.verticesStart;v<u;++v){var l=v*s;a.setFloat32(f,i[l],!0),f+=4,a.setFloat32(f,i[l+1],!0),f+=4,a.setFloat32(f,i[l+2],!0),f+=4,a.setFloat32(f,i[l+3],!0),f+=4}c=16*r.verticesCount;break;case e.VertexBuffer.UVKind:case e.VertexBuffer.UV2Kind:for(var v=r.verticesStart;v<u;++v){var l=v*s;a.setFloat32(f,i[l],!0),f+=4,a.setFloat32(f,i[l+1],!0),f+=4}c=8*r.verticesCount;break;default:throw new Error("Unsupported vertex buffer type: "+t)}return c}function f(r,i,f){for(var u={nodes:new Array},c=0;c<t.length;++c){var v={mesh:-1},l=t[c],V=l.getScene().useRightHandedSystem;0===l.position.x&&0===l.position.y&&0===l.position.z||(v.translation=V?l.position.asArray():[l.position.x,l.position.y,-l.position.z]),1===l.scaling.x&&1===l.scaling.y&&1===l.scaling.z||(v.scale=V?l.scaling.asArray():[l.scaling.x,l.scaling.y,-l.scaling.z]);var d=e.Quaternion.RotationYawPitchRoll(l.rotation.y,l.rotation.x,l.rotation.z);l.rotationQuaternion&&(d=d.multiply(l.rotationQuaternion)),0===d.x&&0===d.y&&0===d.z&&1===d.w||(v.rotation=V?d.asArray():[-d.x,-d.y,d.z,d.w]);var g=void 0,h=void 0,x=void 0,B=void 0,w=void 0,b=void 0,p=void 0,y=void 0,C=void 0,m=void 0,K=void 0,A=void 0,S=void 0,D=void 0,U=void 0,P=void 0,F=void 0,T=void 0,O=void 0;l.isVerticesDataPresent(e.VertexBuffer.PositionKind)&&(g=l.getVertexBuffer(e.VertexBuffer.PositionKind),h=g.getData(),x=g.getOffset(),B=g.getStrideSize()),l.isVerticesDataPresent(e.VertexBuffer.NormalKind)&&(w=l.getVertexBuffer(e.VertexBuffer.NormalKind),b=w.getData(),p=w.getStrideSize()),l.isVerticesDataPresent(e.VertexBuffer.TangentKind)&&(y=l.getVertexBuffer(e.VertexBuffer.TangentKind),C=y.getData(),m=y.getStrideSize()),l.isVerticesDataPresent(e.VertexBuffer.ColorKind)&&(K=l.getVertexBuffer(e.VertexBuffer.ColorKind),A=K.getData(),S=K.getStrideSize()),l.isVerticesDataPresent(e.VertexBuffer.UVKind)&&(D=l.getVertexBuffer(e.VertexBuffer.UVKind),U=D.getData(),P=D.getStrideSize()),l.isVerticesDataPresent(e.VertexBuffer.UV2Kind)&&(F=l.getVertexBuffer(e.VertexBuffer.UV2Kind),T=F.getData(),O=F.getStrideSize());var N={primitives:new Array};N.primitives=[],l.name&&(N.name=l.name);for(var z=0;z<l.subMeshes.length;++z){var L=l.subMeshes[z],E={attributes:{}};if(l.isVerticesDataPresent(e.VertexBuffer.PositionKind))if(f)i+=o(e.VertexBuffer.PositionKind,L,h,B,i,f,V);else{var R=12*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var k=a(h,L.verticesStart,L.verticesCount,x,B),Y=n(r.bufferViews.length-1,"Position","VEC3",5126,L.verticesCount,k.min,k.max);r.accessors.push(Y),E.attributes.POSITION=r.accessors.length-1}if(l.isVerticesDataPresent(e.VertexBuffer.NormalKind))if(f)i+=o(e.VertexBuffer.NormalKind,L,b,p,i,f,V);else{var R=12*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Normal","VEC3",5126,L.verticesCount);r.accessors.push(Y),E.attributes.NORMAL=r.accessors.length-1}if(l.isVerticesDataPresent(e.VertexBuffer.TangentKind))if(f)i+=o(e.VertexBuffer.TangentKind,L,C,m,i,f,V);else{var R=16*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Tangent","VEC4",5126,L.verticesCount);r.accessors.push(Y),E.attributes.TANGENT=r.accessors.length-1}if(l.isVerticesDataPresent(e.VertexBuffer.ColorKind))if(f)i+=o(e.VertexBuffer.ColorKind,L,A,S,i,f,V);else{var R=16*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Color","VEC4",5126,L.verticesCount);r.accessors.push(Y),E.attributes.COLOR_0=r.accessors.length-1}if(l.isVerticesDataPresent(e.VertexBuffer.UVKind))if(f)i+=o(e.VertexBuffer.UVKind,L,U,P,i,f,V);else{var R=8*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Texture Coords","VEC2",5126,L.verticesCount);r.accessors.push(Y),E.attributes.TEXCOORD_0=r.accessors.length-1}if(l.isVerticesDataPresent(e.VertexBuffer.UV2Kind))if(f)i+=o(e.VertexBuffer.UV2Kind,L,T,O,i,f,V);else{var R=8*L.verticesCount,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Texture Coords","VEC2",5126,L.verticesCount);r.accessors.push(Y),E.attributes.TEXCOORD_1=r.accessors.length-1}if(l.getTotalIndices()>0)if(f){for(var G=l.getIndices(),M=L.indexStart,Q=L.indexCount+M,_=i,J=M;J<Q;J+=3)f.setUint32(_,G[J],!0),_+=4,f.setUint32(_,G[J+1],!0),_+=4,f.setUint32(_,G[J+2],!0),_+=4;var R=4*L.indexCount;i+=R}else{var X=L.indexCount,R=4*X,I=s(0,i,R);i+=R,r.bufferViews.push(I);var Y=n(r.bufferViews.length-1,"Indices","SCALAR",5125,X);r.accessors.push(Y),E.indices=r.accessors.length-1}l.material&&(r.materials||(r.materials=new Array),E.material=r.materials.length-1),N.primitives.push(E)}r.meshes.push(N),v.mesh=r.meshes.length-1,r.nodes.push(v),u.nodes.push(r.nodes.length-1)}return r.scenes.push(u),i}var u,c,v=r.replace(/\.[^\/.]+$/,""),l={buffers:new Array,bufferViews:new Array,asset:{generator:"BabylonJS",version:"2.0"},meshes:new Array,scenes:new Array,nodes:new Array,accessors:new Array},V=0;V=f(l,V,null);var d={byteLength:V};i||(d.uri=v+".bin"),l.buffers.push(d);var g=JSON.stringify(l,null,2);if(u=new ArrayBuffer(V),c=new DataView(u),V=0,f(l,V,c),i){return (function(e,t,r){var i=r+".glb",s=e.length,n=s%4,a=t.byteLength%4,o=0===n?n:4-n,f=0===a?a:4-a,u=28+s+o+t.byteLength+f,c=new ArrayBuffer(12),v=new DataView(c);v.setUint32(0,1179937895,!0),v.setUint32(4,2,!0),v.setUint32(8,u,!0);var l=new ArrayBuffer(8+s+o),V=new DataView(l);V.setUint32(0,s+o,!0),V.setUint32(4,1313821514,!0);for(var d=new Uint8Array(l,8),g=0;g<s;++g)d[g]=e.charCodeAt(g);for(var h=new Uint8Array(l,8+s),g=0;g<o;++g)h[g]=32;var x=new ArrayBuffer(8),B=new DataView(x);B.setUint32(0,t.byteLength,!0),B.setUint32(4,5130562,!0);for(var w=new ArrayBuffer(f),b=new Uint8Array(w),g=0;g<f;++g)b[g]=0;var p=new Blob([c,l,x,t,w],{type:"application/octet-stream"});return y={},y[i]=p,y;var y})(g,u,v)}var h=v+".gltf",x=v+".bin",B=new Blob([u],{type:"application/octet-stream"});return w={},w[h]=g,w[x]=B,w;var w},t})();e.GLTFExport=t})(BABYLON||(BABYLON={}));